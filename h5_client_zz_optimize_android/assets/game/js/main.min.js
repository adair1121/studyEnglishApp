function post(t,e,n){var r=n.value,i=t.constructor.name+MessageCenter.splite+e,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=r.call.apply(r,[this].concat(t));return("boolean"!=typeof n||n)&&MessageCenter.ins().dispatch(i,n),n};return o.funcallname=i,n.value=o,n}function callLater(t,e,n){var r=n.value,i="$"+e+"CL",o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];delete this[i],r.call.apply(r,[this].concat(t))},s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this[i]||(egret.callLater.apply(egret,[o,this].concat(t)),this[i]=!0)};return n.value=s,n}function callDelay(t){var e=function(e,n,r){var i=r.value,o="$isDelay"+n,s=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this[o]=!1,i.call.apply(i,[this].concat(t))},a=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this[o]||(this[o]=!0,egret.setTimeout.apply(egret,[s,this,t].concat(e)))};return r.value=a,r};return e}var __reflect=this&&this.__reflect||function(t,e,n){t.__class__=e,n?n.push(e):n=[e],t.__types__=t.__types__?n.concat(t.__types__):n},__extends=this&&this.__extends||function(t,e){function n(){this.constructor=t}for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);n.prototype=e.prototype,t.prototype=new n},__awaiter=this&&this.__awaiter||function(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{h(r.next(t))}catch(e){o(e)}}function a(t){try{h(r["throw"](t))}catch(e){o(e)}}function h(t){t.done?i(t.value):new n(function(e){e(t.value)}).then(s,a)}h((r=r.apply(t,e||[])).next())})},__generator=this&&this.__generator||function(t,e){function n(t){return function(e){return r([t,e])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;h;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,o=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){h.label=n[1];break}if(6===n[0]&&h.label<s[1]){h.label=s[1],s=n;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(n);break}s[2]&&h.ops.pop(),h.trys.pop();continue}n=e.call(t,h)}catch(r){n=[6,r],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},BaseView=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.observe=function(t,e,n){void 0===n&&(n=void 0),MessageCenter.addListener(t,e,this,n)},e.prototype.removeObserve=function(){MessageCenter.ins().removeAll(this)},e.prototype.addTouchEvent=function(t,e,n){void 0===n&&(n=!1),this.addEvent(egret.TouchEvent.TOUCH_TAP,t,e),n&&(t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginTouch,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndTouch,this),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEndTouch,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndTouch,this))},e.prototype.onBeginTouch=function(t){t.target&&this.changeFilter(t.target)},e.prototype.onEndTouch=function(t){t.target&&t.target.filters&&(t.target.filters=[])},e.prototype.changeFilter=function(t){var e=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(e);t.filters=[n]},e.prototype.addTouchEndEvent=function(t,e){this.addEvent(egret.TouchEvent.TOUCH_END,t,e)},e.prototype.addChangeEvent=function(t,e){var n=this;t&&t instanceof eui.TabBar?this.addEvent(egret.TouchEvent.CHANGE,t,function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];e.call.apply(e,[n].concat(t))}):this.addEvent(egret.TouchEvent.CHANGE,t,e)},e.prototype.hidePageFunc=function(t){for(var e=t.$children.length,n=1;e>n;n++)if(t.$children.length>=2){var r=t.getChildAt(1);t.removeChild(r)}},e.prototype.addChangingEvent=function(t,e){this.addEvent(egret.TouchEvent.CHANGING,t,e)},e.prototype.addEvent=function(t,e,n){return e?void e.addEventListener(t,n,this):void debug.error("不存在绑定对象")},e.prototype.removeTouchEvent=function(t,e){t&&(t.removeEventListener(egret.TouchEvent.TOUCH_TAP,e,this),t.hasEventListener("touchBegin")&&t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginTouch,this),t.hasEventListener("touchEnd")&&t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndTouch,this),t.hasEventListener("touchCancel")&&t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEndTouch,this),t.hasEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE)&&t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndTouch,this))},e.prototype.$onClose=function(){var t=function(n){for(var r=0;r<n.numChildren;r++){var i=n.getChildAt(r);i instanceof e?i.$onClose():i instanceof egret.DisplayObjectContainer&&t(i)}};t(this),this.removeObserve()},e}(eui.Component);__reflect(BaseView.prototype,"BaseView");var BaseEuiLayer=function(t){function e(){var e=t.call(this)||this;return e.percentWidth=100,e.percentHeight=100,e.touchEnabled=!1,e}return __extends(e,t),e}(eui.UILayer);__reflect(BaseEuiLayer.prototype,"BaseEuiLayer");var BaseClass=function(){function t(){}return t.ins=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=this;if(!n._instance){var r=t.length;0==r?n._instance=new n:1==r?n._instance=new n(t[0]):2==r?n._instance=new n(t[0],t[1]):3==r?n._instance=new n(t[0],t[1],t[2]):4==r?n._instance=new n(t[0],t[1],t[2],t[3]):5==r&&(n._instance=new n(t[0],t[1],t[2],t[3],t[4]))}return n._instance},t}();__reflect(BaseClass.prototype,"BaseClass");var ViewManager=function(t){function e(){var e=t.call(this)||this;return e.filters=["TipsView","UIView1_1","GameSceneView","PlayFunView"],e.closeTopFilters=[],e._regesterInfo={},e._views={},e._hCode2Key={},e._opens=[],e._constView=["GameSceneView","UIView2","TipsView","PlayFunView"],e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.clear=function(){this.closeAll(),this._views={}},e.prototype.reg=function(t,e){if(null!=t){var n=egret.getQualifiedClassName(t);this._regesterInfo[n]||(this._regesterInfo[n]=[t,e])}},e.prototype.destroy=function(t){var e=this._hCode2Key[t];delete this._views[e],delete this._hCode2Key[t]},e.prototype.getKey=function(t){var e="";if("string"==typeof t)e=t;else if("function"==typeof t)e=egret.getQualifiedClassName(t);else if(t instanceof BaseEuiView)for(var n=Object.keys(this._views),r=0,i=n.length;i>r;r++){var o=n[r];if(this._views[o]==t){e=o;break}}else debug.log("打开界面只支持类名和类名的字符串形式,关闭界面只支持类名和类名的字符串以及类的实例形式,错误编号:"+t);return e},e.prototype.viewOpenCheck=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=!0,i=this._regesterInfo[t];if(null!=i){var o=i[0],s=o.openCheck;null!=s&&(r=s.apply(void 0,e))}return r},e.prototype.open=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.getKey(t);if(!this.viewOpenCheck.apply(this,[r].concat(e)))return null;var i=this.openEasy(r,e);return-1==this.filters.indexOf(r)&&debug.log("开始打开窗口:"+r),i&&this.checkOpenView(i),MessageCenter.ins().dispatch("refreshNAV"),i},e.prototype.openExture=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.getKey(t);if(!this.viewOpenCheck.apply(this,[r].concat(e)))return null;var i=this.openEasy(r,e);return i.visible=!1,i.autoExecute&&i.autoExecute(),-1==this.filters.indexOf(r)&&debug.log("开始打开窗口:"+r),i},e.prototype.openEasy=function(t,e){void 0===e&&(e=null);var n=this.getKey(t),r=this._views[n],i=this._regesterInfo[n];if(!r){if(Assert(i,"ViewManager.openEasy class "+n+" is null!!"))return;r=new i[0],this._views[n]=r,this._hCode2Key[r.hashCode]=n}if(null==r)return debug.log("UI_"+n+"不存在"),null;for(var o=0,s=r.exclusionWins;o<s.length;o++){var a=s[o];this.closeEasy(a)}r.isShow()||r.isInit()?(r.addToParent(i[1]),r.open.apply(r,e)):(r.addToParent(i[1]),r.initUI(),r.initData(),r.open.apply(r,e),r.setVisible(!0));var h=this._opens.indexOf(n);return h>=0&&this._opens.splice(h,1),this._opens.push(n),r},e.prototype.checkOpenView=function(t){t.isTopLevel&&t.parent!=LayerManager.UI_Popup},e.prototype.close=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=this.getKey(t);this.closeEx(r,e)},e.prototype.closeEx=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(t){var r=this.getView(t);if(r){var i=this;r.closeEx(function(){var n=i.closeEasy(t,e);n&&i.checkCloseView()})}}},e.prototype.closeLastTopView=function(){for(var t=this._opens.length,e=t-1;e>=0;e--){var n=this.getView(this._opens[e]);if(n&&n.isTopLevel){this.close(n);break}}},e.prototype.closeEasy=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this.isShow(t))return null;var r=this.getKey(t),i=this.getView(r);if(i){var o=this._opens.indexOf(r);o>=0&&this._opens.splice(o,1),i.close.apply(i,e),i.$onClose.apply(i),i.removeFromParent()}return MessageCenter.ins().dispatch("refreshNAV"),i},e.prototype.checkCloseView=function(){for(var t=!1,e=0,n=this._opens;e<n.length;e++){var r=n[e],i=this.getView(r);if(i&&i.isTopLevel){t=!0;break}}},e.prototype.getView=function(t){var e=this.getKey(t);return this._views[e]},e.prototype.closeAll=function(){for(;this._opens.length;)this.closeEasy(this._opens[0],[]);this.destroyAllNotShowView(),this.checkCloseView()},e.prototype.closeTopLevel=function(){var t=this.closeTopFilters;this.closeTopFilters=[];for(var e=this._opens.length-1;e>=0;e--){var n=this._opens[e];if(!(t.indexOf(n)>=0)){var r=this.getView(n),i=1e6;isNaN(parseInt(n))||(i=parseInt(n)),r&&r.isTopLevel&&this.closeEasy(n,[])}}this.checkCloseView()},e.prototype.openNum=function(){return this._opens.length},e.prototype.isShow=function(t){return this._opens.indexOf(this.getKey(t))>=0},e.prototype.hasTopView=function(){for(var t=0,e=this._opens;t<e.length;t++){var n=e[t],r=this.getView(n);if(r&&r.isTopLevel)return!0}return!1},e.prototype.destroyAllNotShowView=function(){for(var t in this._hCode2Key){var e=this._hCode2Key[t];if(-1==this._constView.indexOf(e)&&-1==this._opens.indexOf(e)){var n=this.getView(e);n&&n.destoryView&&n.destoryView(!1)}}},e}(BaseClass);__reflect(ViewManager.prototype,"ViewManager");var BaseScene=function(){function t(){this._layers=new Array}return t.prototype.onEnter=function(){},t.prototype.onExit=function(){ViewManager.ins().closeAll(),this.removeAllLayer()},t.prototype.addLayer=function(t){t instanceof BaseSpriteLayer?(StageUtils.ins().getStage().addChild(t),this._layers.push(t)):t instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().addChild(t),this._layers.push(t))},t.prototype.addLayerAt=function(t,e){t instanceof BaseSpriteLayer?(StageUtils.ins().getStage().addChildAt(t,e),this._layers.push(t)):t instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().addChildAt(t,e),this._layers.push(t))},t.prototype.removeLayer=function(t){t instanceof BaseSpriteLayer?(StageUtils.ins().getStage().removeChild(t),this._layers.splice(this._layers.indexOf(t),1)):t instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().removeChild(t),this._layers.splice(this._layers.indexOf(t),1))},t.prototype.layerRemoveAllChild=function(t){t instanceof BaseSpriteLayer?t.removeChildren():t instanceof BaseEuiLayer&&t.removeChildren()},t.prototype.removeAllLayer=function(){for(;this._layers.length;){var t=this._layers[0];this.layerRemoveAllChild(t),this.removeLayer(t)}},t}();__reflect(BaseScene.prototype,"BaseScene");var MessageCenter=function(t){function e(e){var n=t.call(this)||this;return n.flag=0,n.type=e,n.dict={},n.eVec=[],0==n.type&&egret.startTick(n.run,n),n}return __extends(e,t),e.ins=function(){return t.ins.call(this,0)},e.prototype.clear=function(){this.dict={},this.eVec.splice(0)},e.prototype.addListener=function(t,e,n){var r=this.dict[t];r?0!=this.flag&&(this.dict[t]=r=r.concat()):this.dict[t]=r=[];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s[0]==e&&s[1]==n)return}r.push([e,n])},e.prototype.removeListener=function(t,e,n){var r=this.dict[t];if(r){0!=this.flag&&(this.dict[t]=r=r.concat());for(var i=r.length,o=0;i>o;o++)if(r[o][0]==e&&r[o][1]==n){r.splice(o,1);break}0==r.length&&(this.dict[t]=null,delete this.dict[t])}},e.prototype.removeAll=function(t){for(var e=Object.keys(this.dict),n=0,r=e;n<r.length;n++){var i=r[n],o=this.dict[i];0!=this.flag&&(this.dict[i]=o=o.concat());for(var s=o.length,a=s-1;a>=0;a--)o[a][1]==t&&o.splice(a,1);0==o.length&&(this.dict[i]=null,delete this.dict[i])}},e.prototype.dispatch=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=ObjectPool.pop("MessageVo");r.type=t,r.param=e,0==this.type?this.eVec.push(r):1==this.type?this.dealMsg(r):debug.log("MessageCenter未实现的类型")},e.prototype.run=function(t){for(var e=egret.getTimer();this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-e>5)););return!1},e.prototype.dealMsg=function(t){var e=this.dict[t.type];if(e){var n=e.length;if(0!=n){this.flag++;for(var r=0,i=e;r<i.length;r++){var o=i[r];o[0].apply(o[1],t.param)}this.flag--,t.dispose(),ObjectPool.push(t)}}},e.setFunction=function(t,n,r,i){if(0==r.indexOf(i)&&"function"==typeof n[r]){var o=egret.getQualifiedClassName(n)+e.splite+r+e.msgIndex;e.msgIndex+=1;var s=n[r],a=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i;n.length;return i=t?s.call.apply(s,[this].concat(n)):s.apply(void 0,n),("boolean"!=typeof i||i)&&e.ins().dispatch(o,i),i};return a.funcallname=o,n[r]=a,!0}return!1},e.compile=function(t,n){void 0===n&&(n="post");var r=t.prototype;for(var i in r)e.setFunction(!0,r,i,n)},e.addListener=function(t,n,r,i){return void 0===i&&(i=void 0),t.funcallname?(e.ins().addListener(t.funcallname,n,r),i&&t.call(i),!0):(debug.log("MessageCenter.addListener error:"+egret.getQualifiedClassName(r)),!1)},e.splite=".",e.msgIndex=1,e}(BaseClass);__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function t(){}return t.prototype.dispose=function(){this.type=null,this.param=null},t}();__reflect(MessageVo.prototype,"MessageVo");var LayerManager=function(){function t(){}return t.Game_Bg=new BaseEuiLayer,t.Game_Main=new BaseEuiLayer,t.Main_View=new BaseEuiLayer,t.UI_Main=new BaseEuiLayer,t.UI_Main2=new BaseEuiLayer,t.UI_Popup=new BaseEuiLayer,t.UI_Message=new BaseEuiLayer,t.UI_Tips=new BaseEuiLayer,t}();__reflect(LayerManager.prototype,"LayerManager");var BaseSound=function(){function t(){this._cache={},this._loadingCache=new Array,TimerManager.ins().doTimer(6e4,0,this.dealSoundTimer,this)}return t.prototype.dealSoundTimer=function(){for(var t=egret.getTimer(),e=Object.keys(this._cache),n=0,r=e.length;r>n;n++){var i=e[n];this.checkCanClear(i)&&t-this._cache[i]>=SoundManager.CLEAR_TIME&&(delete this._cache[i],RES.destroyRes(i))}},t.prototype.getSound=function(t,e,n){var r=this;RES.getResByUrl(t,function(i){var o=i;if(o)r._cache[t]&&(r._cache[t]=egret.getTimer());else{if(-1!=r._loadingCache.indexOf(t))return null;r._loadingCache.push(t),RES.getResAsync(t,r.onResourceLoadComplete,r)}e&&n&&e.call(n,o)},this,RES.ResourceItem.TYPE_SOUND)},t.prototype.onResourceLoadComplete=function(t,e){var n=this._loadingCache.indexOf(e);-1!=n&&(this._loadingCache.splice(n,1),this._cache[e]=egret.getTimer(),this.loadedPlay(e))},t.prototype.loadedPlay=function(t){},t.prototype.checkCanClear=function(t){return!0},t}();__reflect(BaseSound.prototype,"BaseSound");var BaseEuiView=function(t){function e(){var e=t.call(this)||this;return e._resources=null,e.isTopLevel=!1,e.exclusionWins=[],e._isInit=!1,e.percentHeight=100,e.percentWidth=100,e}return __extends(e,t),e.prototype.addExclusionWin=function(t){-1==this.exclusionWins.indexOf(t)&&this.exclusionWins.push(t)},e.prototype.isInit=function(){return this._isInit},e.prototype.isShow=function(){return null!=this.stage&&this.visible},e.prototype.addToParent=function(t){t.addChild(this),TimerManager.ins().remove(this.destoryView,this)},e.prototype.removeFromParent=function(){this.parent;DisplayUtils.removeFromParent(this),this.destoryView()},e.prototype.hidePageFunc=function(t,e){void 0===e&&(e=0);var n,r=[];if("number"==typeof e)n=t.getChildAt(e);else{for(var i=0;i<e.length;i++)n=t.getChildAt(e[i]),r.push(n);n=null}if(t.$children.length>=2)for(var o=0;o<t.$children.length;o++){var s=t.getChildAt(o);n?n!=s&&(t.removeChild(s),o--):~r.indexOf(s)||(t.removeChild(s),o--)}},e.prototype.initUI=function(){this._isInit=!0},e.prototype.initData=function(){},e.prototype.destroy=function(){},e.prototype.destoryView=function(t){void 0===t&&(t=!0),TimerManager.ins().removeAll(this),ViewManager.ins().destroy(this.hashCode)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.loadResource=function(t,e){this._resources&&this._resources.length>0?(ResourceUtils.ins().loadResource(this._resources,[],t,null,this),this.addEventListener(eui.UIEvent.CREATION_COMPLETE,e,this)):(t(),e())},e.prototype.setVisible=function(t){this.visible=t},e.openCheck=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return!0},e.prototype.closeEx=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[0];this.parent==LayerManager.UI_Popup,n()},e}(BaseView);__reflect(BaseEuiView.prototype,"BaseEuiView",["IBaseView"]);var BaseItemRender=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.addTouchEvent=function(t,e,n){void 0===n&&(n=!0),n&&(t.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginTouch,this),t.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndTouch,this),t.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEndTouch,this),t.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndTouch,this))},e.prototype.onBeginTouch=function(t){t.target&&this.changeFilter(t.target)},e.prototype.onEndTouch=function(t){t.target&&t.target.filters&&(t.target.filters=[])},e.prototype.changeFilter=function(t){var e=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(e);t.filters=[n]},e.prototype.removeTouchEvent=function(t,e){t&&(t.hasEventListener("touchBegin")&&t.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginTouch,this),t.hasEventListener("touchEnd")&&t.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndTouch,this),t.hasEventListener("touchCancel")&&t.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEndTouch,this),t.hasEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE)&&t.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndTouch,this))},e}(eui.ItemRenderer);__reflect(BaseItemRender.prototype,"BaseItemRender");var Dictionary=function(){function t(){this._keys=[],this._values=[]}return Object.defineProperty(t.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"keys",{get:function(){return this._keys},enumerable:!0,configurable:!0}),t.prototype.setKeyValue=function(t,e){var n=this._keys.indexOf(t);return n>=0?void(this._values[n]=e):(this._keys.push(t),void this._values.push(e))},t.prototype.getValue=function(t){var e=this._keys.indexOf(t);return 0>e?null:this._values[e]},t.prototype.remove=function(t){var e=this._keys.indexOf(t);return e>=0?(this._keys.splice(e,1),this._values.splice(e,1),!0):!1},t.prototype.clear=function(){this._values.length=0,this._keys.length=0},t}();__reflect(Dictionary.prototype,"Dictionary");var RenderTextureManager=function(t){function e(){var e=t.call(this)||this;return e._pool=[],e._useNum=0,e.isLowerQQBrowser()?e._maxNum=18:e._maxNum=-1,e}return __extends(e,t),e.prototype.isLowerQQBrowser=function(){if(DeviceUtils.IsQQBrowser){for(var t=["2013022","Lenovo A630t","SM-G3818","vivo X3t","GT-I9100"],e=!1,n=0,r=t.length;r>n;n++)if(-1!=navigator.userAgent.indexOf(t[n])){e=!0;break}return e}return!1},e.prototype.pop=function(){var t=this._pool.pop();return t||(-1==this._maxNum||this._useNum<this._maxNum)&&(t=new egret.RenderTexture,this._useNum++),t},e.prototype.push=function(t){for(var e=!1,n=0,r=this._pool.length;r>n;n++)if(this._pool[n]==t){e=!0;break}e||this._pool.push(t)},e}(BaseClass);__reflect(RenderTextureManager.prototype,"RenderTextureManager");var ResVersionManager=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.loadConfig=function(t,e){},e}(BaseClass);__reflect(ResVersionManager.prototype,"ResVersionManager");var TimerManager=function(t){function e(){var e=t.call(this)||this;return e.currHandler=null,e._handlers=[],e.nexthandles=null,e._currTime=egret.getTimer(),e._currFrame=0,egret.startTick(e.onEnterFrame,e),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getFrameId=function(){return this._currFrame},e.prototype.getCurrTime=function(){return this._currTime},e.binFunc=function(t,e){return t.exeTime>e.exeTime?-1:t.exeTime<e.exeTime?1:0},e.DeleteHandle=function(t){t.clear(),ObjectPool.push(t)},e.prototype.onEnterFrame=function(t){this._currFrame++,this._currTime=egret.getTimer();var n=0,r=this.nexthandles;if(this.nexthandles=null,r&&r.length>0){for(var i=0,o=r;i<o.length;i++){var s=o[i];s.method.call(s.methodObj),e.DeleteHandle(s)}r=null}if(this._handlers.length<=0)return!1;for(var a=this._handlers[this._handlers.length-1];a.exeTime<=this._currTime;){this.currHandler=a=this._handlers.pop(),a.method.call(a.methodObj),n=egret.getTimer(),a.exeTime=n+a.delay;var h=a.forever;if(h||(a.repeatCount>1?(a.repeatCount--,h=!0):a.onFinish&&a.onFinish.apply(a.finishObj)),h){var u=Algorithm.binSearch(this._handlers,a,e.binFunc);this._handlers.splice(u,0,a)}else e.DeleteHandle(a);if(n-this._currTime>5)break;if(this._handlers.length<=0)break;a=this._handlers[this._handlers.length-1]}return this.currHandler=null,!1},e.prototype.create=function(t,n,r,i,o,s,a){if(!(0>n||0>r||null==i)){var h=ObjectPool.pop("TimerHandler");h.forever=0==r,h.repeatCount=r,h.delay=n,h.method=i,h.methodObj=o,h.onFinish=s,h.finishObj=a,h.exeTime=t+this._currTime;var u=Algorithm.binSearch(this._handlers,h,e.binFunc);this._handlers.splice(u,0,h)}},e.prototype.doTimer=function(t,e,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.create(t,t,e,n,r,i,o)},e.prototype.doTimerDelay=function(t,e,n,r,i,o,s){void 0===o&&(o=null),void 0===s&&(s=null),this.create(t,e,n,r,i,o,s)},e.prototype.doNext=function(t,e){var n=ObjectPool.pop("TimerHandler");n.method=t,n.methodObj=e,this.nexthandles||(this.nexthandles=[]),this.nexthandles.push(n)},e.prototype.remove=function(t,n){var r=this.currHandler;r&&r.method==t&&r.methodObj==n&&(r.forever=!1,r.repeatCount=0);for(var i=this._handlers.length-1;i>=0;i--){var o=this._handlers[i];o.method==t&&o.methodObj==n&&(this._handlers.splice(i,1),e.DeleteHandle(o))}},e.prototype.removeAll=function(t){var n=this.currHandler;n&&n.methodObj==t&&(n.forever=!1,n.repeatCount=0);for(var r=this._handlers.length-1;r>=0;r--){var i=this._handlers[r];i.methodObj==t&&(this._handlers.splice(r,1),e.DeleteHandle(i))}},e.prototype.isExists=function(t,e){for(var n=0,r=this._handlers;n<r.length;n++){var i=r[n];if(i.method==t&&i.methodObj==e)return!0}return!1},e}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function t(){this.delay=0,this.forever=!1,this.repeatCount=0,this.exeTime=0}return t.prototype.clear=function(){this.method=null,this.methodObj=null,this.onFinish=null,this.finishObj=null,this.forever=!1},t}();__reflect(TimerHandler.prototype,"TimerHandler");var Main=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(t){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var e=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",e),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(t){console.log(t)})},e.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return t=n.sent(),this.startAnimation(t),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return e=n.sent(),console.log(e),[2]}})})},e.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var t,e;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),t=new LoadingUI,this.stage.addChild(t),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,t)];case 3:return n.sent(),this.stage.removeChild(t),[3,5];case 4:return e=n.sent(),console.error(e),[3,5];case 5:return[2]}})})},e.prototype.loadTheme=function(){var t=this;return new Promise(function(e,n){var r=new eui.Theme("resource/default.thm.json",t.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){e()},t)})},e.prototype.createGameScene=function(){StageUtils.init(),RES.getResByUrl(CFG_DIR+"config.zip",function(t){JSZip.loadAsync(t).then(function(t){return t.file("config.json").async("text")}).then(function(t){GlobalConfig.setData(JSON.parse(t)),GameApp.ins().load()})},this,RES.ResourceItem.TYPE_BIN)},e.prototype.startAnimation=function(t){},e}(eui.UILayer);__reflect(Main.prototype,"Main");var ConstConfig=function(){function t(){}return t.getJobName=function(t){return this.jobNames[t]},t.ServerListPageNum=10,t.jobNames=["0","战士","法师","道士"],t}();__reflect(ConstConfig.prototype,"ConstConfig");var Keyboard=function(){function t(){}return t.LEFT=37,t.UP=38,t.RIGHT=39,t.DOWN=40,t.KC_1=49,t.KC_2=50,t.KC_3=51,t.KC_4=52,t.KC_5=53,t.KC_6=54,t.KC_7=55,t.KC_8=56,t.KC_9=57,t.KC_0=48,t.A=65,t.B=66,t.C=67,t.D=68,t.E=69,t.F=70,t.G=71,t.H=72,t.I=73,t.J=74,t.K=75,t.L=76,t.M=77,t.N=78,t.O=79,t.P=80,t.Q=81,t.R=82,t.S=83,t.T=84,t.U=85,t.V=86,t.W=87,t.X=88,t.Y=89,t.Z=90,t.SPACE=32,t.BRACE_L=219,t.BACKSLASH=220,t.BRACE_R=221,t.BACK_QUOTE=192,t.ENTER=13,t.KC_BACKSPACE=8,t.KC_TAB=9,t.KC_ENTER=13,t.KC_SHIFT=16,t.KC_CONTROL=17,t.KC_ESCAPE=27,t.KC_SPACE=32,t.KC_WINDOWS=91,t.KC_MENU=93,t}();__reflect(Keyboard.prototype,"Keyboard");var PlatformConfig=function(){function t(){}return t}();__reflect(PlatformConfig.prototype,"PlatformConfig");var BitmapNumber=function(t){function e(){var e=t.call(this)||this;return e._imgPool=[],e._containerPool=[],e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.createNumPic=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i,o=this.getContainer(),s=t.toString(),a=0;for(a;a<s.length;a++)i=this.getSingleNumPic(s.charAt(a),e),o.addChild(i);return this.repositionNumPic(o,n,r),o},e.prototype.desstroyNumPic=function(t){this.clearContainer(t),t.parent&&t.parent.removeChild(t),this._containerPool.push(t)},e.prototype.changeNum=function(t,e,n,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var o=e.toString();if(t){if(t.numChildren>o.length)for(;t.numChildren>o.length;)this.recycleBM(t.getChildAt(t.numChildren-1));var s,a=0;for(a;a<o.length;a++)a>=t.numChildren&&t.addChild(this.getBitmap()),s=o.charAt(a),s="."==s?"dot":s,t.getChildAt(a).texture=this.getTexture(s,n);this.repositionNumPic(t,r,i)}},e.prototype.repositionNumPic=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=0);var r,i=0,o=0;for(i;i<t.numChildren;i++)r=t.getChildAt(i),r.x=o-e,o=r.x+r.width},e.prototype.clearContainer=function(t){for(;t.numChildren;)this.recycleBM(t.getChildAt(t.numChildren-1))},e.prototype.recycleBM=function(t){t&&t.parent&&(t.parent.removeChild(t),t.texture=null,this._imgPool.push(t))},e.prototype.getContainer=function(){return this._containerPool.length?this._containerPool.shift():new egret.DisplayObjectContainer},e.prototype.getSingleNumPic=function(t,e){"."==t&&(t="dot");var n=this.getBitmap();return n.texture=this.getTexture(t,e),n},e.prototype.getTexture=function(t,e){return RES.getRes(e+t+"_png")},e.prototype.getBitmap=function(){return this._imgPool.length?this._imgPool.shift():new egret.Bitmap},e}(BaseClass);__reflect(BitmapNumber.prototype,"BitmapNumber");var MovieClip=function(t){function e(){var n=t.call(this)||this;return n.rate=1,n.pixelHitTest=!1,n._mcFactory=new egret.MovieClipDataFactory,n.$hitTest=function(t,n){var r=this.$DisplayObject;if(!this.$renderNode||!this.$visible||0==r[0]||0==r[1])return null;var i=this.$getInvertedConcatenatedMatrix();if(0==i.a&&0==i.b&&0==i.c&&0==i.d)return null;var o=this.$getContentBounds(),s=i.a*t+i.c*n+i.tx,a=i.b*t+i.d*n+i.ty;if(o.contains(s,a)){if(!this.$children){var h=this.$scrollRect?this.$scrollRect:this.$maskRect;if(h&&!h.contains(s,a))return null;if(this.$mask&&!this.$mask.$hitTest(t,n))return null;if(this.pixelHitTest&&this instanceof e&&!this.hitTestPoint(t,n,!0))return null}return this}return null},n}return __extends(e,t),e.prototype.playFile=function(t,n,r,i){var o=this;if(void 0===n&&(n=1),void 0===r&&(r=null),void 0===i&&(i=!0),-1==t.indexOf("chargeff1")&&-1==t.indexOf("forceguildeff")&&-1==t.indexOf("qianghua")&&-1==t.indexOf("forgeSuccess")&&-1==t.indexOf("neigongbaozhaeff")&&-1==t.indexOf("piaodongqipaohuang")){if(this.time=egret.getTimer(),this._compFun=r,this.playCount=n,this.remove=i,TimerManager.ins().remove(this.playComp,this),this.texture&&null==this.texture.bitmapData);else if(this.name==t)return void this.createBody();this.name=t,this.texture&&e.removeDisplayObject(this,this.texture.bitmapData),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json",function(t,e){o.name+".json"==e&&t&&(o.jsonData=t,o.createBody())},this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(this.name+".png",function(t,n){o.name+".png"==n&&t&&(o.texture=t,o.stage&&e.addDisplayObject(o,o.texture.bitmapData),o.createBody())},this,RES.ResourceItem.TYPE_IMAGE)}},e.prototype.$onAddToStage=function(n,r){t.prototype.$onAddToStage.call(this,n,r),this.texture&&e.addDisplayObject(this,this.texture.bitmapData)},e.prototype.$onRemoveFromStage=function(){t.prototype.$onRemoveFromStage.call(this),this.texture&&e.removeDisplayObject(this,this.texture.bitmapData)},e.prototype.createBody=function(){if(this.jsonData&&this.texture){this._mcFactory.clearCache(),this._mcFactory.mcDataSet=this.jsonData,this._mcFactory.texture=this.texture;var t=this.name.split("/"),n=t.pop();this.movieClipData=this._mcFactory.generateMovieClipData(n),this.name in e.originalRate||(e.originalRate[this.name]=this.movieClipData.frameRate),this.frameRate=e.originalRate[this.name]*this.rate>>0;try{this.gotoAndPlay(1,this.playCount)}catch(r){debug.error("错误动画文件:",this.name)}if(this.visible=!0,this.playCount>0){var i=egret.getTimer()-this.time;i=this.playTime*this.playCount-i,i>0?TimerManager.ins().doTimer(i,1,this.playComp,this):this.playComp()}this.dispatchEventWith(egret.Event.CHANGE)}},e.prototype.playComp=function(){this.stage&&this._compFun&&this._compFun(),this.remove&&DisplayUtils.removeFromParent(this)},Object.defineProperty(e.prototype,"playTime",{get:function(){return this.movieClipData?1/this.frameRate*this.totalFrames*1e3:0},enumerable:!0,configurable:!0}),e.prototype.clearComFun=function(){this._compFun=null},e.prototype.dispose=function(){this.stop(),this.resetMovieClip(),this.clearComFun(),TimerManager.ins().removeAll(this)},e.prototype.destroy=function(){DisplayUtils.removeFromParent(this),this.dispose(),ObjectPool.push(this)},e.prototype.resetMovieClip=function(){var t=this;t.rotation=0,t.scaleX=1,t.scaleY=1,t.alpha=1,t.anchorOffsetX=0,t.anchorOffsetY=0,t.x=0,t.y=0,t.rate=1,t.$renderNode.cleanBeforeRender(),t._mcFactory.clearCache(),t._mcFactory.mcDataSet=null,t._mcFactory.texture=null,t.name=null,t.jsonData=null,t.filters=null;
var n=t.texture;n&&e.removeDisplayObject(t,n.bitmapData),t.texture=null,t.remove=!1,egret.Tween.removeTweens(t)},e.addDisplayObject=function(t,n){if(n){var r=n.hashCode;if(!e.displayList[r])return void(e.displayList[r]=[t]);var i=e.displayList[r];i.indexOf(t)<0&&i.push(t)}},e.removeDisplayObject=function(t,n){if(n){var r=n.hashCode;if(e.displayList[r]){var i=e.displayList[r],o=i.indexOf(t);o>=0&&i.splice(o,1),0==i.length&&delete e.displayList[r]}}},e.originalRate={},e.displayList=egret.createMap(),e}(egret.MovieClip);__reflect(MovieClip.prototype,"MovieClip");var RES_RESOURCE="resource/",CFG_DIR=RES_RESOURCE+"cfg/",RES_DIR=RES_RESOURCE+"res/",MP3_DIR=RES_RESOURCE+"sound/",ResPath=function(){function t(){}return t.GetUrilPath=function(t,e,n,r){return n&&(e=e.replace("_png","")),""+t+e+"."+r},t}();__reflect(ResPath.prototype,"ResPath");var UIGroup=function(){function t(){}return t.ServerList="ServerList",t.OfflineReward="OfflineReward",t.UIView2="UIView2",t.Friends="Friends",t.Vip="Vip",t.Charge="Charge",t.DailyCharge="DailyCharge",t.Peakedness="Peakedness",t.Fuli="Fuli",t.Rank="Rank",t.RRole="RRole",t.GuildMap="GuildMap",t.GuildSkill="GuildSkill",t.GuildWarMain="GuildWarMain",t.GuildWarReward="GuildWarReward",t.GuildWin="GuildWin",t.GuildBoss="GuildBoss",t.Shop="Shop",t.TreasureHunt="TreasureHunt",t.KfArena="KfArena",t.Auction="Auction",t.Limittime="Limittime",t.KFFieldWin="KFFieldWin",t.KFBoss="KFBoss",t.KFBossShow="KFBossShow",t.KFInvasion="KFInvasion",t.GodWeapon="GodWeapon",t.ActivityWin="ActivityWin",t.CityBoss="CityBoss",t.LadderWin="LadderWin",t.BtnHeji="BtnHeji",t.FbWin="FbWin",t.FbDayReward="FbDayReward",t.Richman="Richman",t.BossWin="BossWin",t.BagWin="BagWin",t.ForgeWin="ForgeWin",t.LiLianWin="LiLianWin",t.SkillWin="SkillWin",t.RoleWin="RoleWin",t.GodWingWin="GodWingWin",t.FireRingWin="FireRingWin",t.AdvanEquipWin="AdvanEquipWin",t.HeirloomWin="HeirloomWin",t.TreasureWin="TreasureWin",t.RuneWin="RuneWin",t.LyMarkSkillTipsWin="LyMarkSkillTipsWin",t.BossBlood="BossBlood",t.LadderChallengeWin="LadderChallengeWin",t.LadderResultWin="LadderResultWin",t.GuardGodWeaponUI="GuardGodWeaponUI",t.ResultWin="ResultWin",t.LimitStartTips="LimitStartTips",t.OpenRole="OpenRole",t.Sixteen="Sixteen",t.CreateRole="CreateRole",t.WelcomeWin="WelcomeWin",t.FirstRecharge="FirstRecharge",t.Activationtongyong="Activationtongyong",t.TargetWin="TargetWin",t.Vip3MWin="Vip3MWin",t.VipGiftWin="VipGiftWin",t.RingInfo="RingInfo",t.BookUpWin="BookUpWin",t.LevelUpWayWin="LevelUpWayWin",t.MineNpcHead="MineNpcHead",t.CityFun="CityFun",t.WeaponPanel="WeaponPanel",t.WeaponSoulBreak="WeaponSoulBreak",t.OSARankTips="OSARankTips",t.GuildWarUi="GuildWarUi",t.RedBagWin="RedBagWin",t.FlowerUseTips="FlowerUseTips",t.SamsaraSoul="SamsaraSoul",t.BattleWin="BattleWin",t.ShenshouForgeWin="ShenshouForgeWin",t.ShieldWin="ShieldWin",t.Collect="Collect",t.HefuXunbao="HefuXunbao",t.TransferName="TransferName",t}();__reflect(UIGroup.prototype,"UIGroup");var DebugPlatform=function(){function t(){}return t.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2,{nickName:"username"}]})})},t.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(t){return[2]})})},t}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function t(){}return t.prototype.getTheme=function(t,e,n,r){function i(t){e.call(r,t)}function o(e){e.resItem.url==t&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(r))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){e.call(r,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(t,n){window.JSONParseClass.setData(t),egret.callLater(function(){e.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(t.indexOf(".exml")>-1){var a=t.split("/");a.pop();var h=a.join("/")+"_EUI.json";generateJSON.paths[t]?egret.callLater(function(){e.call(r,generateJSON.paths[t])},this):RES.getResByUrl(h,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){e.call(r,generateJSON.paths[t])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){e.call(r,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(t,i,this,RES.ResourceItem.TYPE_TEXT)},t}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var BaseSpriteLayer=function(t){function e(){var e=t.call(this)||this;return e.touchEnabled=!1,e}return __extends(e,t),e}(egret.DisplayObjectContainer);__reflect(BaseSpriteLayer.prototype,"BaseSpriteLayer");var AssetAdapter=function(){function t(){}return t.prototype.getAsset=function(t,e,n){function r(r){e.call(n,r,t)}if(RES.hasRes(t)){var i=RES.getRes(t);i?r(i):RES.getResAsync(t,r,this)}else RES.getResByUrl(t,r,this,RES.ResourceItem.TYPE_IMAGE)},t}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var SceneManager=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.clear=function(){var t=this._currScene;t&&(t.onExit(),this._currScene=void 0)},e.prototype.runScene=function(t){if(null==t)return void debug.log("runScene:scene is null");var e=this._currScene;e&&(e.onExit(),e=void 0);var n=new t;n.onEnter(),this._currScene=n},e.prototype.getCurrScene=function(){return this._currScene},e.prototype.getSceneName=function(){return this._currScene?egret.getQualifiedClassName(this._currScene):""},e.CREATE_ROLE="CreateRoleScene",e.MAIN="MainScene",e}(BaseClass);__reflect(SceneManager.prototype,"SceneManager");var DelayOptManager=function(t){function e(){var e=t.call(this)||this;return e.TIME_THRESHOLD=2,e._delayOpts=[],egret.startTick(e.runCachedFun,e),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.addDelayOptFunction=function(t,e,n,r,i){this._delayOpts.push({fun:e,funPara:n,thisObj:t,callBack:r,para:i})},e.prototype.clear=function(){this._delayOpts.length=0},e.prototype.runCachedFun=function(t){if(0==this._delayOpts.length)return!1;for(var e,n=egret.getTimer();this._delayOpts.length&&(e=this._delayOpts.shift(),e.funPara?e.fun.call(e.thisObj,e.funPara):e.fun.call(e.thisObj),e.callBack&&(void 0!=e.para?e.callBack.call(e.thisObj,e.para):e.callBack()),!(egret.getTimer()-n>this.TIME_THRESHOLD)););return!1},e}(BaseClass);__reflect(DelayOptManager.prototype,"DelayOptManager");var SoundBg=function(t){function e(){var e=t.call(this)||this;return e._currBg="",e}return __extends(e,t),e.prototype.stop=function(){this._currSoundChannel&&this.removeSoundChannel(this._currSoundChannel),this._currSoundChannel=null,this._currSound=null,this._currBg=""},e.prototype.play=function(t){},e.prototype.touchPlay=function(){if(this._currSoundChannel&&this._currSound){var t=this._currSoundChannel.position;this.removeSoundChannel(this._currSoundChannel),this._currSoundChannel=this._currSound.play(t,1),this.addSoundChannel(this._currSoundChannel)}},e.prototype.playSound=function(t){this._currSound=t,this._currSoundChannel=this._currSound.play(0,1),this.addSoundChannel(this._currSoundChannel)},e.prototype.onSoundComplete=function(){this._currSoundChannel&&this.removeSoundChannel(this._currSoundChannel),this.playSound(this._currSound)},e.prototype.addSoundChannel=function(t){t.volume=this._volume,t.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)},e.prototype.removeSoundChannel=function(t){t.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),t.stop()},e.prototype.setVolume=function(t){this._volume=t,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},e.prototype.loadedPlay=function(t){if(this._currBg==t){var e=RES.getRes(t);if(!e)return;this.playSound(e)}},e.prototype.checkCanClear=function(t){return this._currBg!=t},e}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(t){function e(){var e=t.call(this)||this;return e._loaded=!1,e}return __extends(e,t),e.prototype.play=function(t){var e=this;this._loaded=!0,this.getSound(t,function(t){t&&(e._sound=t,e.playSound(e._sound))},this)},e.prototype.stop=function(){this._soundChannel&&this._soundChannel.stop()},e.prototype.playSound=function(t){this._soundChannel&&this._soundChannel.stop(),this._soundChannel=t.play(0,1),this._soundChannel.volume=this._volume},e.prototype.setVolume=function(t){this._volume=t},e.prototype.loadedPlay=function(t){var e=RES.getRes(t);e&&this.playSound(e)},e}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var SoundManager=function(t){function e(){var e=t.call(this)||this;return e.bgOn=!0,e.effectOn=!0,e.bgVolume=.5,e.effectVolume=.5,e.bg=new SoundBg,e.bg.setVolume(e.bgVolume),e.effect=new SoundEffects,e.effect.setVolume(e.effectVolume),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.playEffect=function(t){this.effectOn&&this.effect.play(t)},e.prototype.stopEffect=function(){this.effectOn&&this.effect.stop()},e.prototype.playBg=function(t){this.currBg=t,!this.bgOn},e.prototype.stopBg=function(){this.bg.stop()},e.prototype.touchBg=function(){egret.Capabilities.isMobile&&"iOS"==egret.Capabilities.os&&this.bg.touchPlay()},e.prototype.setEffectOn=function(t){this.effectOn=t},e.prototype.setBgOn=function(t){this.bgOn=t,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg()},e.prototype.setBgVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.bgVolume=t,this.bg.setVolume(this.bgVolume)},e.prototype.getBgVolume=function(){return this.bgVolume},e.prototype.setEffectVolume=function(t){t=Math.min(t,1),t=Math.max(t,0),this.effectVolume=t,this.effect.setVolume(this.effectVolume)},e.prototype.getEffectVolume=function(){return this.effectVolume},e.CLEAR_TIME=18e4,e}(BaseClass);__reflect(SoundManager.prototype,"SoundManager");var Algorithm=function(){function t(){}return t.sortAsc=function(t,e){return e>t?-1:t>e?1:0},t.sortAscAttr=function(e,n,r){var i;if(void 0==r)i=t.sortAsc(e,n);else{var o=e[r],s=n[r];i=s>o?-1:o>s?1:0}return i},t.sortDesc=function(t,e){return t>e?-1:e>t?1:0},t.sortDescAttr=function(e,n,r){var i;if(void 0==r)i=t.sortDesc(e,n);else{var o=e[r],s=n[r];i=o>s?-1:s>o?1:0}return i},t.binSearch=function(e,n,r){if(void 0===r&&(r=null),!e||0==e.length)return 0;r||(r=t.sortAsc);for(var i=0,o=e.length-1;o>=i;){var s=o+i>>1,a=e[s];r(a,n)<=0?i=s+1:o=s-1}return i},t.test=function(){for(var e=[],n=10,r=0;n>r;r++){var i=Math.floor(1e5*Math.random()),o=t.binSearch(e,i);e.splice(o,0,i)}e.length!=n&&debug.log("test fail!count is "+e.length+", except:"+n);for(var s=0,a=e;s<a.length;s++){var h=a[s];debug.log(h)}for(var r=0;r<e.length-1;r++)if(e[r]>e[r+1]){debug.log("test fail!index:"+r);break}},t}();__reflect(Algorithm.prototype,"Algorithm");var AverageUtils=function(){function t(t){void 0===t&&(t=10),this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=t}return t.prototype.push=function(t){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(t),this.numSum+=t,this.numsLen++},t.prototype.getValue=function(){return this.numSum/this.numsLen},t.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},t}();__reflect(AverageUtils.prototype,"AverageUtils");var Base64=function(){function t(){}return t.base64encode=function(t){var e,n,r,i,o,s;for(r=t.length,n=0,e="";r>n;){if(i=255&t.charCodeAt(n++),n==r){e+=this.base64EncodeChars.charAt(i>>2),e+=this.base64EncodeChars.charAt((3&i)<<4),e+="==";break}if(o=t.charCodeAt(n++),n==r){e+=this.base64EncodeChars.charAt(i>>2),e+=this.base64EncodeChars.charAt((3&i)<<4|(240&o)>>4),e+=this.base64EncodeChars.charAt((15&o)<<2),e+="=";break}s=t.charCodeAt(n++),e+=this.base64EncodeChars.charAt(i>>2),e+=this.base64EncodeChars.charAt((3&i)<<4|(240&o)>>4),e+=this.base64EncodeChars.charAt((15&o)<<2|(192&s)>>6),e+=this.base64EncodeChars.charAt(63&s)}return e},t.base64decode=function(t){var e,n,r,i,o,s,a;for(s=t.length,o=0,a="";s>o;){do e=this.base64DecodeChars[255&t.charCodeAt(o++)];while(s>o&&-1==e);if(-1==e)break;do n=this.base64DecodeChars[255&t.charCodeAt(o++)];while(s>o&&-1==n);if(-1==n)break;a+=String.fromCharCode(e<<2|(48&n)>>4);do{if(r=255&t.charCodeAt(o++),61==r)return a;r=this.base64DecodeChars[r]}while(s>o&&-1==r);if(-1==r)break;a+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(i=255&t.charCodeAt(o++),61==i)return a;i=this.base64DecodeChars[i]}while(s>o&&-1==i);if(-1==i)break;a+=String.fromCharCode((3&r)<<6|i)}return a},t.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],t}();__reflect(Base64.prototype,"Base64");var ColorUtil=function(){function t(){}return t.mergeARGB=function(t,e,n,r){return t<<24|e<<16|n<<8|r},t.getChannel=function(t,e){switch(e){case this.ALPHA:return t>>24&255;case this.RED:return t>>16&255;case this.GREEN:return t>>8&255;case this.BLUE:return 255&t}return 0},t.numberToString=function(t,e){return void 0===e&&(e="#"),e+t.toString(16)},t.ALPHA=4080082432,t.RED=15937822,t.GREEN=3532333,t.BLUE=255,t.NORMAL_COLOR=13746831,t.RED_COLOR_N=15937822,t.GREEN_COLOR_N=3532333,t.GRAY_COLOR2=8618883,t.WHITE_COLOR2=13746831,t.WHITE_COLOR="#D1C28F",t.RED_COLOR="#F3311E",t.GREEN_COLOR="#35E62D",t.GRAY_COLOR="#8B898B",t.COLOR_STR=["white","green","purple","orange","red","golden"],t.ROLENAME_COLOR_YELLOW=16764427,t.ROLENAME_COLOR_GREEN=3532333,t.ROLENAME_COLOR_NORMAL=3532333,t.JUEWEI_COLOR=["#e2dfd4","#35e62d","#81adff","#e27dff","#ff9649","#fc5959","#ffd93f","#ffff00"],t}();__reflect(ColorUtil.prototype,"ColorUtil");var CommonUtils=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.addLableStrokeColor=function(t,e,n){t.strokeColor=e,t.stroke=n},e.getObjectLength=function(t){var e=0;for(var n in t)e++;return e},e.getObjectByAttr=function(t,e,n){for(var r in t)if(t[r][e]==n)return t[r];return null},e.getObjectByUnionAttr=function(t,e,n){for(var r in t)if(r==e.toString())for(var i in t[r])if(i==n.toString())return t[r][i];return null},e.copyDataHandler=function(t){var e;if(t instanceof Array)e=[];else{if(!(t instanceof Object))return t;e={}}for(var n=Object.keys(t),r=0,i=n.length;i>r;r++){var o=n[r];e[o]=this.copyDataHandler(t[o])}return e},e.objectToArray=function(t){if(t instanceof Object){t=this.copyDataHandler(t);for(var e=[],n=Object.keys(t),r=0,i=n.length;i>r;r++){var o=n[r];t[o]&&e.push(t[o])}return e}return t},e.lock=function(){StageUtils.ins().getStage().touchEnabled=StageUtils.ins().getStage().touchChildren=!1},e.unlock=function(){StageUtils.ins().getStage().touchEnabled=StageUtils.ins().getStage().touchChildren=!0},e.labelIsOverLenght=function(t,e){},e}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateStyle=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.format=[],o.from=0,o.to=0,o.isFormatNum=!1,o.format=e,o.from=n,o.to=r,o.isFormatNum=i,o}return __extends(e,t),e}(BaseClass);__reflect(DateStyle.prototype,"DateStyle");var DateUtils=function(){function t(){}return t.getFormatTimeByStyle=function(e,n){if(void 0===n&&(n=t.STYLE_1),0>e&&(e=0,debug.log("输入参数有误!时间为负数:"+e)),n.from>n.to)return debug.log("输入参数有误!to参数必须大于等于from参数,请检查style参数的值"),"";e>>=0;for(var r="",i=n.to;i>=n.from;i--){var o=e/this.mul[i],s="";i!=n.to&&(o%=this.mod[i]),s=n.isFormatNum&&10>o?"0"+(o>>0).toString():(o>>0).toString(),r+=s+n.format[i]}return r},t.getFormatTimeByStyle1=function(e,n){return void 0===n&&(n=t.STYLE_1),this.getFormatTimeByStyle(e/this.MS_PER_SECOND)},t.formatMiniDateTime=function(e){return t.MINI_DATE_TIME_BASE+(2147483647&e)*t.MS_PER_SECOND},t.formatServerTime=function(e){return(e-t.MINI_DATE_TIME_BASE)/t.MS_PER_SECOND},t.getFormatBySecond=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=2);var r="",i=1e3*t;switch(e){case this.TIME_FORMAT_1:r=this.format_1(i);break;case this.TIME_FORMAT_2:r=this.format_2(i);break;case this.TIME_FORMAT_3:r=this.format_3(i);break;case this.TIME_FORMAT_4:r=this.format_4(i);break;case this.TIME_FORMAT_5:r=this.format_5(i,n);break;case this.TIME_FORMAT_6:r=this.format_6(i);break;case this.TIME_FORMAT_7:r=this.format_7(i);break;case this.TIME_FORMAT_8:r=this.format_8(i);break;case this.TIME_FORMAT_9:r=this.format_9(i);break;case this.TIME_FORMAT_10:r=this.format_10(i);break;case this.TIME_FORMAT_11:r=this.format_11(i);break;case this.TIME_FORMAT_12:r=this.format_12(i);break;case this.TIME_FORMAT_13:r=this.format_13(i);break;case this.TIME_FORMAT_14:r=this.format_14(i);break;case this.TIME_FORMAT_15:r=this.format_15(i)}return r},t.getRenainSecond=function(e){var n=e?new Date(e):new Date,r=t.getTodayZeroSecond(n)+86400-n.getTime()/1e3;return r.toFixed(0)},t.getTodayPassedSecond=function(){var t=new Date,e=((Date.now()-new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime())/1e3).toFixed(0);return parseInt(e)},t.getTodayZeroSecond=function(t){var e=t?t:new Date;return parseInt((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()/1e3).toFixed(0))},t.showWeekFirstDay=function(){var t=new Date,e=t.getDay();e=e?e:7;var n=new Date(t-864e5*(e-1));return n},t.showWeekLastDay=function(){var e=(new Date,t.showWeekFirstDay()),n=new Date(1e3*(e/1e3+518400));return n},t.calcWeekFirstDay=function(){var t=new Date,e=t.getDay();e=e>0?e:7;var n=7-e,r=t.getHours(),i=t.getMinutes(),o=t.getSeconds(),s=86400*n*1e3+864e5-(3600*r*1e3+60*i*1e3+1e3*o);return new Date(s)},t.format_1=function(e){var n=0,r="##:##:##";return n=Math.floor(e/t.MS_PER_HOUR),r=r.replace("##",t.formatTimeNum(n)),n&&(e-=n*t.MS_PER_HOUR),n=Math.floor(e/t.MS_PER_MINUTE),r=r.replace("##",t.formatTimeNum(n)),n&&(e-=n*t.MS_PER_MINUTE),n=Math.floor(e/1e3),r=r.replace("##",t.formatTimeNum(n))},t.format_2=function(t){var e=new Date(t),n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),o=e.getHours(),s=e.getMinutes(),a=e.getSeconds();return n+"-"+r+"-"+i+" "+o+":"+s+":"+a},t.format_3=function(t){var e=this.format_1(t),n=e.split(":");return n[1]+":"+n[2]},t.format_4=function(t){return t<this.MS_PER_HOUR?Math.floor(t/this.MS_PER_MINUTE)+"分钟前":t<this.MS_PER_DAY?Math.floor(t/this.MS_PER_HOUR)+"小时前":Math.floor(t/this.MS_PER_DAY)+"天前"},t.format_5=function(t,e){void 0===e&&(e=2);var n="",r=["天","时","分","秒"],i=[],o=Math.floor(t/this.MS_PER_DAY);i.push(o),t-=o*this.MS_PER_DAY;var s=Math.floor(t/this.MS_PER_HOUR);i.push(s),t-=s*this.MS_PER_HOUR;var a=Math.floor(t/this.MS_PER_MINUTE);i.push(a),t-=a*this.MS_PER_MINUTE;var h=Math.floor(t/1e3);i.push(h);for(var u in i)if(i[u]>0&&(n+=this.formatTimeNum(i[u],Number(u))+r[u],e--,0>=e))break;return n},t.format_6=function(t){var e=new Date(t),n=e.getHours(),r=e.getMinutes(),i=e.getSeconds();return this.formatTimeNum(n)+":"+this.formatTimeNum(r)+":"+this.formatTimeNum(i)},t.format_7=function(t){return t<this.MS_PER_HOUR?"<1小时":t<this.MS_PER_DAY?Math.floor(t/this.MS_PER_HOUR)+"小时":Math.floor(t/this.MS_PER_DAY)+"天"},t.format_8=function(t){var e=new Date(t),n=e.getFullYear(),r=e.getMonth()+1,i=e.getDate(),o=e.getHours(),s=e.getMinutes();return n+"-"+r+"-"+i+" "+o+":"+s},t.format_9=function(t){var e=Math.floor(t/this.MS_PER_HOUR);t-=e*this.MS_PER_HOUR;var n=Math.floor(t/this.MS_PER_MINUTE);t-=n*this.MS_PER_MINUTE;var r=Math.floor(t/1e3);return e+"小时"+n+"分钟"+r+"秒"},t.format_10=function(t){var e=Math.floor(t/this.MS_PER_MINUTE);t-=e*this.MS_PER_MINUTE;var n=Math.floor(t/1e3);return e+"分"+n+"秒"},t.format_11=function(t){var e=Math.floor(t/this.MS_PER_HOUR);t-=e*this.MS_PER_HOUR;var n=Math.floor(t/this.MS_PER_MINUTE);t-=n*this.MS_PER_MINUTE;var r=Math.floor(t/1e3);return e+"时"+n+"分"+r+"秒"},t.format_12=function(e){var n=Math.floor(e/this.MS_PER_HOUR);e-=n*this.MS_PER_HOUR;var r=Math.floor(e/this.MS_PER_MINUTE);e-=r*this.MS_PER_MINUTE;var i=Math.floor(e/1e3);return t.formatTimeNum(n)+":"+t.formatTimeNum(r)+":"+t.formatTimeNum(i)},t.format_13=function(e){var n=new Date(e),r=(n.getFullYear(),n.getMonth()+1),i=n.getDay(),o=n.getDate(),s=n.getHours(),a=n.getMinutes();return r+"月"+o+"日(周"+this.WEEK_CN[i]+") "+t.formatTimeNum(s)+":"+t.formatTimeNum(a)},t.format_14=function(t){var e=new Date(t),n=e.getHours(),r=e.getMinutes();return n+"时"+r+"分"},t.format_15=function(e){var n=new Date(e),r=n.getMonth()+1,i=n.getDate(),o=n.getHours(),s=n.getMinutes();return t.formatTimeNum(r)+"-"+t.formatTimeNum(i)+" "+t.formatTimeNum(o)+":"+t.formatTimeNum(s)},t.formatTimeNum=function(t,e){return t>=10?t.toString():0==e?t.toString():"0"+t},t.checkTime=function(t,e){var n=(new Date).getTime(),r=t>n+e*this.MS_PER_DAY;return r},t.formatFullTime=function(t){var e,n,r=new Date(t),i=r.getFullYear(),o=r.getMonth()+1,s=r.getDate(),a=r.getDay(),h=r.getHours();n=10>h?"0"+h:h.toString();var u,c=r.getMinutes();u=10>c?"0"+c:c.toString();var l;switch(a){case 1:l="Monday";break;case 2:l="Tuesday";break;case 3:l="Wednesday";break;case 4:l="Thursday";break;case 5:l="Friday";break;case 6:l="Saturday";break;case 0:l="Sunday"}return e=i+"years"+o+"month"+s+"day（"+l+"） "+n+":"+u},t.formatStrTimeToMs=function(t){var e=new Date,n=t.split(".");e.setFullYear(n[0]),e.setMonth(+n[1]-1);var r=n[2].split("-");e.setDate(r[0]);var i=r[1].split(":");return e.setHours(i[0]),e.setMinutes(i[1]),e.setSeconds(0),e.getTime()},t.TIME_FORMAT_1=1,t.TIME_FORMAT_2=2,t.TIME_FORMAT_3=3,t.TIME_FORMAT_4=4,t.TIME_FORMAT_5=5,t.TIME_FORMAT_6=6,t.TIME_FORMAT_7=7,t.TIME_FORMAT_8=8,t.TIME_FORMAT_9=9,t.TIME_FORMAT_10=10,t.TIME_FORMAT_11=11,t.TIME_FORMAT_12=12,t.TIME_FORMAT_13=13,t.TIME_FORMAT_14=14,t.TIME_FORMAT_15=15,t.MS_PER_SECOND=1e3,t.MS_PER_MINUTE=6e4,t.MS_PER_HOUR=36e5,t.MS_PER_DAY=864e5,t.SECOND_PER_HOUR=3600,t.SECOND_PER_DAY=86400,t.SECOND_PER_MONTH=2592e3,t.SECOND_PER_YEAR=31104e3,t.DAYS_PER_WEEK=7,t.YEAR_PER_YEAR=1,t.MONTH_PER_YEAR=12,t.DAYS_PER_MONTH=30,t.HOURS_PER_DAY=24,t.MUNITE_PER_HOUR=60,t.SECOND_PER_MUNITE=60,t.SECOND_PER_SECOND=1,t.SECOND_2010=1262275200,t.mod=[t.SECOND_PER_MUNITE,t.MUNITE_PER_HOUR,t.HOURS_PER_DAY,t.DAYS_PER_MONTH,t.MONTH_PER_YEAR,t.YEAR_PER_YEAR],t.mul=[t.SECOND_PER_SECOND,t.SECOND_PER_MUNITE,t.SECOND_PER_HOUR,t.SECOND_PER_DAY,t.SECOND_PER_MONTH,t.SECOND_PER_YEAR],t.MINI_DATE_TIME_BASE=Date.UTC(2010,0)+(new Date).getTimezoneOffset()*t.MS_PER_MINUTE,t.TIME_ZONE_OFFSET=8*t.MS_PER_HOUR,t.TO_SECOND=0,t.TO_MINUTE=1,t.TO_HOUR=2,t.TO_DAY=3,t.TO_MONTH=4,t.TO_YEAR=5,t.FORMAT_1=["秒","分","时","天","月","年"],t.FORMAT_2=[":",":",":",":",":",":"],t.WEEK_CN=["日","一","二","三","四","五","六"],t.STYLE_1=new DateStyle(t.FORMAT_1,t.TO_SECOND,t.TO_HOUR,!1),t.STYLE_2=new DateStyle(t.FORMAT_1,t.TO_SECOND,t.TO_DAY,!1),t.STYLE_3=new DateStyle(t.FORMAT_2,t.TO_SECOND,t.TO_HOUR,!0),t.STYLE_4=new DateStyle(t.FORMAT_1,t.TO_SECOND,t.TO_MINUTE,!0),t}();__reflect(DateUtils.prototype,"DateUtils");var DebugUtils=function(){function t(){}return Object.defineProperty(t,"isDebug",{get:function(){return!0},enumerable:!0,configurable:!0}),t.log=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.isDebug&&egret.log.apply(egret,[e].concat(n))},t.warn=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t.isDebug&&egret.warn.apply(egret,[e].concat(n))},t.error=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];egret.error.apply(egret,[t].concat(e))},t}();__reflect(DebugUtils.prototype,"DebugUtils");var debug={log:DebugUtils.log,warn:DebugUtils.warn,error:DebugUtils.error},DeviceUtils=function(){function t(){}return Object.defineProperty(t,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsFirefoxBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(t,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),t}();__reflect(DeviceUtils.prototype,"DeviceUtils");var GameLoadingUI=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.childrenCreated=function(){this.visible=!1;var t=this;setTimeout(function(){t.visible=!0},500),this.progressPane=new eui.Group,this.addChild(this.progressPane),this.height=this.progressPane.height=100,this.width=this.progressPane.width=670,this.horizontalCenter=0,this.bottom=100,this.progress=new eui.Image,this.progress.source=RES_RESOURCE+"loading/bar5.png",this.progress.anchorOffsetX=0,this.progress.x=45,this.progress.y=40,this.progressPane.addChild(this.progress),this.progressBg2=new eui.Image,this.progressBg2.source=RES_RESOURCE+"loading/bar2.png",this.progressBg2.scale9Grid=new egret.Rectangle(12,8,5,5),this.progressBg2.x=0,this.progressBg2.y=30,this.progressPane.addChild(this.progressBg2),this.progressMask=new eui.Rect(0,36,16711680),this.progressMask.width=0,this.progressMask.anchorOffsetX=0,this.progressMask.x=this.progress.x,this.progressMask.y=this.progress.y-1,this.progressPane.addChild(this.progressMask),this.progress.mask=this.progressMask,this.progressText=new eui.Label,this.progressText.height=20,this.progressText.textAlign=egret.HorizontalAlign.CENTER,this.progressText.horizontalCenter=0,this.progressText.y=this.progress.y-2,this.progressText.size=20,this.progressPane.addChild(this.progressText)},e.GetInstance=function(){return this.instance||(this.instance=new e),this.instance},e.prototype.show=function(t){t.visible=!0,t.addChild(this)},e.prototype.close=function(){this.visible=!1,this.parent&&this.parent.addChild(this),egret.Tween.removeTweens(this.progressMask)},e.prototype.setProgress=function(t,e,n){var r=560*t/100;egret.Tween.removeTweens(this.progressMask),n&&0>=n?this.progressMask.width=r:egret.Tween.get(this.progressMask).to({width:r},0),this.progressText.text=Math.floor(t)+"%",100==t&&(this.visible=!1)},e}(eui.Group);__reflect(GameLoadingUI.prototype,"GameLoadingUI");var DirUtil=function(){function t(){}return t.get8DirBy2Point=function(t,e){var n=MathUtils.getAngle(MathUtils.getRadian2(t.x,t.y,e.x,e.y));return this.angle2dir(n)},t.get4DirBy2Point=function(t,e){return t.x<e.x?t.y<e.y?3:1:t.y<e.y?5:7},t.dir2angle=function(t){return t*=45,t-=90},t.angle2dir=function(t){return-90>t&&(t+=360),Math.round((t+90)/45)%8},t.dirOpposit=function(t){return 4>t?t+4:t-4},t.get5DirBy8Dir=function(t){return t-this.isScaleX(t)},t.isScaleX=function(t){var e=2*(t-4);return 0>e&&(e=0),e},t}();__reflect(DirUtil.prototype,"DirUtil");var DisplayUtils=function(){function t(){}return t.setShakeOn=function(t){this.openShake=t},t.createBitmap=function(t){var e=new egret.Bitmap,n=RES.getRes(t);return e.texture=n,e},t.createEuiImage=function(t){var e=new eui.Image,n=RES.getRes(t);return e.source=n,e},t.removeFromParent=function(t){t&&null!=t.parent&&t.parent.removeChild(t)},t.shakeIt=function(e,n,r,i,o){if(void 0===i&&(i=1),void 0===o&&(o=function(){return!0}),this.openShake&&e&&!(1>i)&&o()){var s=[{anchorOffsetX:0,anchorOffsetY:-n},{anchorOffsetX:0,anchorOffsetY:+n},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var a=r/s.length;egret.Tween.get(e).to(s[0],a).to(s[1],a).to(s[2],a).call(function(){t.shakeIt(e,n,r,--i)},this)}},t.shakeItHeji=function(e,n,r,i,o){if(void 0===i&&(i=1),void 0===o&&(o=function(){return!0}),this.openShake&&e&&!(1>i)&&o()){var s=[{anchorOffsetX:.1*+n,anchorOffsetY:+n},{anchorOffsetX:.1*-n,anchorOffsetY:-n},{anchorOffsetX:.1*+n,anchorOffsetY:+n},{anchorOffsetX:.1*-n,anchorOffsetY:-n},{anchorOffsetX:.1*(+n>>1),anchorOffsetY:+n>>1},{anchorOffsetX:.1*(-n>>1),anchorOffsetY:-n>>1},{anchorOffsetX:.1*(+n>>2),anchorOffsetY:+n>>2},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var a=r/s.length;egret.Tween.get(e).to(s[0],a).to(s[1],a).to(s[2],a).to(s[3],a).to(s[4],a).to(s[5],a).to(s[6],a).to(s[7],a).call(function(){t.shakeIt(e,n,r,--i)},this)}},t.shakeItEntity=function(t,e,n,r,i){var o=this;if(void 0===r&&(r=1),void 0===i&&(i=function(){return!0}),this.openShake&&t&&!(1>r)&&i()){var s=[{anchorOffsetX:0,anchorOffsetY:-e},{anchorOffsetX:-e,anchorOffsetY:0},{anchorOffsetX:e,anchorOffsetY:0},{anchorOffsetX:0,anchorOffsetY:e},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var a=n/5;egret.Tween.get(t).to(s[0],a).to(s[1],a).to(s[2],a).to(s[3],a).to(s[4],a).call(function(){o.shakeIt(t,e,n,--r)},this)}},t.drawCir=function(t,e,n,r){function i(){t.graphics.clear(),t.graphics.beginFill(65535,1),t.graphics.moveTo(0,0),t.graphics.lineTo(e,0),t.graphics.drawArc(0,0,e,0,n*Math.PI/180,r),t.graphics.lineTo(0,0),t.graphics.endFill()}return null==t&&(t=new egret.Shape),i(),t},t.drawrect=function(t,e,n,r){function i(){t.graphics.clear(),t.graphics.beginFill(65535,1),t.graphics.drawRect(0,0,e,n),t.graphics.endFill()}return null==t&&(t=new egret.Shape),i(),t},t.scrollerToBottom=function(t){t.viewport.validateNow(),t.viewport.contentHeight>t.height&&(t.viewport.scrollV=t.viewport.contentHeight-t.height)},t.openShake=!0,t.shakingList={},t}();__reflect(DisplayUtils.prototype,"DisplayUtils");var FilterUtil=function(){function t(){}return Object.defineProperty(t,"grayFilter",{get:function(){return new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"grayFilter1",{get:function(){return new egret.ColorMatrixFilter([.3086,.5,.082,0,0,.3086,.5,.082,0,0,.3086,.5,.082,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY_GRAY_FILTER",{get:function(){return[t.grayFilter1]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"greenFilter",{get:function(){return new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,100,0,0,1,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"greenFilter1",{get:function(){return new egret.ColorMatrixFilter([.1,0,0,0,0,0,.80078125,0,0,20,0,0,-1,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY_GREEN_FILTER",{get:function(){return[t.greenFilter1]},enumerable:!0,configurable:!0}),Object.defineProperty(t,"blurFilter",{get:function(){return new egret.BlurFilter(10,10,2)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ARRAY_BLUR_FILTER",{get:function(){return[t.blurFilter]},enumerable:!0,configurable:!0}),t}();__reflect(FilterUtil.prototype,"FilterUtil");var GlobalFun=function(){function t(){}return t.getOption=function(t){if(window.location){var e=location.search;if(""==e)return"";e=e.slice(1);for(var n=e.split("&"),r=n.length,i=0;r>i;i++){var o=n[i],s=o.split("=");if(s[0]==t)return s[1]}}return""},t}();__reflect(GlobalFun.prototype,"GlobalFun");var KeyboardUtils=function(t){function e(){var e=t.call(this)||this;e.key_ups=new Array,e.key_downs=new Array;var n=e;
return document.addEventListener("keyup",function(t){for(var e=0,r=n.key_ups.length;r>e;e++){var i=n.key_ups[e][0],o=n.key_ups[e][1];o?i.call(o,t.keyCode):i(t.keyCode)}}),document.addEventListener("keydown",function(t){for(var e=0,r=n.key_downs.length;r>e;e++){var i=n.key_downs[e][0],o=n.key_downs[e][1];o?i.call(o,t.keyCode):i(t.keyCode)}}),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.addKeyUp=function(t,e){this.key_ups.push([t,e])},e.prototype.addKeyDown=function(t,e){this.key_downs.push([t,e])},e.prototype.removeKeyUp=function(t,e){for(var n=0;n<this.key_ups.length;n++)this.key_ups[n][0]==t&&this.key_ups[n][1]==e&&(this.key_ups.splice(n,1),n--)},e.prototype.removeKeyDown=function(t,e){for(var n=0;n<this.key_downs.length;n++)this.key_downs[n][0]==t&&this.key_downs[n][1]==e&&(this.key_downs.splice(n,1),n--)},e}(BaseClass);__reflect(KeyboardUtils.prototype,"KeyboardUtils");var KeyCode=function(){function t(){}return t.KC_1=49,t.KC_2=50,t.KC_3=51,t.KC_4=52,t.KC_5=53,t.KC_6=54,t.KC_7=55,t.KC_8=56,t.KC_9=57,t.KC_0=48,t.KC_A=65,t.KC_B=66,t.KC_C=67,t.KC_D=68,t.KC_E=69,t.KC_F=70,t.KC_G=71,t.KC_H=72,t.KC_I=73,t.KC_J=74,t.KC_K=75,t.KC_L=76,t.KC_M=77,t.KC_N=78,t.KC_O=79,t.KC_P=80,t.KC_Q=81,t.KC_R=82,t.KC_S=83,t.KC_T=84,t.KC_U=85,t.KC_V=86,t.KC_W=87,t.KC_X=88,t.KC_Y=89,t.KC_Z=90,t.KC_F1=112,t.KC_F2=113,t.KC_F3=114,t.KC_F4=115,t.KC_F5=116,t.KC_F6=117,t.KC_F7=118,t.KC_F8=119,t.KC_F9=120,t.KC_F10=121,t.KC_F11=122,t.KC_F12=123,t.KC_F13=124,t.KC_F14=125,t.KC_F15=126,t.KC_NUMPAD_0=96,t.KC_NUMPAD_1=97,t.KC_NUMPAD_2=98,t.KC_NUMPAD_3=99,t.KC_NUMPAD_4=100,t.KC_NUMPAD_5=101,t.KC_NUMPAD_6=102,t.KC_NUMPAD_7=103,t.KC_NUMPAD_8=104,t.KC_NUMPAD_9=105,t.KC_NUMPAD_MULTIPLY=106,t.KC_NUMPAD_ADD=107,t.KC_NUMPAD_ENTER=108,t.KC_NUMPAD_SUBTRACT=109,t.KC_NUMPAD_DECIMAL=110,t.KC_NUMPAD_DIVIDE=111,t.KC_BACKSPACE=8,t.KC_TAB=9,t.KC_ENTER=13,t.KC_SHIFT=16,t.KC_CONTROL=17,t.KC_ESCAPE=27,t.KC_SPACE=32,t.KC_WINDOWS=91,t.KC_MENU=93,t.KC_CAPS_LOCK=20,t.KC_NUM_LOCK=144,t.KC_SCROLL_LOCK=145,t.KC_PAUSE=19,t.KC_PAGE_UP=33,t.KC_PAGE_DOWN=34,t.KC_END=35,t.KC_HOME=36,t.KC_INSERT=45,t.KC_DELETE=46,t.KC_LEFT=37,t.KC_UP=38,t.KC_RIGHT=39,t.KC_DOWN=40,t.KC_SEMICOLON_COLON=186,t.KC_EQUAL_PLUS=187,t.KC_MINUS_UNDERLINE=189,t.KC_SLASH_QUESTIONMARK=191,t.KC_SPECIALCOMMA_EARTHWORM=192,t.KC_LEFT_BRACKET_BRACE=219,t.KC_BACKSLASH_VERTICALBAR=220,t.KC_RIGHT_BRACKET_BRACE=221,t.KC_QUOTE=222,t.KC_COMMA=188,t.KC_PERIOD=190,t}();__reflect(KeyCode.prototype,"KeyCode");var MathUtils=function(){function t(){}return t.getAngle=function(t){return 180*t/Math.PI},t.getRadian=function(t){return t/180*Math.PI},t.getRadian2=function(t,e,n,r){var i=n-t,o=r-e;return Math.atan2(o,i)},t.getDistance=function(t,e,n,r){var i=n-t,o=r-e,s=i*i+o*o;return Math.sqrt(s)},t.getDistanceByObject=function(t,e){return this.getDistance(t.x,t.y,e.x,e.y)},t.getDistanceX2ByObject=function(t,e){var n=t.x-e.x,r=t.y-e.y;return n*n+r*r},t.getDirMove=function(t,e,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=this.getRadian(t),o={x:0,y:0};return o.x=Math.cos(i)*e+n,o.y=Math.sin(i)*e+r,o},t.limit=function(t,e){t=Math.min(t,e),e=Math.max(t,e);var n=e-t;return t+Math.random()*n},t.limitInteger=function(t,e){return Math.round(this.limit(t,e))},t.randomArray=function(t){var e=Math.floor(Math.random()*t.length);return t[e]},t.toInteger=function(t){return t>>0},t}();__reflect(MathUtils.prototype,"MathUtils");var md5=function(){function t(){}return t.obj_md5=function(t,e,n,r){void 0===n&&(n=[]),void 0===r&&(r=!0);var i=[];for(var o in t)i.push(o);r&&i.sort();for(var s=[],a=0;a<i.length;a++){var o=i[a];-1==n.indexOf(o)&&s.push(o+"="+t[o])}var h=s.join("&");return this.hex_md5(h+(e?"&"+e:""))},t.obj_md5_args=function(t,e,n,r,i){void 0===r&&(r=[]),void 0===i&&(i=!0);var o=[];for(var s in t)o.push(s);i&&o.sort();for(var a=[],h=0;h<o.length;h++){var s=o[h];-1==r.indexOf(s)&&a.push(s+"="+t[s])}var u=a.join("&");n&&(u+="&sign="+this.hex_md5(u+(e?"&"+e:"")));for(var h=0;h<r.length;h++){var c=r[h];u+="&"+c+"="+t[c]}return u},t.hex_md5=function(t){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(t)))},t.b64_md5=function(t){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(t)))},t.any_md5=function(t,e){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(t)),e)},t.hex_hmac_md5=function(t,e){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.b64_hmac_md5=function(t,e){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)))},t.any_hmac_md5=function(t,e,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(t),this.str2rstr_utf8(e)),n)},t.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},t.rstr_md5=function(t){return this.binl2rstr(this.binl_md5(this.rstr2binl(t),8*t.length))},t.rstr_hmac_md5=function(t,e){var n=this.rstr2binl(t);n.length>16&&(n=this.binl_md5(n,8*t.length));for(var r=Array(16),i=Array(16),o=0;16>o;o++)r[o]=909522486^n[o],i[o]=1549556828^n[o];var s=this.binl_md5(r.concat(this.rstr2binl(e)),512+8*e.length);return this.binl2rstr(this.binl_md5(i.concat(s),640))},t.rstr2hex=function(t){try{this.hexcase}catch(e){this.hexcase=0}for(var n,r=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<t.length;o++)n=t.charCodeAt(o),i+=r.charAt(n>>>4&15)+r.charAt(15&n);return i},t.rstr2b64=function(t){try{this.b64pad}catch(e){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i=t.length,o=0;i>o;o+=3)for(var s=t.charCodeAt(o)<<16|(i>o+1?t.charCodeAt(o+1)<<8:0)|(i>o+2?t.charCodeAt(o+2):0),a=0;4>a;a++)r+=8*o+6*a>8*t.length?this.b64pad:n.charAt(s>>>6*(3-a)&63);return r},t.rstr2any=function(t,e){var n,r,i,o,s,a=e.length,h=Array(Math.ceil(t.length/2));for(n=0;n<h.length;n++)h[n]=t.charCodeAt(2*n)<<8|t.charCodeAt(2*n+1);var u=Math.ceil(8*t.length/(Math.log(e.length)/Math.log(2))),c=Array(u);for(r=0;u>r;r++){for(s=Array(),o=0,n=0;n<h.length;n++)o=(o<<16)+h[n],i=Math.floor(o/a),o-=i*a,(s.length>0||i>0)&&(s[s.length]=i);c[r]=o,h=s}var l="";for(n=c.length-1;n>=0;n--)l+=e.charAt(c[n]);return l},t.str2rstr_utf8=function(t){for(var e,n,r="",i=-1;++i<t.length;)e=t.charCodeAt(i),n=i+1<t.length?t.charCodeAt(i+1):0,e>=55296&&56319>=e&&n>=56320&&57343>=n&&(e=65536+((1023&e)<<10)+(1023&n),i++),127>=e?r+=String.fromCharCode(e):2047>=e?r+=String.fromCharCode(192|e>>>6&31,128|63&e):65535>=e?r+=String.fromCharCode(224|e>>>12&15,128|e>>>6&63,128|63&e):2097151>=e&&(r+=String.fromCharCode(240|e>>>18&7,128|e>>>12&63,128|e>>>6&63,128|63&e));return r},t.str2rstr_utf16le=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(255&t.charCodeAt(n),t.charCodeAt(n)>>>8&255);return e},t.str2rstr_utf16be=function(t){for(var e="",n=0;n<t.length;n++)e+=String.fromCharCode(t.charCodeAt(n)>>>8&255,255&t.charCodeAt(n));return e},t.rstr2binl=function(t){for(var e=Array(t.length>>2),n=0;n<e.length;n++)e[n]=0;for(var n=0;n<8*t.length;n+=8)e[n>>5]|=(255&t.charCodeAt(n/8))<<n%32;return e},t.binl2rstr=function(t){for(var e="",n=0;n<32*t.length;n+=8)e+=String.fromCharCode(t[n>>5]>>>n%32&255);return e},t.binl_md5=function(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<t.length;s+=16){var a=n,h=r,u=i,c=o;n=this.md5_ff(n,r,i,o,t[s+0],7,-680876936),o=this.md5_ff(o,n,r,i,t[s+1],12,-389564586),i=this.md5_ff(i,o,n,r,t[s+2],17,606105819),r=this.md5_ff(r,i,o,n,t[s+3],22,-1044525330),n=this.md5_ff(n,r,i,o,t[s+4],7,-176418897),o=this.md5_ff(o,n,r,i,t[s+5],12,1200080426),i=this.md5_ff(i,o,n,r,t[s+6],17,-1473231341),r=this.md5_ff(r,i,o,n,t[s+7],22,-45705983),n=this.md5_ff(n,r,i,o,t[s+8],7,1770035416),o=this.md5_ff(o,n,r,i,t[s+9],12,-1958414417),i=this.md5_ff(i,o,n,r,t[s+10],17,-42063),r=this.md5_ff(r,i,o,n,t[s+11],22,-1990404162),n=this.md5_ff(n,r,i,o,t[s+12],7,1804603682),o=this.md5_ff(o,n,r,i,t[s+13],12,-40341101),i=this.md5_ff(i,o,n,r,t[s+14],17,-1502002290),r=this.md5_ff(r,i,o,n,t[s+15],22,1236535329),n=this.md5_gg(n,r,i,o,t[s+1],5,-165796510),o=this.md5_gg(o,n,r,i,t[s+6],9,-1069501632),i=this.md5_gg(i,o,n,r,t[s+11],14,643717713),r=this.md5_gg(r,i,o,n,t[s+0],20,-373897302),n=this.md5_gg(n,r,i,o,t[s+5],5,-701558691),o=this.md5_gg(o,n,r,i,t[s+10],9,38016083),i=this.md5_gg(i,o,n,r,t[s+15],14,-660478335),r=this.md5_gg(r,i,o,n,t[s+4],20,-405537848),n=this.md5_gg(n,r,i,o,t[s+9],5,568446438),o=this.md5_gg(o,n,r,i,t[s+14],9,-1019803690),i=this.md5_gg(i,o,n,r,t[s+3],14,-187363961),r=this.md5_gg(r,i,o,n,t[s+8],20,1163531501),n=this.md5_gg(n,r,i,o,t[s+13],5,-1444681467),o=this.md5_gg(o,n,r,i,t[s+2],9,-51403784),i=this.md5_gg(i,o,n,r,t[s+7],14,1735328473),r=this.md5_gg(r,i,o,n,t[s+12],20,-1926607734),n=this.md5_hh(n,r,i,o,t[s+5],4,-378558),o=this.md5_hh(o,n,r,i,t[s+8],11,-2022574463),i=this.md5_hh(i,o,n,r,t[s+11],16,1839030562),r=this.md5_hh(r,i,o,n,t[s+14],23,-35309556),n=this.md5_hh(n,r,i,o,t[s+1],4,-1530992060),o=this.md5_hh(o,n,r,i,t[s+4],11,1272893353),i=this.md5_hh(i,o,n,r,t[s+7],16,-155497632),r=this.md5_hh(r,i,o,n,t[s+10],23,-1094730640),n=this.md5_hh(n,r,i,o,t[s+13],4,681279174),o=this.md5_hh(o,n,r,i,t[s+0],11,-358537222),i=this.md5_hh(i,o,n,r,t[s+3],16,-722521979),r=this.md5_hh(r,i,o,n,t[s+6],23,76029189),n=this.md5_hh(n,r,i,o,t[s+9],4,-640364487),o=this.md5_hh(o,n,r,i,t[s+12],11,-421815835),i=this.md5_hh(i,o,n,r,t[s+15],16,530742520),r=this.md5_hh(r,i,o,n,t[s+2],23,-995338651),n=this.md5_ii(n,r,i,o,t[s+0],6,-198630844),o=this.md5_ii(o,n,r,i,t[s+7],10,1126891415),i=this.md5_ii(i,o,n,r,t[s+14],15,-1416354905),r=this.md5_ii(r,i,o,n,t[s+5],21,-57434055),n=this.md5_ii(n,r,i,o,t[s+12],6,1700485571),o=this.md5_ii(o,n,r,i,t[s+3],10,-1894986606),i=this.md5_ii(i,o,n,r,t[s+10],15,-1051523),r=this.md5_ii(r,i,o,n,t[s+1],21,-2054922799),n=this.md5_ii(n,r,i,o,t[s+8],6,1873313359),o=this.md5_ii(o,n,r,i,t[s+15],10,-30611744),i=this.md5_ii(i,o,n,r,t[s+6],15,-1560198380),r=this.md5_ii(r,i,o,n,t[s+13],21,1309151649),n=this.md5_ii(n,r,i,o,t[s+4],6,-145523070),o=this.md5_ii(o,n,r,i,t[s+11],10,-1120210379),i=this.md5_ii(i,o,n,r,t[s+2],15,718787259),r=this.md5_ii(r,i,o,n,t[s+9],21,-343485551),n=this.safe_add(n,a),r=this.safe_add(r,h),i=this.safe_add(i,u),o=this.safe_add(o,c)}return[n,r,i,o]},t.md5_cmn=function(t,e,n,r,i,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(e,t),this.safe_add(r,o)),i),n)},t.md5_ff=function(t,e,n,r,i,o,s){return this.md5_cmn(e&n|~e&r,t,e,i,o,s)},t.md5_gg=function(t,e,n,r,i,o,s){return this.md5_cmn(e&r|n&~r,t,e,i,o,s)},t.md5_hh=function(t,e,n,r,i,o,s){return this.md5_cmn(e^n^r,t,e,i,o,s)},t.md5_ii=function(t,e,n,r,i,o,s){return this.md5_cmn(n^(e|~r),t,e,i,o,s)},t.safe_add=function(t,e){var n=(65535&t)+(65535&e),r=(t>>16)+(e>>16)+(n>>16);return r<<16|65535&n},t.bit_rol=function(t,e){return t<<e|t>>>32-e},t.hexcase=0,t.b64pad="",t}();__reflect(md5.prototype,"md5");var PageArray=function(){function t(t,e){void 0===e&&(e=20),this.dataSource=t,this.size=e,this.currentPage=0,this.setPageData()}return Object.defineProperty(t.prototype,"length",{get:function(){return this.dataSource.length},enumerable:!0,configurable:!0}),t.prototype.setPageData=function(){this.pageData=[];for(var t=this.currentPage*this.size,e=(this.currentPage+1)*this.size,n=Math.min(this.length,e),r=t;n>r;r++)this.pageData.push(this.dataSource[r])},t.prototype.getDataSource=function(){return this.dataSource},Object.defineProperty(t.prototype,"totalPage",{get:function(){return Math.ceil(this.length/this.size)},enumerable:!0,configurable:!0}),t.prototype.havePre=function(){return 0!=this.currentPage},t.prototype.haveNext=function(){return this.currentPage<this.totalPage-1},t.prototype.prev=function(){this.currentPage--,this.setPageData()},t.prototype.next=function(){this.currentPage++,this.setPageData()},t.prototype.first=function(){this.currentPage=0,this.setPageData()},t.prototype.last=function(){this.currentPage=this.totalPage-1,this.setPageData()},t.prototype.gotoPage=function(t){this.totalPage<t||(this.currentPage=t-1,this.setPageData())},t}();__reflect(PageArray.prototype,"PageArray");var RegExpUtil=function(){function t(){}return t.LINE_BREAK=/\r+/g,t.BLANK_REG=/[\s\\]/g,t.ARGB_COLOR=/[a-fA-F0-9]{8}/,t.HTML=/<[^>]+>/g,t.DELETE_SPACE=/\s/g,t.REPLACE_STRING=/%s/g,t.NumericExp=/^\d+$/,t.NonNumericExp=/\D/,t.ActorNameExp=/^([\u4e00-\u9fa5]?\w?[^>|!@#$%&*\^\?]){1,48}$/,t}();__reflect(RegExpUtil.prototype,"RegExpUtil");var ResourceUtils=function(t){function e(){var e=t.call(this)||this;return e._groupIndex=0,e._configs=new Array,e._groups={},e._urlResorce={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,e.onResourceLoadComplete,e),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,e.onResourceLoadProgress,e),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,e.onResourceLoadError,e),e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.addConfig=function(t,e){this._configs.push([t,e])},e.prototype.loadConfig=function(t,e){this._onConfigComplete=t,this._onConfigCompleteTarget=e,this.loadNextConfig()},e.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var t=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(t[0],t[1])},e.prototype.onConfigCompleteHandle=function(t){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},e.prototype.loadGroup=function(t,e,n,r){this._groups[t]=[e,n,r],RES.loadGroup(t)},e.prototype.loadUIGroup=function(t){RES.loadGroup(t)},e.prototype.loadGroups=function(t,e,n,r,i){RES.createGroup(t,e,!0),this.loadGroup(t,n,r,i)},e.prototype.pilfererLoadGroup=function(t,e){void 0===e&&(e=null);var n="pilferer_"+t;e||(e=[t]),RES.createGroup(n,e,!0),RES.loadGroup(n,-1)},e.prototype.onResourceLoadComplete=function(t){var e=t.groupName;if(this._groups[e]){var n=this._groups[e][0],r=this._groups[e][2];null!=n&&n.call(r),this._groups[e]=null,delete this._groups[e]}},e.prototype.onResourceLoadProgress=function(t){var e=t.groupName;if(this._groups[e]){var n=this._groups[e][1],r=this._groups[e][2];null!=n&&n.call(r,t.itemsLoaded,t.itemsTotal)}},e.prototype.onResourceLoadError=function(t){return debug.log(t.groupName+"资源组有资源加载失败"),"preload"==t.groupName?(GameApp.ins().preload_load_count+=1,1==GameApp.ins().preload_load_count&&Assert(!1,t.groupName+" 资源加载失败!!失败次数："+GameApp.ins().preload_load_count),void(GameApp.ins().preload_load_count<3?RES.loadGroup(t.groupName):alert("资源加载失败，请检查网络重新登录"))):void this.onResourceLoadComplete(t)},e.prototype.loadResource=function(t,e,n,r,i){void 0===t&&(t=[]),void 0===e&&(e=[]),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null);var o=t.concat(e),s="loadGroup"+this._groupIndex++;RES.createGroup(s,o,!0),this._groups[s]=[n,r,i],RES.loadGroup(s)},e.prototype.loadUrlResource=function(t,e,n,r){var i=this;null==this._urlResorce[t]?(this._urlResorce[t]={data:null,compFun:n,thisObj:r},RES.getResByUrl(t,function(e){i._urlResorce[t].data=e,null!=n&&n.apply(i._urlResorce[t].thisObj)},this,e)):null!=n&&n.apply(r)},e.prototype.getUrlResource=function(t){return null==this._urlResorce[t]?(debug.log("资源未加载"),null):this._urlResorce[t].data},e}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var StageUtils=function(t){function e(){var n=t.call(this)||this;return null==e._uiStage&&(e._uiStage=new eui.UILayer,e._uiStage.touchEnabled=!1,e._uiStage.percentHeight=100,e._uiStage.percentWidth=100,n.getStage().addChild(e._uiStage)),n}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.getHeight=function(){return this.getStage().stageHeight},e.prototype.getWidth=function(){return this.getStage().stageWidth},e.prototype.setTouchChildren=function(t){this.getStage().touchChildren=t},e.prototype.setMaxTouches=function(t){this.getStage().maxTouches=t},e.prototype.setFrameRate=function(t){this.getStage().frameRate=t},e.prototype.setScaleMode=function(t){this.getStage().scaleMode=t},e.prototype.getStage=function(){return egret.MainContext.instance.stage},e.prototype.getUIStage=function(){return e._uiStage},e.getScaleMode=function(){if(e.isIphoneX())return egret.StageScaleMode.FIXED_WIDTH;var t=window.innerHeight/window.innerWidth,n=1.4,r=1.8,i="";return n>=t?i=egret.StageScaleMode.FIXED_HEIGHT:t>n&&r>t&&(i=egret.StageScaleMode.FIXED_WIDTH),i},e.isIphoneX=function(){return 812==window.innerHeight&&375==window.innerWidth},e.init=function(){this.changeStageSize(),window.addEventListener("resize",this.changeStageSize)},e.changeStageSize=function(){var t=this;egret.setTimeout(function(){var n=e.getScaleMode();t.lastOrientation!=window.orientation&&(document.body.style.height="100%",t.lastOrientation=window.orientation),e.ins().getStage().scaleMode=n},this,500)},e}(BaseClass);__reflect(StageUtils.prototype,"StageUtils");var StringUtils=function(){function t(){}return t.trimSpace=function(t){return t.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},t.getStringLength=function(t){for(var e=t.split(""),n=0,r=0;r<e.length;r++){var i=e[r];n+=this.isChinese(i)?2:1}return n},t.isChinese=function(t){var e=/^[\u4E00-\u9FA5]+$/;return e.test(t)?!1:!0},t.strByteLen=function(t){for(var e=0,n=t.length,r=0;n>r;r++)e+=t.charCodeAt(r)>=127?2:1;return e},t.complementByChar=function(e,n,r,i){void 0===r&&(r=" "),void 0===i&&(i=!0);var o=this.strByteLen(i?e.replace(t.HTML,""):e);return e+this.repeatStr(r,n-o)},t.repeatStr=function(t,e){for(var n="",r=0;e>r;r++)n+=t;return n},t.addColor=function(t,e){var n;return"string"==typeof e?n=String(e):"number"==typeof e&&(n=Number(e).toString(10)),'<font color="'+n+'">'+t+"</font>"},t.addColor1=function(t,e){var n=new Object;return n.style=new Object,n.text=t,n.textColor=Number(e).toString(16),n},t.substitute=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=RegExpUtil.REPLACE_STRING,i=t.match(r);if(i&&i.length)for(var o=i.length,s=0;o>s;s++)t=t.replace(i[s],e[s]);return t},t.replaceStr=function(t,e,n){if(-1==t.indexOf(e))return t;var r=t.split(e);return r[0]+n+r[1]},t.replaceStrColor=function(t,e){for(var n=t.indexOf("0x"),r=n,i="",o="";-1!=r;)i=t.substring(n,n+8),t=t.replace(i,e),n+=8,o=t.substring(n),r=o.indexOf("0x"),n+=r;return t},t.replace=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0;r<e.length;r++)t=t.replace("%s",e[r]+"");return t},t.getStrByRegExp=function(t,e){void 0===e&&(e=/\d+/g);var n=[];t.replace(e,function(){return n.push(arguments[0]),"number"==typeof arguments[0]?arguments[0].toString():arguments[0]});return n},t.ChineseToNumber=function(e){for(var n=0,r=0,i=0,o=!1,s=e.split(""),a=0;a<s.length;a++){var h=t.chnNumCharCN[s[a]];if("undefined"!=typeof h)i=h,a===s.length-1&&(r+=i);else{var u=t.chnNameValueCN[s[a]].value;o=t.chnNameValueCN[s[a]].secUnit,o?(r=(r+i)*u,n+=r,r=0):r+=i*u,i=0}}return n+r},t.NumberToChinese=function(e){var n=0,r="",i="",o=!1,s=t.chnNumChar,a=t.chnUnitSection;if(0===e)return s[0];for(;e>0;){var h=e%1e4;o&&(i=s[0]+i),r=t.SectionToChinese(h),r+=0!==h?a[n]:a[0],i=r+i,o=1e3>h&&h>0,e=Math.floor(e/1e4),n++}return i},t.SectionToChinese=function(e){for(var n="",r="",i=0,o=!0,s=t.chnNumChar,a=t.chnUnitChar;e>0;){var h=e%10;0===h?o||(o=!0,r=s[h]+r):(o=!1,n=s[h],n+=a[i],r=n+r),i++,e=Math.floor(e/10)}return r},t.HTML=/<[^>]+>/g,t.chnNumCharCN={"零":0,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9},t.chnNameValueCN={"十":{value:10,secUnit:!1},"百":{value:100,secUnit:!1},"千":{value:1e3,secUnit:!1},"万":{value:1e4,secUnit:!0},"亿":{value:1e8,secUnit:!0}},t.chnNumChar=["零","一","二","三","四","五","六","七","八","九"],t.chnUnitSection=["","万","亿","万亿","亿亿"],t.chnUnitChar=["","十","百","千"],t}();__reflect(StringUtils.prototype,"StringUtils");var TextFlowMaker=function(){function t(){}return t.generateTextFlow=function(e){if(!e)return(new egret.HtmlTextParser).parser("");for(var n,r=e.split("|"),i="",o=0,s=r.length;s>o;o++)i+=t.getSingleTextFlow1(r[o]);try{n=(new egret.HtmlTextParser).parser(i)}catch(a){return debug.log("错误的HTML输入"),(new egret.HtmlTextParser).parser("")}return n},t.generateTextFlow1=function(e){if(!e)return(new egret.HtmlTextParser).parser("");for(var n=e.split("|"),r=[],i=0,o=n.length;o>i;i++){var s=t.getSingleTextFlow(n[i]);s.text&&""!=s.text&&r.push(s)}return r},t.getOnlyName=function(t){if(!t)return"";var e=t.indexOf("<font"),n=t;return-1!=e&&(n=t.slice(0,e)),n},t.getSingleTextFlow1=function(e){var n=e.split("&T:",2);if(2==n.length){for(var r="<font",i=n[0].split("&"),o=void 0,s=!1,a=0,h=i.length;h>a;a++)switch(o=i[a].split(":"),o[0]){case t.STYLE_SIZE:r+=' size="'+Math.floor(+o[1])+'"';break;case t.STYLE_COLOR:r+=' color="'+Math.floor(+o[1])+'"';break;case t.UNDERLINE_TEXT:s=!0}return r+=s?"><u>"+n[1]+"</u></font>":">"+n[1]+"</font>"}return"<font>"+e+"</font>"},t.getSingleTextFlow=function(e){var n=e.split("&T:",2),r={style:{}};if(2==n.length){for(var i=(n[0],e.split("&")),o=void 0,s=0,a=i.length;a>s;s++)switch(o=i[s].split(":"),o[0]){case t.STYLE_SIZE:r.style.size=+o[1];break;case t.STYLE_COLOR:r.style.textColor=+o[1];break;case t.UNDERLINE_TEXT:r.style.underline=!0;break;case t.EVENT:r.style.href="event:"+o[1]}r.text=n[1]}else r.text=e;return r},t.getCStr=function(e){return t.numberList[e]?t.numberList[e]:""},t.STYLE_COLOR="C",t.STYLE_SIZE="S",t.PROP_TEXT="T",t.UNDERLINE_TEXT="U",t.EVENT="E",t.numberList=["Zero","One","Two","Three","Fout","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen","Twenty"],t}();__reflect(TextFlowMaker.prototype,"TextFlowMaker");var uint64=function(){function t(t){this._lowUint=0,this._highUint=0,this.value=t}return t.prototype.isEqual=function(t){return t?this._lowUint==t._lowUint&&this._highUint==t._highUint:!1},t.prototype.isGreaterThan=function(e){if(e instanceof t)return this._highUint>e._highUint||this._highUint==e._highUint&&this._lowUint>e._lowUint;var n=new t;return"string"==typeof e?(n.value=e,this.isGreaterThanOrEqual(n)):"number"==typeof e?(n.value=e.toString(),this.isGreaterThanOrEqual(n)):void 0},t.prototype.isGreaterThanOrEqual=function(e){if(e instanceof t)return this._highUint>e._highUint||this._highUint==e._highUint&&this._lowUint>=e._lowUint;var n=new t;return"string"==typeof e?(n.value=e,this.isGreaterThanOrEqual(n)):"number"==typeof e?(n.value=e.toString(),this.isGreaterThanOrEqual(n)):void 0},Object.defineProperty(t.prototype,"isZero",{get:function(){return 0==this._lowUint&&0==this._highUint},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isGreaterThanZero",{get:function(){return this._lowUint>0||this._highUint>0},enumerable:!0,configurable:!0}),t.prototype.writeByte=function(t){t.writeUnsignedInt(this._lowUint),t.writeUnsignedInt(this._highUint)},t.prototype.setValue=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this._lowUint=t,this._highUint=e},Object.defineProperty(t.prototype,"value",{set:function(e){e instanceof egret.ByteArray?(this._lowUint=e.readUnsignedInt(),this._highUint=e.readUnsignedInt()):"string"==typeof e&&t.stringToUint64(e,10,this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"valueByString",{set:function(t){},enumerable:!0,configurable:!0}),t.prototype.leftMove=function(e,n){void 0===n&&(n=null),n=n||this;var r=t.LeftMoveMask[e],i=r&this._lowUint;i>>>=32-e,n._lowUint=this._lowUint<<e,n._highUint=this._highUint<<e,n._highUint=n._highUint|i},t.prototype.add=function(e,n){void 0===n&&(n=null),n=n||this;var r=this._lowUint+e._lowUint;n._highUint=this._highUint+e._highUint,r>=t.MaxLowUint?(n._highUint++,n._lowUint=r-t.MaxLowUint):n._lowUint=r},t.prototype.subtraction=function(e,n){void 0===n&&(n=null),n=n||this;var r=this._lowUint-e._lowUint;n._highUint=this._highUint-e._highUint,0>r?(n._highUint--,n._lowUint=r+t.MaxLowUint):n._lowUint=r},t.prototype.scale=function(e,n){void 0===n&&(n=null),n=n||this;var r=this._lowUint*e;n._highUint=this._highUint*e,n._highUint+=Math.floor(Math.abs(r/t.MaxLowUint)),n._lowUint=r%t.MaxLowUint},t.prototype.toString=function(e){void 0===e&&(e=10);for(var n,r,i,o="",s=this._lowUint,a=this._highUint;0!=a||0!=s;)n=a%e,i=n*t.MaxLowUint+s,r=i%e,o=r+o,a=(a-n)/e,s=(i-r)/e;return o.length?o:"0"},t.stringToUint64=function(e,n,r){void 0===n&&(n=10),void 0===r&&(r=null),r=r||new t;for(var i,o,s=0,a=0,h=e.length,u=0;h>u;u++)o=parseInt(e.charAt(u)),i=s*n+o,a=a*n+Math.floor(i/t.MaxLowUint),s=i%t.MaxLowUint;return r.setValue(s,a),r},t.LeftMoveMask=[0,2147483648,1073741824,536870912,268435456,134217728,67108864,33554432,16777216,8388608,4194304,2097152,1048576,524288,262144,131072,65536,32768,16384,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1],t.MaxLowUint=4294967296,t}();__reflect(uint64.prototype,"uint64");var WatcherUtil=function(){function t(){}return t.removeFromArrayCollection=function(e){e&&e.source&&e.source.length&&t.removeFromArray(e.source)},t.removeFromArray=function(e){if(e)for(var n=0,r=e;n<r.length;n++){var i=r[n];t.removeFromObject(i)}},t.removeFromObject=function(t){if(t instanceof egret.EventDispatcher){var e=t.$getEventMap(),n=e[eui.PropertyEvent.PROPERTY_CHANGE];if(n)for(var r=n.length-1;r>=0;r--){var i=n[r];i.thisObject instanceof eui.Watcher&&(i.thisObject.unwatch(),n.splice(r,1))}}else{var o=t.__listeners__;if(o&&o.length)for(var s=0;s<o.length;s+=2){var a=o[s+1];a instanceof eui.Watcher&&(a.unwatch(),s-=2)}}},t}();__reflect(WatcherUtil.prototype,"WatcherUtil");var BaseComponent=function(t){function e(){var e=t.call(this)||this;return e.className="@策划@使用此组件必须填写逻辑类名",e}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},Object.defineProperty(e.prototype,"data",{get:function(){return this._data},set:function(t){this._data=t,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged&&this.dataChanged()},enumerable:!0,configurable:!0}),e.filterKeys=["data"],e.copyKeys=["open","close"],e}(BaseView);__reflect(BaseComponent.prototype,"BaseComponent");var FrameTick=function(){function t(){this.list=[]}return t.prototype.tick=function(t){this.list[t]=TimerManager.ins().getFrameId()},t.prototype.isTick=function(t){return this.list[t]==TimerManager.ins().getFrameId()},t.prototype.checkAndTick=function(t){return this.isTick(t)?!0:(this.tick(t),!1)},t}();__reflect(FrameTick.prototype,"FrameTick");var LoadingUI=function(t){function e(){var e=t.call(this)||this;return e.createView(),e}return __extends(e,t),e.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},e.prototype.onProgress=function(t,e){this.textField.text="Loading..."+t+"/"+e},e}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var BaseSpriteView=function(t){function e(e){var n=t.call(this)||this;return n._resources=null,n._myParent=e,n._isInit=!1,StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,n.onResize,n),n}return __extends(e,t),e.prototype.setResources=function(t){this._resources=t},Object.defineProperty(e.prototype,"myParent",{get:function(){return this._myParent},enumerable:!0,configurable:!0}),e.prototype.isInit=function(){return this._isInit},e.prototype.isShow=function(){return null!=this.stage&&this.visible},e.prototype.addToParent=function(){this._myParent.addChild(this)},e.prototype.removeFromParent=function(){DisplayUtils.removeFromParent(this)},e.prototype.initUI=function(){this._isInit=!0},e.prototype.initData=function(){},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e]},e.prototype.destroy=function(){this._myParent=null,this._resources=null},e.prototype.onResize=function(){},e.prototype.loadResource=function(t,e){this._resources&&this._resources.length>0?ResourceUtils.ins().loadResource(this._resources,[],function(){t(),e()},null,this):(t(),e())},e.prototype.setVisible=function(t){this.visible=t},e.openCheck=function(){return!0},e}(egret.DisplayObjectContainer);__reflect(BaseSpriteView.prototype,"BaseSpriteView",["IBaseView"]);var ObjectPool=function(){function t(){this._objs=new Array}return t.prototype.pushObj=function(t){this._objs.push(t)},t.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},t.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},t.pop=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];t._content[e]||(t._content[e]=[]);var i=t._content[e];if(i.length){var o=i.pop();return o}var s=egret.getDefinitionByName(e),a=n.length,h=void 0;return 0==a?h=new s:1==a?h=new s(n[0]):2==a?h=new s(n[0],n[1]):3==a?h=new s(n[0],n[1],n[2]):4==a?h=new s(n[0],n[1],n[2],n[3]):5==a&&(h=new s(n[0],n[1],n[2],n[3],n[4])),h.ObjectPoolKey=e,h},t.popWithExtraKey=function(e,n){t._content[e]||(t._content[e]=[]);var r,i=t._content[e];if(i.length)for(var o=0;o<i.length;o++)if(i[o].extraKey==n){r=i[o],i.splice(o,1);break}if(!r){var s=egret.getDefinitionByName(e);r=new s(n),r.extraKey=n,r.ObjectPoolKey=e}return r},t.push=function(e){if(null==e)return!1;var n=e.ObjectPoolKey;return!t._content[n]||t._content[n].indexOf(e)>-1?!1:(t._content[n].push(e),!0)},t.clear=function(){t._content={}},t.clearClass=function(e,n){void 0===n&&(n=null);for(var r=t._content[e];r&&r.length;){var i=r.pop();n&&i[n](),i=null}t._content[e]=null,delete t._content[e]},t.dealFunc=function(e,n){var r=t._content[e];if(null!=r){var i=0,o=r.length;for(i;o>i;i++)r[i][n]()}},t._content={},t}();__reflect(ObjectPool.prototype,"ObjectPool");var GameApp=function(t){function e(){var e=t.call(this)||this;return e.preload_load_count=0,e}return __extends(e,t),e.ins=function(){return t.ins.call(this)},e.prototype.load=function(){GlobalConfig.parserData(),eui.Label.default_fontFamily="微软雅黑",SceneManager.ins().runScene(StartGameScene)},e.prototype.postPerLoadProgress=function(t,e){return[t,e]},e.prototype.postLoginInit=function(){},e.prototype.postZeroInit=function(){},e}(BaseClass);__reflect(GameApp.prototype,"GameApp"),MessageCenter.compile(GameApp);var ErrorLog=function(){function t(){this.stackObj={stack:""}}return t.ins=function(){return this._ins=this._ins||new t,this._ins},t.prototype.show=function(t){var e=function(){DisplayUtils.removeFromParent(this),this.removeTouchEvent(this.notBtn,e)},n=new BaseView;n.skinName="ErrorSkin",n.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,e,n),n.lab.text=t,StageUtils.ins().getUIStage().addChild(n)},t.Assert=function(e,n){return e?!1:(n+=t.ins().getErrorStackInfo(),debug.log(n),!0)},t.prototype.getErrorStackInfo=function(){var e="";try{Error.captureStackTrace(this.stackObj,t.Assert),e="----"+this.stackObj.stack,this.stackObj.stack=""}catch(n){e=""}return e},t.httpLog=!0,t}();__reflect(ErrorLog.prototype,"ErrorLog");var Assert=ErrorLog.Assert;window.onerror=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="",r="";if(t[4]&&t[4].stack){var i=t[4].stack.split("at ");n=i[1].split(" ")[0];for(var o=2;o<i.length;o++){var s=i[o].split("/");r+=s[s.length-1]}}var a="兼容问题无法获取值",h="错误信息："+t[0]+"\n"+("出错位置："+t[2]+"行"+(t[3]?t[3]+"列":a)+"\n")+("出错函数："+n+"\n")+("函数调用："+r);h.indexOf(a)>=0||(alert(h),window.getClientVersion(function(t){var e=parseInt(t)||0;1===e||0===e||location.reload()}))};var ClickRead=function(t){function e(){var e=t.call(this)||this;return e.selectIndex=-1,e.pageIndex=1,e.pageData={},e.totalPage=0,e.singleItemHeight=100,e.skinName="ClickReadSkin",e}return __extends(e,t),e.prototype.childrenCreated=function(){this.list.itemRenderer=ClickReadItem,this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},e.prototype.dataProvider=function(t){this.splitPage(t),this.dataRecord=new eui.ArrayCollection,this.dataRecord.source=this.pageData[1],this.list.dataProvider=this.dataRecord
},e.prototype.refreshData=function(t){this.pageIndex+=t,this.pageIndex>=this.totalPage&&(this.pageIndex=this.totalPage),this.pageIndex<=1&&(this.pageIndex=1),this.dataRecord.source=this.pageData[this.pageIndex],this.list.dataProviderRefreshed(),this.selectIndex=-1},e.prototype.splitPage=function(t){var e=0,n=window.innerHeight/860,r=Math.ceil(8*n);this.totalPage=Math.ceil(t.length/r);for(var i=0;i<t.length;i++)if(e+=1,r>=e){var o=0==i?1:Math.ceil((i+1)/r);this.pageData[o]||(this.pageData[o]=[]),this.pageData[o].push(t[i]),e%r||(e=0)}},Object.defineProperty(e.prototype,"m_pageNum",{get:function(){return this.totalPage},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"m_curPage",{get:function(){return this.pageIndex},enumerable:!0,configurable:!0}),e.prototype.onItemTap=function(t){var e=this.list.getChildAt(t.itemIndex);if(-1!=this.selectIndex&&this.selectIndex!=t.itemIndex){var n=this.list.getChildAt(this.selectIndex);n.initialize({bold:!1,size:30})}this.selectIndex=t.itemIndex,e.refreshItem({bold:!0,size:40})},e.prototype.distory=function(){this.selectIndex=-1;var t=this.list.$children.length;this.pageData=null,this.pageIndex=null,this.totalPage=null,this.singleItemHeight=null;for(var e=0;t>e;e++){var n=this.list.getChildAt(e);n.distory()}this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},e}(eui.Component);__reflect(ClickRead.prototype,"ClickRead");var ClickReadItem=function(t){function e(){var e=t.call(this)||this;return e.audio="",e.count=0,e.skinName="ClickReadItemSkin",e.init(),e}return __extends(e,t),e.prototype.init=function(){this.trans.visible=!1,this.addTouchEvent(this.itemGroup,this.onClick,!0)},e.prototype.onClick=function(t){},e.prototype.dataChanged=function(){this.data&&(this.enFont.text=this.data.font,this.trans.text=this.data.trans,this.audio=this.data.audio)},e.prototype.initialize=function(t){this.trans.visible=!1,this.count=0,this.refreshItem(t,"init")},e.prototype.refreshItem=function(t,e){void 0===e&&(e="refresh");for(var n in t)this.enFont[n]&&(this.enFont[n]=t[n]);"refresh"==e&&(this.count+=1,this.trans.visible=this.count%2==0),SoundManager.ins().stopEffect(),SoundManager.ins().playEffect(""+MP3_DIR+this.audio)},e.prototype.distory=function(){this.removeTouchEvent(this.itemGroup,this.onClick),this.count=0},e}(BaseItemRender);__reflect(ClickReadItem.prototype,"ClickReadItem");var TestSceneItem=function(t){function e(){var e=t.call(this)||this;return e.skinName="TestSceneItemSkin",e}return __extends(e,t),e.prototype.dataChanged=function(){this.data&&(this.select.text=this.data.select,this.selectIndexLab.text=this.data.label,this.selectLab=this.data.label)},e.prototype.refreshItem=function(t,e){void 0===e&&(e=0),e&&(this.selectIndexLab.visible=!t),1==e?(this.selectImg.source="select_right_jpg",this.select.textColor=2351139):2==e?(this.selectImg.source="select_wrong_jpg",this.select.textColor=15533831):(this.select.bold=t?!0:!1,this.select.size=t?40:30,this.selectImg.source="select_normal_png",this.select.textColor=0)},e}(BaseItemRender);__reflect(TestSceneItem.prototype,"TestSceneItem");var WarnWin=function(t){function e(){var e=t.call(this)||this;return e.skinName="warnFrameSkin",e}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.maskRect,this.close),this.addTouchEvent(this.sureBtn,this.close),this.tips.text=t[0].tips},e.prototype.close=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.removeTouchEvent(this.maskRect,this.close),this.removeTouchEvent(this.sureBtn,this.close),ViewManager.ins().close(e)},e}(BaseEuiView);__reflect(WarnWin.prototype,"WarnWin"),ViewManager.ins().reg(WarnWin,LayerManager.UI_Popup);var AnswerConfig=function(){function t(){}return t}();__reflect(AnswerConfig.prototype,"AnswerConfig");var GlobalConfig=function(){function t(){}return t.setData=function(t){this.config=t},t.parserData=function(){if(!this.init&&this.config){var e=function(e){var r=n.config[e],i=egret.getDefinitionByName(e);if(i){var o="_obj"+e;n[o]=new i;var s="_bool"+e;n[s]=!1;var a="_"+e+"_";Object.defineProperty(n,e,{get:function(){var n=this[a];if(this[s])return n;var r=this[o];return this.parseKeys(n,r,t.keys[e]||0),this[s]=!0,n},set:function(t){this[a]=t}})}n[e]=r},n=this;for(var r in this.config)e(r);this.init=!0,this.config=null}},t.parseKeys=function(t,e,n){if(0==n)t.__proto__=e;else for(var r in t)this.parseKeys(t[r],e,n-1)},t.keys={RecordConfig:1,answer:1},t}();__reflect(GlobalConfig.prototype,"GlobalConfig");var RecordConfig=function(){function t(){}return t}();__reflect(RecordConfig.prototype,"RecordConfig");var TestResultDesc;!function(t){function e(t){for(var e="词汇量检测评估结果\n",r="您词汇量检测的成绩是"+t+"分。\n",i=[6,12,24,50,74,94],o=0,s=0;s<i.length;s++)t>=i&&(o=s);var a=n[o.toString()];return e+r+a}var n={0:"您的词汇量约100-200，相当于零起点或小学一二年级水平，只能认识生活中少数简单的名词，无法进行交流/阅读/写作，建议背诵小学词汇。",1:"您的词汇量约200-300，相当于小学三四年级水平，只能认识生活中少数简单的名词，无法进行交流/阅读/写作，建议背诵小学词汇和初中词汇。",2:"您的词汇量约300-500，相当于小学五六年级水平，只能认识生活中简单的名词和部分最基本的词汇，能进行简单的听说交流，基本无阅读和写作能力，建议背诵初中词汇和高中初级词汇。",3:"您的词汇量约1000—1500，相当于初三一般水平，能认识生活中的简单词汇，能进行简单的听说交流，写出简单句子，但完型填空和阅读理解稍有难度时感觉吃力，写作中缺少高级词汇，缺少亮点突破，建议背诵高中初级/中级/高级词汇。",4:"您的词汇量约1800—2000，相当于高二一般水平，能认识生活中的简单词汇，能进行简单的听说交流，写出简单句子，但完型填空和阅读理解稍有难度时感觉吃力，写作中缺少高级词汇，缺少亮点突破，建议背诵高中中级/高级词汇和托福初级词汇。",5:"您的词汇量约2600-3000，相当于高三较高或以上水平，能认识生活中的简单词汇，能进行简单的听说交流，写出简单句子和简单复合句，但完型阅读稍有难度时感觉吃力，写作中缺少高级词汇，缺少亮点突破，建议背诵高中以上词汇，如托福或雅思词汇。"};t.resultStr=e}(TestResultDesc||(TestResultDesc={}));var RecordScene=function(t){function e(){var e=t.call(this)||this;return e.skinName="RecordSceneSkin",e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.exitButton,this.onTouch,!0),this.addTouchEvent(this.btn_left,this.onLeft,!0),this.addTouchEvent(this.btn_right,this.onRight,!0);var n=[];for(var r in GlobalConfig.RecordConfig)n.push(GlobalConfig.RecordConfig[r]);this.clickReadpanel.dataProvider(n),this.pageNum.text=this.clickReadpanel.m_curPage+"/"+this.clickReadpanel.m_pageNum,this.refreshArrow()},e.prototype.onLeft=function(){this.clickReadpanel.refreshData(-1),this.refreshArrow()},e.prototype.onRight=function(){this.clickReadpanel.refreshData(1),this.refreshArrow()},e.prototype.refreshArrow=function(){this.clickReadpanel.m_curPage>=this.clickReadpanel.m_pageNum?(this.btn_right.visible=!1,this.btn_left.visible=!0):1==this.clickReadpanel.m_curPage?(this.btn_left.visible=!1,this.btn_right.visible=!0):this.btn_left.visible=this.btn_right.visible=!0,this.pageNum.text=this.clickReadpanel.m_curPage+"/"+this.clickReadpanel.m_pageNum},e.prototype.onTouch=function(t){this.close(),ViewManager.ins().close(e)},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.removeTouchEvent(this.btn_left,this.onLeft),this.removeTouchEvent(this.btn_right,this.onRight),this.removeTouchEvent(this.exitButton,this.onTouch)},e}(BaseEuiView);__reflect(RecordScene.prototype,"RecordScene"),ViewManager.ins().reg(RecordScene,LayerManager.UI_Main);var StartGameScene=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.onEnter=function(){t.prototype.onEnter.call(this),this.addLayer(LayerManager.UI_Main),this.addLayer(LayerManager.UI_Popup),this.addLayer(LayerManager.UI_Tips),ViewManager.ins().open(MainScene)},e.prototype.onExit=function(){t.prototype.onExit.call(this)},e}(BaseScene);__reflect(StartGameScene.prototype,"StartGameScene");var TestResult=function(t){function e(){var e=t.call(this)||this;return e.skinName="TestResultSkin",e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.addTouchEvent(this.exitButton,this.close,!0),this.addTouchEvent(this.sureBtn,this.close,!0),this.desc.text=TestResultDesc.resultStr(t[0].score)},e.prototype.close=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.removeTouchEvent(this.exitButton,this.close),this.removeTouchEvent(this.sureBtn,this.close),ViewManager.ins().close(e)},e}(BaseEuiView);__reflect(TestResult.prototype,"TestResult"),ViewManager.ins().reg(TestResult,LayerManager.UI_Main);var TestScene=function(t){function e(){var e=t.call(this)||this;return e.answerArr=[],e.curSelectIndex=-1,e.answerIndex=-1,e.correctNum=0,e.curProgressIndex=0,e.timeNum=60,e.singleScore=2,e.totalNum=0,e.clicked=!0,e.fontObj={0:"A",1:"B",2:"C",3:"D",4:"F",5:"G",6:"H",7:"I",8:"J"},e.skinName="TestSceneSkin",e}return __extends(e,t),e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.progress.text="0%",this.num.text="00",this.word.text="",this.time.text="60s",this.list.itemRenderer=TestSceneItem,this.itemCollect=new eui.ArrayCollection,this.answerArr=[];var n=GlobalConfig.answer;for(var r in n)this.answerArr.push(n[r]);this.totalNum=this.answerArr.length,this.timer=new egret.Timer(1e3),this.addTouchEvent(this.exitButton,this.onTouch,!0),this.addTouchEvent(this.submitBtn,this.onTouch,!0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.refreshPage(this.answerArr.shift())},e.prototype.onItemTap=function(t){if(this.clicked){this.initItem(),this.curSelectIndex=t.itemIndex;var e=this.list.getChildAt(t.itemIndex);e.refreshItem(!0)}},e.prototype.initItem=function(){this.initList(this.curSelectIndex),this.initList(this.answerIndex)},e.prototype.initList=function(t){if(-1!=t){var e=this.list.getChildAt(t);e&&e.refreshItem(!1)}},e.prototype.onTimer=function(t){this.timeNum-=1,this.timeNum<=0&&(this.timeNum=0,this.showAnswer()),this.time.text=this.timeNum+"s"},e.prototype.refreshPage=function(t){var e=this;this.initItem(),this.curSelectIndex=-1,this.timeNum=60,this.timer.start(),this.progress.text=100*Number((this.curProgressIndex/this.totalNum).toFixed(2))+"%",this.num.text=t.id.toString(),this.time.text="60s",this.word.text=t.word;var n=t.selection.split("|"),r=[];n.forEach(function(t,n){r.push({select:t,label:e.fontObj[n]})},this),this.itemCollect.source=r,this.list.dataProvider=this.itemCollect,this.answerIndex=t.answer},e.prototype.onTouch=function(t){switch(t.target){case this.exitButton:this.close(),ViewManager.ins().close(e);break;case this.submitBtn:if(-1==this.curSelectIndex)return void ViewManager.ins().open(WarnWin,{tips:"不要调皮～认真的做题选答案"});this.curProgressIndex+=1,this.showAnswer()}},e.prototype.showAnswer=function(){var t=this;this.submitBtn.touchEnabled=!1,this.list.touchEnabled=!1,this.clicked=!1,this.timer.stop(),this.timer.reset();var e=this.list.getChildAt(this.curSelectIndex),n=this.list.getChildAt(this.answerIndex);this.curSelectIndex==this.answerIndex?(this.correctNum+=1,e&&e.refreshItem(!0,1)):(e&&e.refreshItem(!0,2),n&&n.refreshItem(!0,1));var r=egret.setTimeout(function(){egret.clearTimeout(r),t.answerArr.length?(t.list.touchEnabled=!0,t.submitBtn.touchEnabled=!0,t.clicked=!0,t.refreshPage(t.answerArr.shift())):t.outputResult()},this,3e3)},e.prototype.outputResult=function(){ViewManager.ins().open(TestResult,{score:this.correctNum*this.singleScore}),ViewManager.ins().close(e),this.close()},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.num=null,this.progress=null,this.exitButton=null,this.word=null,this.time=null,this.answerArr=null,this.itemCollect=null,this.curSelectIndex=null,this.answerIndex=null,this.curProgressIndex=null,this.correctNum=null,this.singleScore=null,this.totalNum=null,this.clicked=null,this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.removeTouchEvent(this.exitButton,this.onTouch),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},e}(BaseEuiView);__reflect(TestScene.prototype,"TestScene"),ViewManager.ins().reg(TestScene,LayerManager.UI_Main);var MainScene=function(t){function e(){var e=t.call(this)||this;return e.skinName="MainSceneSkin",e}return __extends(e,t),e.prototype.initUI=function(){t.prototype.initUI.call(this)},e.prototype.open=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.testButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e.prototype.onTap=function(t){switch(t.target){case this.testButton:ViewManager.ins().open(TestScene)}},e.prototype.close=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.testButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},e}(BaseEuiView);__reflect(MainScene.prototype,"MainScene"),ViewManager.ins().reg(MainScene,LayerManager.UI_Main);