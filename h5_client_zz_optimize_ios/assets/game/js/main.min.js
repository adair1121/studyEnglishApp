function post(e,t,n){var r=n.value,i=e.constructor.name+MessageCenter.splite+t,o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=r.call.apply(r,[this].concat(e));return("boolean"!=typeof n||n)&&MessageCenter.ins().dispatch(i,n),n};return o.funcallname=i,n.value=o,n}function callLater(e,t,n){var r=n.value,i="$"+t+"CL",o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];delete this[i],r.call.apply(r,[this].concat(e))},s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this[i]||(egret.callLater.apply(egret,[o,this].concat(e)),this[i]=!0)};return n.value=s,n}function callDelay(e){var t=function(t,n,r){var i=r.value,o="$isDelay"+n,s=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this[o]=!1,i.call.apply(i,[this].concat(e))},a=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this[o]||(this[o]=!0,egret.setTimeout.apply(egret,[s,this,e].concat(t)))};return r.value=a,r};return t}var __reflect=this&&this.__reflect||function(e,t,n){e.__class__=t,n?n.push(t):n=[t],e.__types__=e.__types__?n.concat(e.__types__):n},__extends=this&&this.__extends||function(e,t){function n(){this.constructor=e}for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);n.prototype=t.prototype,e.prototype=new n},__awaiter=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))(function(i,o){function s(e){try{h(r.next(e))}catch(t){o(t)}}function a(e){try{h(r["throw"](e))}catch(t){o(t)}}function h(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(s,a)}h((r=r.apply(e,t||[])).next())})},__generator=this&&this.__generator||function(e,t){function n(e){return function(t){return r([e,t])}}function r(n){if(i)throw new TypeError("Generator is already executing.");for(;h;)try{if(i=1,o&&(s=o[2&n[0]?"return":n[0]?"throw":"next"])&&!(s=s.call(o,n[1])).done)return s;switch(o=0,s&&(n=[0,s.value]),n[0]){case 0:case 1:s=n;break;case 4:return h.label++,{value:n[1],done:!1};case 5:h.label++,o=n[1],n=[0];continue;case 7:n=h.ops.pop(),h.trys.pop();continue;default:if(s=h.trys,!(s=s.length>0&&s[s.length-1])&&(6===n[0]||2===n[0])){h=0;continue}if(3===n[0]&&(!s||n[1]>s[0]&&n[1]<s[3])){h.label=n[1];break}if(6===n[0]&&h.label<s[1]){h.label=s[1],s=n;break}if(s&&h.label<s[2]){h.label=s[2],h.ops.push(n);break}s[2]&&h.ops.pop(),h.trys.pop();continue}n=t.call(e,h)}catch(r){n=[6,r],o=0}finally{i=s=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var i,o,s,a,h={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:n(0),"throw":n(1),"return":n(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a},BaseView=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.observe=function(e,t,n){void 0===n&&(n=void 0),MessageCenter.addListener(e,t,this,n)},t.prototype.removeObserve=function(){MessageCenter.ins().removeAll(this)},t.prototype.addTouchEvent=function(e,t,n){void 0===n&&(n=!1),this.addEvent(egret.TouchEvent.TOUCH_TAP,e,t),n&&(e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginTouch,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndTouch,this),e.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEndTouch,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndTouch,this))},t.prototype.onBeginTouch=function(e){e.target&&this.changeFilter(e.target)},t.prototype.onEndTouch=function(e){e.target&&e.target.filters&&(e.target.filters=[])},t.prototype.changeFilter=function(e){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(t);e.filters=[n]},t.prototype.addTouchEndEvent=function(e,t){this.addEvent(egret.TouchEvent.TOUCH_END,e,t)},t.prototype.addChangeEvent=function(e,t){var n=this;e&&e instanceof eui.TabBar?this.addEvent(egret.TouchEvent.CHANGE,e,function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];t.call.apply(t,[n].concat(e))}):this.addEvent(egret.TouchEvent.CHANGE,e,t)},t.prototype.hidePageFunc=function(e){for(var t=e.$children.length,n=1;t>n;n++)if(e.$children.length>=2){var r=e.getChildAt(1);e.removeChild(r)}},t.prototype.addChangingEvent=function(e,t){this.addEvent(egret.TouchEvent.CHANGING,e,t)},t.prototype.addEvent=function(e,t,n){return t?void t.addEventListener(e,n,this):void debug.error("不存在绑定对象")},t.prototype.removeTouchEvent=function(e,t){e&&(e.removeEventListener(egret.TouchEvent.TOUCH_TAP,t,this),e.hasEventListener("touchBegin")&&e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginTouch,this),e.hasEventListener("touchEnd")&&e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndTouch,this),e.hasEventListener("touchCancel")&&e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEndTouch,this),e.hasEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE)&&e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndTouch,this))},t.prototype.$onClose=function(){var e=function(n){for(var r=0;r<n.numChildren;r++){var i=n.getChildAt(r);i instanceof t?i.$onClose():i instanceof egret.DisplayObjectContainer&&e(i)}};e(this),this.removeObserve()},t}(eui.Component);__reflect(BaseView.prototype,"BaseView");var BaseEuiLayer=function(e){function t(){var t=e.call(this)||this;return t.percentWidth=100,t.percentHeight=100,t.touchEnabled=!1,t}return __extends(t,e),t}(eui.UILayer);__reflect(BaseEuiLayer.prototype,"BaseEuiLayer");var BaseClass=function(){function e(){}return e.ins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this;if(!n._instance){var r=e.length;0==r?n._instance=new n:1==r?n._instance=new n(e[0]):2==r?n._instance=new n(e[0],e[1]):3==r?n._instance=new n(e[0],e[1],e[2]):4==r?n._instance=new n(e[0],e[1],e[2],e[3]):5==r&&(n._instance=new n(e[0],e[1],e[2],e[3],e[4]))}return n._instance},e}();__reflect(BaseClass.prototype,"BaseClass");var ViewManager=function(e){function t(){var t=e.call(this)||this;return t.filters=["TipsView","UIView1_1","GameSceneView","PlayFunView"],t.closeTopFilters=[],t._regesterInfo={},t._views={},t._hCode2Key={},t._opens=[],t._constView=["GameSceneView","UIView2","TipsView","PlayFunView"],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clear=function(){this.closeAll(),this._views={}},t.prototype.reg=function(e,t){if(null!=e){var n=egret.getQualifiedClassName(e);this._regesterInfo[n]||(this._regesterInfo[n]=[e,t])}},t.prototype.destroy=function(e){var t=this._hCode2Key[e];delete this._views[t],delete this._hCode2Key[e]},t.prototype.getKey=function(e){var t="";if("string"==typeof e)t=e;else if("function"==typeof e)t=egret.getQualifiedClassName(e);else if(e instanceof BaseEuiView)for(var n=Object.keys(this._views),r=0,i=n.length;i>r;r++){var o=n[r];if(this._views[o]==e){t=o;break}}else debug.log("打开界面只支持类名和类名的字符串形式,关闭界面只支持类名和类名的字符串以及类的实例形式,错误编号:"+e);return t},t.prototype.viewOpenCheck=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=!0,i=this._regesterInfo[e];if(null!=i){var o=i[0],s=o.openCheck;null!=s&&(r=s.apply(void 0,t))}return r},t.prototype.open=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.getKey(e);if(!this.viewOpenCheck.apply(this,[r].concat(t)))return null;var i=this.openEasy(r,t);return-1==this.filters.indexOf(r)&&debug.log("开始打开窗口:"+r),i&&this.checkOpenView(i),MessageCenter.ins().dispatch("refreshNAV"),i},t.prototype.openExture=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.getKey(e);if(!this.viewOpenCheck.apply(this,[r].concat(t)))return null;var i=this.openEasy(r,t);return i.visible=!1,i.autoExecute&&i.autoExecute(),-1==this.filters.indexOf(r)&&debug.log("开始打开窗口:"+r),i},t.prototype.openEasy=function(e,t){void 0===t&&(t=null);var n=this.getKey(e),r=this._views[n],i=this._regesterInfo[n];if(!r){if(Assert(i,"ViewManager.openEasy class "+n+" is null!!"))return;r=new i[0],this._views[n]=r,this._hCode2Key[r.hashCode]=n}if(null==r)return debug.log("UI_"+n+"不存在"),null;for(var o=0,s=r.exclusionWins;o<s.length;o++){var a=s[o];this.closeEasy(a)}r.isShow()||r.isInit()?(r.addToParent(i[1]),r.open.apply(r,t)):(r.addToParent(i[1]),r.initUI(),r.initData(),r.open.apply(r,t),r.setVisible(!0));var h=this._opens.indexOf(n);return h>=0&&this._opens.splice(h,1),this._opens.push(n),r},t.prototype.checkOpenView=function(e){e.isTopLevel&&e.parent!=LayerManager.UI_Popup},t.prototype.close=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=this.getKey(e);this.closeEx(r,t)},t.prototype.closeEx=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e){var r=this.getView(e);if(r){var i=this;r.closeEx(function(){var n=i.closeEasy(e,t);n&&i.checkCloseView()})}}},t.prototype.closeLastTopView=function(){for(var e=this._opens.length,t=e-1;t>=0;t--){var n=this.getView(this._opens[t]);if(n&&n.isTopLevel){this.close(n);break}}},t.prototype.closeEasy=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!this.isShow(e))return null;var r=this.getKey(e),i=this.getView(r);if(i){var o=this._opens.indexOf(r);o>=0&&this._opens.splice(o,1),i.close.apply(i,t),i.$onClose.apply(i),i.removeFromParent()}return MessageCenter.ins().dispatch("refreshNAV"),i},t.prototype.checkCloseView=function(){for(var e=!1,t=0,n=this._opens;t<n.length;t++){var r=n[t],i=this.getView(r);if(i&&i.isTopLevel){e=!0;break}}},t.prototype.getView=function(e){var t=this.getKey(e);return this._views[t]},t.prototype.closeAll=function(){for(;this._opens.length;)this.closeEasy(this._opens[0],[]);this.destroyAllNotShowView(),this.checkCloseView()},t.prototype.closeTopLevel=function(){var e=this.closeTopFilters;this.closeTopFilters=[];for(var t=this._opens.length-1;t>=0;t--){var n=this._opens[t];if(!(e.indexOf(n)>=0)){var r=this.getView(n),i=1e6;isNaN(parseInt(n))||(i=parseInt(n)),r&&r.isTopLevel&&this.closeEasy(n,[])}}this.checkCloseView()},t.prototype.openNum=function(){return this._opens.length},t.prototype.isShow=function(e){return this._opens.indexOf(this.getKey(e))>=0},t.prototype.hasTopView=function(){for(var e=0,t=this._opens;e<t.length;e++){var n=t[e],r=this.getView(n);if(r&&r.isTopLevel)return!0}return!1},t.prototype.destroyAllNotShowView=function(){for(var e in this._hCode2Key){var t=this._hCode2Key[e];if(-1==this._constView.indexOf(t)&&-1==this._opens.indexOf(t)){var n=this.getView(t);n&&n.destoryView&&n.destoryView(!1)}}},t}(BaseClass);__reflect(ViewManager.prototype,"ViewManager");var BaseScene=function(){function e(){this._layers=new Array}return e.prototype.onEnter=function(){},e.prototype.onExit=function(){ViewManager.ins().closeAll(),this.removeAllLayer()},e.prototype.addLayer=function(e){e instanceof BaseSpriteLayer?(StageUtils.ins().getStage().addChild(e),this._layers.push(e)):e instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().addChild(e),this._layers.push(e))},e.prototype.addLayerAt=function(e,t){e instanceof BaseSpriteLayer?(StageUtils.ins().getStage().addChildAt(e,t),this._layers.push(e)):e instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().addChildAt(e,t),this._layers.push(e))},e.prototype.removeLayer=function(e){e instanceof BaseSpriteLayer?(StageUtils.ins().getStage().removeChild(e),this._layers.splice(this._layers.indexOf(e),1)):e instanceof BaseEuiLayer&&(StageUtils.ins().getUIStage().removeChild(e),this._layers.splice(this._layers.indexOf(e),1))},e.prototype.layerRemoveAllChild=function(e){e instanceof BaseSpriteLayer?e.removeChildren():e instanceof BaseEuiLayer&&e.removeChildren()},e.prototype.removeAllLayer=function(){for(;this._layers.length;){var e=this._layers[0];this.layerRemoveAllChild(e),this.removeLayer(e)}},e}();__reflect(BaseScene.prototype,"BaseScene");var MessageCenter=function(e){function t(t){var n=e.call(this)||this;return n.flag=0,n.type=t,n.dict={},n.eVec=[],0==n.type&&egret.startTick(n.run,n),n}return __extends(t,e),t.ins=function(){return e.ins.call(this,0)},t.prototype.clear=function(){this.dict={},this.eVec.splice(0)},t.prototype.addListener=function(e,t,n){var r=this.dict[e];r?0!=this.flag&&(this.dict[e]=r=r.concat()):this.dict[e]=r=[];for(var i=0,o=r;i<o.length;i++){var s=o[i];if(s[0]==t&&s[1]==n)return}r.push([t,n])},t.prototype.removeListener=function(e,t,n){var r=this.dict[e];if(r){0!=this.flag&&(this.dict[e]=r=r.concat());for(var i=r.length,o=0;i>o;o++)if(r[o][0]==t&&r[o][1]==n){r.splice(o,1);break}0==r.length&&(this.dict[e]=null,delete this.dict[e])}},t.prototype.removeAll=function(e){for(var t=Object.keys(this.dict),n=0,r=t;n<r.length;n++){var i=r[n],o=this.dict[i];0!=this.flag&&(this.dict[i]=o=o.concat());for(var s=o.length,a=s-1;a>=0;a--)o[a][1]==e&&o.splice(a,1);0==o.length&&(this.dict[i]=null,delete this.dict[i])}},t.prototype.dispatch=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=ObjectPool.pop("MessageVo");r.type=e,r.param=t,0==this.type?this.eVec.push(r):1==this.type?this.dealMsg(r):debug.log("MessageCenter未实现的类型")},t.prototype.run=function(e){for(var t=egret.getTimer();this.eVec.length>0&&(this.dealMsg(this.eVec.shift()),!(egret.getTimer()-t>5)););return!1},t.prototype.dealMsg=function(e){var t=this.dict[e.type];if(t){var n=t.length;if(0!=n){this.flag++;for(var r=0,i=t;r<i.length;r++){var o=i[r];o[0].apply(o[1],e.param)}this.flag--,e.dispose(),ObjectPool.push(e)}}},t.setFunction=function(e,n,r,i){if(0==r.indexOf(i)&&"function"==typeof n[r]){var o=egret.getQualifiedClassName(n)+t.splite+r+t.msgIndex;t.msgIndex+=1;var s=n[r],a=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i;n.length;return i=e?s.call.apply(s,[this].concat(n)):s.apply(void 0,n),("boolean"!=typeof i||i)&&t.ins().dispatch(o,i),i};return a.funcallname=o,n[r]=a,!0}return!1},t.compile=function(e,n){void 0===n&&(n="post");var r=e.prototype;for(var i in r)t.setFunction(!0,r,i,n)},t.addListener=function(e,n,r,i){return void 0===i&&(i=void 0),e.funcallname?(t.ins().addListener(e.funcallname,n,r),i&&e.call(i),!0):(debug.log("MessageCenter.addListener error:"+egret.getQualifiedClassName(r)),!1)},t.splite=".",t.msgIndex=1,t}(BaseClass);__reflect(MessageCenter.prototype,"MessageCenter");var MessageVo=function(){function e(){}return e.prototype.dispose=function(){this.type=null,this.param=null},e}();__reflect(MessageVo.prototype,"MessageVo");var LayerManager=function(){function e(){}return e.Game_Bg=new BaseEuiLayer,e.Game_Main=new BaseEuiLayer,e.Main_View=new BaseEuiLayer,e.UI_Main=new BaseEuiLayer,e.UI_Main2=new BaseEuiLayer,e.UI_Popup=new BaseEuiLayer,e.UI_Message=new BaseEuiLayer,e.UI_Tips=new BaseEuiLayer,e}();__reflect(LayerManager.prototype,"LayerManager");var BaseSound=function(){function e(){this._cache={},this._loadingCache=new Array,TimerManager.ins().doTimer(6e4,0,this.dealSoundTimer,this)}return e.prototype.dealSoundTimer=function(){for(var e=egret.getTimer(),t=Object.keys(this._cache),n=0,r=t.length;r>n;n++){var i=t[n];this.checkCanClear(i)&&e-this._cache[i]>=SoundManager.CLEAR_TIME&&(delete this._cache[i],RES.destroyRes(i))}},e.prototype.getSound=function(e,t,n){var r=this;RES.getResByUrl(e,function(i){var o=i;if(o)r._cache[e]&&(r._cache[e]=egret.getTimer());else{if(-1!=r._loadingCache.indexOf(e))return null;r._loadingCache.push(e),RES.getResAsync(e,r.onResourceLoadComplete,r)}t&&n&&t.call(n,o)},this,RES.ResourceItem.TYPE_SOUND)},e.prototype.onResourceLoadComplete=function(e,t){var n=this._loadingCache.indexOf(t);-1!=n&&(this._loadingCache.splice(n,1),this._cache[t]=egret.getTimer(),this.loadedPlay(t))},e.prototype.loadedPlay=function(e){},e.prototype.checkCanClear=function(e){return!0},e}();__reflect(BaseSound.prototype,"BaseSound");var BaseEuiView=function(e){function t(){var t=e.call(this)||this;return t._resources=null,t.isTopLevel=!1,t.exclusionWins=[],t._isInit=!1,t.percentHeight=100,t.percentWidth=100,t}return __extends(t,e),t.prototype.addExclusionWin=function(e){-1==this.exclusionWins.indexOf(e)&&this.exclusionWins.push(e)},t.prototype.isInit=function(){return this._isInit},t.prototype.isShow=function(){return null!=this.stage&&this.visible},t.prototype.addToParent=function(e){e.addChild(this),TimerManager.ins().remove(this.destoryView,this)},t.prototype.removeFromParent=function(){this.parent;DisplayUtils.removeFromParent(this),this.destoryView()},t.prototype.hidePageFunc=function(e,t){void 0===t&&(t=0);var n,r=[];if("number"==typeof t)n=e.getChildAt(t);else{for(var i=0;i<t.length;i++)n=e.getChildAt(t[i]),r.push(n);n=null}if(e.$children.length>=2)for(var o=0;o<e.$children.length;o++){var s=e.getChildAt(o);n?n!=s&&(e.removeChild(s),o--):~r.indexOf(s)||(e.removeChild(s),o--)}},t.prototype.initUI=function(){this._isInit=!0},t.prototype.initData=function(){},t.prototype.destroy=function(){},t.prototype.destoryView=function(e){void 0===e&&(e=!0),TimerManager.ins().removeAll(this),ViewManager.ins().destroy(this.hashCode)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.loadResource=function(e,t){this._resources&&this._resources.length>0?(ResourceUtils.ins().loadResource(this._resources,[],e,null,this),this.addEventListener(eui.UIEvent.CREATION_COMPLETE,t,this)):(e(),t())},t.prototype.setVisible=function(e){this.visible=e},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return!0},t.prototype.closeEx=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0];this.parent==LayerManager.UI_Popup,n()},t}(BaseView);__reflect(BaseEuiView.prototype,"BaseEuiView",["IBaseView"]);var BaseItemRender=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.addTouchEvent=function(e,t,n){void 0===n&&(n=!0),n&&(e.addEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginTouch,this),e.addEventListener(egret.TouchEvent.TOUCH_END,this.onEndTouch,this),e.addEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEndTouch,this),e.addEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndTouch,this))},t.prototype.onBeginTouch=function(e){e.target&&this.changeFilter(e.target)},t.prototype.onEndTouch=function(e){e.target&&e.target.filters&&(e.target.filters=[])},t.prototype.changeFilter=function(e){var t=[.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0],n=new egret.ColorMatrixFilter(t);e.filters=[n]},t.prototype.removeTouchEvent=function(e,t){e&&(e.hasEventListener("touchBegin")&&e.removeEventListener(egret.TouchEvent.TOUCH_BEGIN,this.onBeginTouch,this),e.hasEventListener("touchEnd")&&e.removeEventListener(egret.TouchEvent.TOUCH_END,this.onEndTouch,this),e.hasEventListener("touchCancel")&&e.removeEventListener(egret.TouchEvent.TOUCH_CANCEL,this.onEndTouch,this),e.hasEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE)&&e.removeEventListener(egret.TouchEvent.TOUCH_RELEASE_OUTSIDE,this.onEndTouch,this))},t}(eui.ItemRenderer);__reflect(BaseItemRender.prototype,"BaseItemRender");var GlobalFun=function(){function e(){}return e.getOption=function(e){if(window.location){var t=location.search;if(""==t)return"";t=t.slice(1);for(var n=t.split("&"),r=n.length,i=0;r>i;i++){var o=n[i],s=o.split("=");if(s[0]==e)return s[1]}}return""},e}();__reflect(GlobalFun.prototype,"GlobalFun");var RenderTextureManager=function(e){function t(){var t=e.call(this)||this;return t._pool=[],t._useNum=0,t.isLowerQQBrowser()?t._maxNum=18:t._maxNum=-1,t}return __extends(t,e),t.prototype.isLowerQQBrowser=function(){if(DeviceUtils.IsQQBrowser){for(var e=["2013022","Lenovo A630t","SM-G3818","vivo X3t","GT-I9100"],t=!1,n=0,r=e.length;r>n;n++)if(-1!=navigator.userAgent.indexOf(e[n])){t=!0;break}return t}return!1},t.prototype.pop=function(){var e=this._pool.pop();return e||(-1==this._maxNum||this._useNum<this._maxNum)&&(e=new egret.RenderTexture,this._useNum++),e},t.prototype.push=function(e){for(var t=!1,n=0,r=this._pool.length;r>n;n++)if(this._pool[n]==e){t=!0;break}t||this._pool.push(e)},t}(BaseClass);__reflect(RenderTextureManager.prototype,"RenderTextureManager");var ResVersionManager=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.loadConfig=function(e,t){},t}(BaseClass);__reflect(ResVersionManager.prototype,"ResVersionManager");var TimerManager=function(e){function t(){var t=e.call(this)||this;return t.currHandler=null,t._handlers=[],t.nexthandles=null,t._currTime=egret.getTimer(),t._currFrame=0,egret.startTick(t.onEnterFrame,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getFrameId=function(){return this._currFrame},t.prototype.getCurrTime=function(){return this._currTime},t.binFunc=function(e,t){return e.exeTime>t.exeTime?-1:e.exeTime<t.exeTime?1:0},t.DeleteHandle=function(e){e.clear(),ObjectPool.push(e)},t.prototype.onEnterFrame=function(e){this._currFrame++,this._currTime=egret.getTimer();var n=0,r=this.nexthandles;if(this.nexthandles=null,r&&r.length>0){for(var i=0,o=r;i<o.length;i++){var s=o[i];s.method.call(s.methodObj),t.DeleteHandle(s)}r=null}if(this._handlers.length<=0)return!1;for(var a=this._handlers[this._handlers.length-1];a.exeTime<=this._currTime;){this.currHandler=a=this._handlers.pop(),a.method.call(a.methodObj),n=egret.getTimer(),a.exeTime=n+a.delay;var h=a.forever;if(h||(a.repeatCount>1?(a.repeatCount--,h=!0):a.onFinish&&a.onFinish.apply(a.finishObj)),h){var u=Algorithm.binSearch(this._handlers,a,t.binFunc);this._handlers.splice(u,0,a)}else t.DeleteHandle(a);if(n-this._currTime>5)break;if(this._handlers.length<=0)break;a=this._handlers[this._handlers.length-1]}return this.currHandler=null,!1},t.prototype.create=function(e,n,r,i,o,s,a){if(!(0>n||0>r||null==i)){var h=ObjectPool.pop("TimerHandler");h.forever=0==r,h.repeatCount=r,h.delay=n,h.method=i,h.methodObj=o,h.onFinish=s,h.finishObj=a,h.exeTime=e+this._currTime;var u=Algorithm.binSearch(this._handlers,h,t.binFunc);this._handlers.splice(u,0,h)}},t.prototype.doTimer=function(e,t,n,r,i,o){void 0===i&&(i=null),void 0===o&&(o=null),this.create(e,e,t,n,r,i,o)},t.prototype.doTimerDelay=function(e,t,n,r,i,o,s){void 0===o&&(o=null),void 0===s&&(s=null),this.create(e,t,n,r,i,o,s)},t.prototype.doNext=function(e,t){var n=ObjectPool.pop("TimerHandler");n.method=e,n.methodObj=t,this.nexthandles||(this.nexthandles=[]),this.nexthandles.push(n)},t.prototype.remove=function(e,n){var r=this.currHandler;r&&r.method==e&&r.methodObj==n&&(r.forever=!1,r.repeatCount=0);for(var i=this._handlers.length-1;i>=0;i--){var o=this._handlers[i];o.method==e&&o.methodObj==n&&(this._handlers.splice(i,1),t.DeleteHandle(o))}},t.prototype.removeAll=function(e){var n=this.currHandler;n&&n.methodObj==e&&(n.forever=!1,n.repeatCount=0);for(var r=this._handlers.length-1;r>=0;r--){var i=this._handlers[r];i.methodObj==e&&(this._handlers.splice(r,1),t.DeleteHandle(i))}},t.prototype.isExists=function(e,t){for(var n=0,r=this._handlers;n<r.length;n++){var i=r[n];if(i.method==e&&i.methodObj==t)return!0}return!1},t}(BaseClass);__reflect(TimerManager.prototype,"TimerManager");var TimerHandler=function(){function e(){this.delay=0,this.forever=!1,this.repeatCount=0,this.exeTime=0}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.onFinish=null,this.finishObj=null,this.forever=!1},e}();__reflect(TimerHandler.prototype,"TimerHandler");var Main=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.createChildren=function(){e.prototype.createChildren.call(this),egret.lifecycle.addLifecycleListener(function(e){}),egret.lifecycle.onPause=function(){egret.ticker.pause()},egret.lifecycle.onResume=function(){egret.ticker.resume()};var t=new AssetAdapter;egret.registerImplementation("eui.IAssetAdapter",t),egret.registerImplementation("eui.IThemeAdapter",new ThemeAdapter),this.runGame()["catch"](function(e){console.log(e)})},t.prototype.runGame=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return[4,this.loadResource()];case 1:return n.sent(),this.createGameScene(),[4,RES.getResAsync("description_json")];case 2:return e=n.sent(),this.startAnimation(e),[4,platform.login()];case 3:return n.sent(),[4,platform.getUserInfo()];case 4:return t=n.sent(),console.log(t),[2]}})})},t.prototype.loadResource=function(){return __awaiter(this,void 0,void 0,function(){var e,t;return __generator(this,function(n){switch(n.label){case 0:return n.trys.push([0,4,,5]),e=new LoadingUI,this.stage.addChild(e),[4,RES.loadConfig("resource/default.res.json","resource/")];case 1:return n.sent(),[4,this.loadTheme()];case 2:return n.sent(),[4,RES.loadGroup("preload",0,e)];case 3:return n.sent(),this.stage.removeChild(e),[3,5];case 4:return t=n.sent(),console.error(t),[3,5];case 5:return[2]}})})},t.prototype.loadTheme=function(){var e=this;return new Promise(function(t,n){var r=new eui.Theme("resource/default.thm.json",e.stage);r.addEventListener(eui.UIEvent.COMPLETE,function(){t()},e)})},t.prototype.createGameScene=function(){StageUtils.init(),RES.getResByUrl(CFG_DIR+"config.zip",function(e){JSZip.loadAsync(e).then(function(e){return e.file("config.json").async("text")}).then(function(e){GlobalConfig.setData(JSON.parse(e)),GameApp.ins().load()})},this,RES.ResourceItem.TYPE_BIN)},t.prototype.startAnimation=function(e){},t}(eui.UILayer);__reflect(Main.prototype,"Main");var ConstConfig=function(){function e(){}return e.getJobName=function(e){return this.jobNames[e]},e.ServerListPageNum=10,e.jobNames=["0","战士","法师","道士"],e}();__reflect(ConstConfig.prototype,"ConstConfig");var Keyboard=function(){function e(){}return e.LEFT=37,e.UP=38,e.RIGHT=39,e.DOWN=40,e.KC_1=49,e.KC_2=50,e.KC_3=51,e.KC_4=52,e.KC_5=53,e.KC_6=54,e.KC_7=55,e.KC_8=56,e.KC_9=57,e.KC_0=48,e.A=65,e.B=66,e.C=67,e.D=68,e.E=69,e.F=70,e.G=71,e.H=72,e.I=73,e.J=74,e.K=75,e.L=76,e.M=77,e.N=78,e.O=79,e.P=80,e.Q=81,e.R=82,e.S=83,e.T=84,e.U=85,e.V=86,e.W=87,e.X=88,e.Y=89,e.Z=90,e.SPACE=32,e.BRACE_L=219,e.BACKSLASH=220,e.BRACE_R=221,e.BACK_QUOTE=192,e.ENTER=13,e.KC_BACKSPACE=8,e.KC_TAB=9,e.KC_ENTER=13,e.KC_SHIFT=16,e.KC_CONTROL=17,e.KC_ESCAPE=27,e.KC_SPACE=32,e.KC_WINDOWS=91,e.KC_MENU=93,e}();__reflect(Keyboard.prototype,"Keyboard");var PlatformConfig=function(){function e(){}return e}();__reflect(PlatformConfig.prototype,"PlatformConfig");var BitmapNumber=function(e){function t(){var t=e.call(this)||this;return t._imgPool=[],t._containerPool=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.createNumPic=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i,o=this.getContainer(),s=e.toString(),a=0;for(a;a<s.length;a++)i=this.getSingleNumPic(s.charAt(a),t),o.addChild(i);return this.repositionNumPic(o,n,r),o},t.prototype.desstroyNumPic=function(e){this.clearContainer(e),e.parent&&e.parent.removeChild(e),this._containerPool.push(e)},t.prototype.changeNum=function(e,t,n,r,i){void 0===r&&(r=0),void 0===i&&(i=0);var o=t.toString();if(e){if(e.numChildren>o.length)for(;e.numChildren>o.length;)this.recycleBM(e.getChildAt(e.numChildren-1));var s,a=0;for(a;a<o.length;a++)a>=e.numChildren&&e.addChild(this.getBitmap()),s=o.charAt(a),s="."==s?"dot":s,e.getChildAt(a).texture=this.getTexture(s,n);this.repositionNumPic(e,r,i)}},t.prototype.repositionNumPic=function(e,t,n){void 0===t&&(t=0),void 0===n&&(n=0);var r,i=0,o=0;for(i;i<e.numChildren;i++)r=e.getChildAt(i),r.x=o-t,o=r.x+r.width},t.prototype.clearContainer=function(e){for(;e.numChildren;)this.recycleBM(e.getChildAt(e.numChildren-1))},t.prototype.recycleBM=function(e){e&&e.parent&&(e.parent.removeChild(e),e.texture=null,this._imgPool.push(e))},t.prototype.getContainer=function(){return this._containerPool.length?this._containerPool.shift():new egret.DisplayObjectContainer},t.prototype.getSingleNumPic=function(e,t){"."==e&&(e="dot");var n=this.getBitmap();return n.texture=this.getTexture(e,t),n},t.prototype.getTexture=function(e,t){return RES.getRes(t+e+"_png")},t.prototype.getBitmap=function(){return this._imgPool.length?this._imgPool.shift():new egret.Bitmap},t}(BaseClass);__reflect(BitmapNumber.prototype,"BitmapNumber");var MovieClip=function(e){function t(){var n=e.call(this)||this;return n.rate=1,n.pixelHitTest=!1,n._mcFactory=new egret.MovieClipDataFactory,n.$hitTest=function(e,n){var r=this.$DisplayObject;if(!this.$renderNode||!this.$visible||0==r[0]||0==r[1])return null;var i=this.$getInvertedConcatenatedMatrix();if(0==i.a&&0==i.b&&0==i.c&&0==i.d)return null;var o=this.$getContentBounds(),s=i.a*e+i.c*n+i.tx,a=i.b*e+i.d*n+i.ty;if(o.contains(s,a)){if(!this.$children){var h=this.$scrollRect?this.$scrollRect:this.$maskRect;if(h&&!h.contains(s,a))return null;if(this.$mask&&!this.$mask.$hitTest(e,n))return null;if(this.pixelHitTest&&this instanceof t&&!this.hitTestPoint(e,n,!0))return null}return this}return null},n}return __extends(t,e),t.prototype.playFile=function(e,n,r,i){var o=this;if(void 0===n&&(n=1),void 0===r&&(r=null),void 0===i&&(i=!0),-1==e.indexOf("chargeff1")&&-1==e.indexOf("forceguildeff")&&-1==e.indexOf("qianghua")&&-1==e.indexOf("forgeSuccess")&&-1==e.indexOf("neigongbaozhaeff")&&-1==e.indexOf("piaodongqipaohuang")){if(this.time=egret.getTimer(),this._compFun=r,this.playCount=n,this.remove=i,TimerManager.ins().remove(this.playComp,this),this.texture&&null==this.texture.bitmapData);else if(this.name==e)return void this.createBody();this.name=e,this.texture&&t.removeDisplayObject(this,this.texture.bitmapData),this.jsonData=null,this.texture=null,RES.getResByUrl(this.name+".json",function(e,t){o.name+".json"==t&&e&&(o.jsonData=e,o.createBody())},this,RES.ResourceItem.TYPE_JSON),RES.getResByUrl(this.name+".png",function(e,n){o.name+".png"==n&&e&&(o.texture=e,o.stage&&t.addDisplayObject(o,o.texture.bitmapData),o.createBody())},this,RES.ResourceItem.TYPE_IMAGE)}},t.prototype.$onAddToStage=function(n,r){e.prototype.$onAddToStage.call(this,n,r),this.texture&&t.addDisplayObject(this,this.texture.bitmapData)},t.prototype.$onRemoveFromStage=function(){e.prototype.$onRemoveFromStage.call(this),this.texture&&t.removeDisplayObject(this,this.texture.bitmapData)},t.prototype.createBody=function(){if(this.jsonData&&this.texture){this._mcFactory.clearCache(),this._mcFactory.mcDataSet=this.jsonData,this._mcFactory.texture=this.texture;var e=this.name.split("/"),n=e.pop();this.movieClipData=this._mcFactory.generateMovieClipData(n),this.name in t.originalRate||(t.originalRate[this.name]=this.movieClipData.frameRate),this.frameRate=t.originalRate[this.name]*this.rate>>0;try{this.gotoAndPlay(1,this.playCount)}catch(r){debug.error("错误动画文件:",this.name)}if(this.visible=!0,this.playCount>0){var i=egret.getTimer()-this.time;i=this.playTime*this.playCount-i,i>0?TimerManager.ins().doTimer(i,1,this.playComp,this):this.playComp()}this.dispatchEventWith(egret.Event.CHANGE)}},t.prototype.playComp=function(){this.stage&&this._compFun&&this._compFun(),this.remove&&DisplayUtils.removeFromParent(this)},Object.defineProperty(t.prototype,"playTime",{get:function(){return this.movieClipData?1/this.frameRate*this.totalFrames*1e3:0},enumerable:!0,configurable:!0}),t.prototype.clearComFun=function(){this._compFun=null},t.prototype.dispose=function(){this.stop(),this.resetMovieClip(),this.clearComFun(),TimerManager.ins().removeAll(this)},t.prototype.destroy=function(){DisplayUtils.removeFromParent(this),this.dispose(),ObjectPool.push(this)},t.prototype.resetMovieClip=function(){var e=this;e.rotation=0,e.scaleX=1,e.scaleY=1,e.alpha=1,e.anchorOffsetX=0,e.anchorOffsetY=0,e.x=0,e.y=0,e.rate=1,e.$renderNode.cleanBeforeRender(),e._mcFactory.clearCache(),e._mcFactory.mcDataSet=null,e._mcFactory.texture=null,e.name=null,e.jsonData=null,e.filters=null;var n=e.texture;n&&t.removeDisplayObject(e,n.bitmapData),e.texture=null,e.remove=!1,egret.Tween.removeTweens(e)},t.addDisplayObject=function(e,n){if(n){var r=n.hashCode;if(!t.displayList[r])return void(t.displayList[r]=[e]);var i=t.displayList[r];i.indexOf(e)<0&&i.push(e)}},t.removeDisplayObject=function(e,n){if(n){var r=n.hashCode;if(t.displayList[r]){var i=t.displayList[r],o=i.indexOf(e);
o>=0&&i.splice(o,1),0==i.length&&delete t.displayList[r]}}},t.originalRate={},t.displayList=egret.createMap(),t}(egret.MovieClip);__reflect(MovieClip.prototype,"MovieClip");var RES_RESOURCE="resource/",CFG_DIR=RES_RESOURCE+"cfg/",RES_DIR=RES_RESOURCE+"res/",MP3_DIR=RES_RESOURCE+"sound/",ResPath=function(){function e(){}return e.GetUrilPath=function(e,t,n,r){return n&&(t=t.replace("_png","")),""+e+t+"."+r},e}();__reflect(ResPath.prototype,"ResPath");var UIGroup=function(){function e(){}return e.ServerList="ServerList",e.OfflineReward="OfflineReward",e.UIView2="UIView2",e.Friends="Friends",e.Vip="Vip",e.Charge="Charge",e.DailyCharge="DailyCharge",e.Peakedness="Peakedness",e.Fuli="Fuli",e.Rank="Rank",e.RRole="RRole",e.GuildMap="GuildMap",e.GuildSkill="GuildSkill",e.GuildWarMain="GuildWarMain",e.GuildWarReward="GuildWarReward",e.GuildWin="GuildWin",e.GuildBoss="GuildBoss",e.Shop="Shop",e.TreasureHunt="TreasureHunt",e.KfArena="KfArena",e.Auction="Auction",e.Limittime="Limittime",e.KFFieldWin="KFFieldWin",e.KFBoss="KFBoss",e.KFBossShow="KFBossShow",e.KFInvasion="KFInvasion",e.GodWeapon="GodWeapon",e.ActivityWin="ActivityWin",e.CityBoss="CityBoss",e.LadderWin="LadderWin",e.BtnHeji="BtnHeji",e.FbWin="FbWin",e.FbDayReward="FbDayReward",e.Richman="Richman",e.BossWin="BossWin",e.BagWin="BagWin",e.ForgeWin="ForgeWin",e.LiLianWin="LiLianWin",e.SkillWin="SkillWin",e.RoleWin="RoleWin",e.GodWingWin="GodWingWin",e.FireRingWin="FireRingWin",e.AdvanEquipWin="AdvanEquipWin",e.HeirloomWin="HeirloomWin",e.TreasureWin="TreasureWin",e.RuneWin="RuneWin",e.LyMarkSkillTipsWin="LyMarkSkillTipsWin",e.BossBlood="BossBlood",e.LadderChallengeWin="LadderChallengeWin",e.LadderResultWin="LadderResultWin",e.GuardGodWeaponUI="GuardGodWeaponUI",e.ResultWin="ResultWin",e.LimitStartTips="LimitStartTips",e.OpenRole="OpenRole",e.Sixteen="Sixteen",e.CreateRole="CreateRole",e.WelcomeWin="WelcomeWin",e.FirstRecharge="FirstRecharge",e.Activationtongyong="Activationtongyong",e.TargetWin="TargetWin",e.Vip3MWin="Vip3MWin",e.VipGiftWin="VipGiftWin",e.RingInfo="RingInfo",e.BookUpWin="BookUpWin",e.LevelUpWayWin="LevelUpWayWin",e.MineNpcHead="MineNpcHead",e.CityFun="CityFun",e.WeaponPanel="WeaponPanel",e.WeaponSoulBreak="WeaponSoulBreak",e.OSARankTips="OSARankTips",e.GuildWarUi="GuildWarUi",e.RedBagWin="RedBagWin",e.FlowerUseTips="FlowerUseTips",e.SamsaraSoul="SamsaraSoul",e.BattleWin="BattleWin",e.ShenshouForgeWin="ShenshouForgeWin",e.ShieldWin="ShieldWin",e.Collect="Collect",e.HefuXunbao="HefuXunbao",e.TransferName="TransferName",e}();__reflect(UIGroup.prototype,"UIGroup");var DebugPlatform=function(){function e(){}return e.prototype.getUserInfo=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,{nickName:"username"}]})})},e.prototype.login=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2]})})},e}();__reflect(DebugPlatform.prototype,"DebugPlatform",["Platform"]),window.platform||(window.platform=new DebugPlatform);var ThemeAdapter=function(){function e(){}return e.prototype.getTheme=function(e,t,n,r){function i(e){t.call(r,e)}function o(t){t.resItem.url==e&&(RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),n.call(r))}var s=this;if("undefined"!=typeof generateEUI)egret.callLater(function(){t.call(r,generateEUI)},this);else if("undefined"!=typeof generateEUI2)RES.getResByUrl("resource/gameEui.json",function(e,n){window.JSONParseClass.setData(e),egret.callLater(function(){t.call(r,generateEUI2)},s)},this,RES.ResourceItem.TYPE_JSON);else if("undefined"!=typeof generateJSON)if(e.indexOf(".exml")>-1){var a=e.split("/");a.pop();var h=a.join("/")+"_EUI.json";generateJSON.paths[e]?egret.callLater(function(){t.call(r,generateJSON.paths[e])},this):RES.getResByUrl(h,function(n){window.JSONParseClass.setData(n),egret.callLater(function(){t.call(r,generateJSON.paths[e])},s)},this,RES.ResourceItem.TYPE_JSON)}else egret.callLater(function(){t.call(r,generateJSON)},this);else RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR,o,null),RES.getResByUrl(e,i,this,RES.ResourceItem.TYPE_TEXT)},e}();__reflect(ThemeAdapter.prototype,"ThemeAdapter",["eui.IThemeAdapter"]);var BaseSpriteLayer=function(e){function t(){var t=e.call(this)||this;return t.touchEnabled=!1,t}return __extends(t,e),t}(egret.DisplayObjectContainer);__reflect(BaseSpriteLayer.prototype,"BaseSpriteLayer");var AssetAdapter=function(){function e(){}return e.prototype.getAsset=function(e,t,n){function r(r){t.call(n,r,e)}if(RES.hasRes(e)){var i=RES.getRes(e);i?r(i):RES.getResAsync(e,r,this)}else RES.getResByUrl(e,r,this,RES.ResourceItem.TYPE_IMAGE)},e}();__reflect(AssetAdapter.prototype,"AssetAdapter",["eui.IAssetAdapter"]);var SceneManager=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clear=function(){var e=this._currScene;e&&(e.onExit(),this._currScene=void 0)},t.prototype.runScene=function(e){if(null==e)return void debug.log("runScene:scene is null");var t=this._currScene;t&&(t.onExit(),t=void 0);var n=new e;n.onEnter(),this._currScene=n},t.prototype.getCurrScene=function(){return this._currScene},t.prototype.getSceneName=function(){return this._currScene?egret.getQualifiedClassName(this._currScene):""},t.CREATE_ROLE="CreateRoleScene",t.MAIN="MainScene",t}(BaseClass);__reflect(SceneManager.prototype,"SceneManager");var DelayOptManager=function(e){function t(){var t=e.call(this)||this;return t.TIME_THRESHOLD=2,t._delayOpts=[],egret.startTick(t.runCachedFun,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addDelayOptFunction=function(e,t,n,r,i){this._delayOpts.push({fun:t,funPara:n,thisObj:e,callBack:r,para:i})},t.prototype.clear=function(){this._delayOpts.length=0},t.prototype.runCachedFun=function(e){if(0==this._delayOpts.length)return!1;for(var t,n=egret.getTimer();this._delayOpts.length&&(t=this._delayOpts.shift(),t.funPara?t.fun.call(t.thisObj,t.funPara):t.fun.call(t.thisObj),t.callBack&&(void 0!=t.para?t.callBack.call(t.thisObj,t.para):t.callBack()),!(egret.getTimer()-n>this.TIME_THRESHOLD)););return!1},t}(BaseClass);__reflect(DelayOptManager.prototype,"DelayOptManager");var SoundBg=function(e){function t(){var t=e.call(this)||this;return t._currBg="",t}return __extends(t,e),t.prototype.stop=function(){this._currSoundChannel&&this.removeSoundChannel(this._currSoundChannel),this._currSoundChannel=null,this._currSound=null,this._currBg=""},t.prototype.play=function(e){},t.prototype.touchPlay=function(){if(this._currSoundChannel&&this._currSound){var e=this._currSoundChannel.position;this.removeSoundChannel(this._currSoundChannel),this._currSoundChannel=this._currSound.play(e,1),this.addSoundChannel(this._currSoundChannel)}},t.prototype.playSound=function(e){this._currSound=e,this._currSoundChannel=this._currSound.play(0,1),this.addSoundChannel(this._currSoundChannel)},t.prototype.onSoundComplete=function(){this._currSoundChannel&&this.removeSoundChannel(this._currSoundChannel),this.playSound(this._currSound)},t.prototype.addSoundChannel=function(e){e.volume=this._volume,e.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)},t.prototype.removeSoundChannel=function(e){e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),e.stop()},t.prototype.setVolume=function(e){this._volume=e,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.loadedPlay=function(e){if(this._currBg==e){var t=RES.getRes(e);if(!t)return;this.playSound(t)}},t.prototype.checkCanClear=function(e){return this._currBg!=e},t}(BaseSound);__reflect(SoundBg.prototype,"SoundBg");var SoundEffects=function(e){function t(){var t=e.call(this)||this;return t._loaded=!1,t}return __extends(t,e),t.prototype.play=function(e){var t=this;this._loaded=!0,this.getSound(e,function(e){e&&(t._sound=e,t.playSound(t._sound))},this)},t.prototype.stop=function(){this._soundChannel&&this._soundChannel.stop()},t.prototype.playSound=function(e){this._soundChannel&&this._soundChannel.stop(),this._soundChannel=e.play(0,1),this._soundChannel.volume=this._volume},t.prototype.setVolume=function(e){this._volume=e},t.prototype.loadedPlay=function(e){var t=RES.getRes(e);t&&this.playSound(t)},t}(BaseSound);__reflect(SoundEffects.prototype,"SoundEffects");var SoundManager=function(e){function t(){var t=e.call(this)||this;return t.bgOn=!0,t.effectOn=!0,t.bgVolume=.5,t.effectVolume=.5,t.bg=new SoundBg,t.bg.setVolume(t.bgVolume),t.effect=new SoundEffects,t.effect.setVolume(t.effectVolume),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.playEffect=function(e){this.effectOn&&this.effect.play(e)},t.prototype.stopEffect=function(){this.effectOn&&this.effect.stop()},t.prototype.playBg=function(e){this.currBg=e,!this.bgOn},t.prototype.stopBg=function(){this.bg.stop()},t.prototype.touchBg=function(){egret.Capabilities.isMobile&&"iOS"==egret.Capabilities.os&&this.bg.touchPlay()},t.prototype.setEffectOn=function(e){this.effectOn=e},t.prototype.setBgOn=function(e){this.bgOn=e,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg()},t.prototype.setBgVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.bgVolume=e,this.bg.setVolume(this.bgVolume)},t.prototype.getBgVolume=function(){return this.bgVolume},t.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.effectVolume=e,this.effect.setVolume(this.effectVolume)},t.prototype.getEffectVolume=function(){return this.effectVolume},t.CLEAR_TIME=18e4,t}(BaseClass);__reflect(SoundManager.prototype,"SoundManager");var Algorithm=function(){function e(){}return e.sortAsc=function(e,t){return t>e?-1:e>t?1:0},e.sortAscAttr=function(t,n,r){var i;if(void 0==r)i=e.sortAsc(t,n);else{var o=t[r],s=n[r];i=s>o?-1:o>s?1:0}return i},e.sortDesc=function(e,t){return e>t?-1:t>e?1:0},e.sortDescAttr=function(t,n,r){var i;if(void 0==r)i=e.sortDesc(t,n);else{var o=t[r],s=n[r];i=o>s?-1:s>o?1:0}return i},e.binSearch=function(t,n,r){if(void 0===r&&(r=null),!t||0==t.length)return 0;r||(r=e.sortAsc);for(var i=0,o=t.length-1;o>=i;){var s=o+i>>1,a=t[s];r(a,n)<=0?i=s+1:o=s-1}return i},e.test=function(){for(var t=[],n=10,r=0;n>r;r++){var i=Math.floor(1e5*Math.random()),o=e.binSearch(t,i);t.splice(o,0,i)}t.length!=n&&debug.log("test fail!count is "+t.length+", except:"+n);for(var s=0,a=t;s<a.length;s++){var h=a[s];debug.log(h)}for(var r=0;r<t.length-1;r++)if(t[r]>t[r+1]){debug.log("test fail!index:"+r);break}},e}();__reflect(Algorithm.prototype,"Algorithm");var AverageUtils=function(){function e(e){void 0===e&&(e=10),this.nums=[],this.numsLen=0,this.numSum=0,this.maxNum=e}return e.prototype.push=function(e){this.numsLen>this.maxNum&&(this.numsLen--,this.numSum-=this.nums.shift()),this.nums.push(e),this.numSum+=e,this.numsLen++},e.prototype.getValue=function(){return this.numSum/this.numsLen},e.prototype.clear=function(){this.nums.splice(0),this.numsLen=0,this.numSum=0},e}();__reflect(AverageUtils.prototype,"AverageUtils");var Base64=function(){function e(){}return e.base64encode=function(e){var t,n,r,i,o,s;for(r=e.length,n=0,t="";r>n;){if(i=255&e.charCodeAt(n++),n==r){t+=this.base64EncodeChars.charAt(i>>2),t+=this.base64EncodeChars.charAt((3&i)<<4),t+="==";break}if(o=e.charCodeAt(n++),n==r){t+=this.base64EncodeChars.charAt(i>>2),t+=this.base64EncodeChars.charAt((3&i)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2),t+="=";break}s=e.charCodeAt(n++),t+=this.base64EncodeChars.charAt(i>>2),t+=this.base64EncodeChars.charAt((3&i)<<4|(240&o)>>4),t+=this.base64EncodeChars.charAt((15&o)<<2|(192&s)>>6),t+=this.base64EncodeChars.charAt(63&s)}return t},e.base64decode=function(e){var t,n,r,i,o,s,a;for(s=e.length,o=0,a="";s>o;){do t=this.base64DecodeChars[255&e.charCodeAt(o++)];while(s>o&&-1==t);if(-1==t)break;do n=this.base64DecodeChars[255&e.charCodeAt(o++)];while(s>o&&-1==n);if(-1==n)break;a+=String.fromCharCode(t<<2|(48&n)>>4);do{if(r=255&e.charCodeAt(o++),61==r)return a;r=this.base64DecodeChars[r]}while(s>o&&-1==r);if(-1==r)break;a+=String.fromCharCode((15&n)<<4|(60&r)>>2);do{if(i=255&e.charCodeAt(o++),61==i)return a;i=this.base64DecodeChars[i]}while(s>o&&-1==i);if(-1==i)break;a+=String.fromCharCode((3&r)<<6|i)}return a},e.base64EncodeChars="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e.base64DecodeChars=[-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,-1,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,-1,-1,-1,-1,-1],e}();__reflect(Base64.prototype,"Base64");var ColorUtil=function(){function e(){}return e.mergeARGB=function(e,t,n,r){return e<<24|t<<16|n<<8|r},e.getChannel=function(e,t){switch(t){case this.ALPHA:return e>>24&255;case this.RED:return e>>16&255;case this.GREEN:return e>>8&255;case this.BLUE:return 255&e}return 0},e.numberToString=function(e,t){return void 0===t&&(t="#"),t+e.toString(16)},e.ALPHA=4080082432,e.RED=15937822,e.GREEN=3532333,e.BLUE=255,e.NORMAL_COLOR=13746831,e.RED_COLOR_N=15937822,e.GREEN_COLOR_N=3532333,e.GRAY_COLOR2=8618883,e.WHITE_COLOR2=13746831,e.WHITE_COLOR="#D1C28F",e.RED_COLOR="#F3311E",e.GREEN_COLOR="#35E62D",e.GRAY_COLOR="#8B898B",e.COLOR_STR=["white","green","purple","orange","red","golden"],e.ROLENAME_COLOR_YELLOW=16764427,e.ROLENAME_COLOR_GREEN=3532333,e.ROLENAME_COLOR_NORMAL=3532333,e.JUEWEI_COLOR=["#e2dfd4","#35e62d","#81adff","#e27dff","#ff9649","#fc5959","#ffd93f","#ffff00"],e}();__reflect(ColorUtil.prototype,"ColorUtil");var CommonUtils=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.addLableStrokeColor=function(e,t,n){e.strokeColor=t,e.stroke=n},t.getObjectLength=function(e){var t=0;for(var n in e)t++;return t},t.getObjectByAttr=function(e,t,n){for(var r in e)if(e[r][t]==n)return e[r];return null},t.getObjectByUnionAttr=function(e,t,n){for(var r in e)if(r==t.toString())for(var i in e[r])if(i==n.toString())return e[r][i];return null},t.copyDataHandler=function(e){var t;if(e instanceof Array)t=[];else{if(!(e instanceof Object))return e;t={}}for(var n=Object.keys(e),r=0,i=n.length;i>r;r++){var o=n[r];t[o]=this.copyDataHandler(e[o])}return t},t.objectToArray=function(e){if(e instanceof Object){e=this.copyDataHandler(e);for(var t=[],n=Object.keys(e),r=0,i=n.length;i>r;r++){var o=n[r];e[o]&&t.push(e[o])}return t}return e},t.lock=function(){StageUtils.ins().getStage().touchEnabled=StageUtils.ins().getStage().touchChildren=!1},t.unlock=function(){StageUtils.ins().getStage().touchEnabled=StageUtils.ins().getStage().touchChildren=!0},t.labelIsOverLenght=function(e,t){},t}(BaseClass);__reflect(CommonUtils.prototype,"CommonUtils");var DateStyle=function(e){function t(t,n,r,i){var o=e.call(this)||this;return o.format=[],o.from=0,o.to=0,o.isFormatNum=!1,o.format=t,o.from=n,o.to=r,o.isFormatNum=i,o}return __extends(t,e),t}(BaseClass);__reflect(DateStyle.prototype,"DateStyle");var DateUtils=function(){function e(){}return e.getFormatTimeByStyle=function(t,n){if(void 0===n&&(n=e.STYLE_1),0>t&&(t=0,debug.log("输入参数有误!时间为负数:"+t)),n.from>n.to)return debug.log("输入参数有误!to参数必须大于等于from参数,请检查style参数的值"),"";t>>=0;for(var r="",i=n.to;i>=n.from;i--){var o=t/this.mul[i],s="";i!=n.to&&(o%=this.mod[i]),s=n.isFormatNum&&10>o?"0"+(o>>0).toString():(o>>0).toString(),r+=s+n.format[i]}return r},e.getFormatTimeByStyle1=function(t,n){return void 0===n&&(n=e.STYLE_1),this.getFormatTimeByStyle(t/this.MS_PER_SECOND)},e.formatMiniDateTime=function(t){return e.MINI_DATE_TIME_BASE+(2147483647&t)*e.MS_PER_SECOND},e.formatServerTime=function(t){return(t-e.MINI_DATE_TIME_BASE)/e.MS_PER_SECOND},e.getFormatBySecond=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=2);var r="",i=1e3*e;switch(t){case this.TIME_FORMAT_1:r=this.format_1(i);break;case this.TIME_FORMAT_2:r=this.format_2(i);break;case this.TIME_FORMAT_3:r=this.format_3(i);break;case this.TIME_FORMAT_4:r=this.format_4(i);break;case this.TIME_FORMAT_5:r=this.format_5(i,n);break;case this.TIME_FORMAT_6:r=this.format_6(i);break;case this.TIME_FORMAT_7:r=this.format_7(i);break;case this.TIME_FORMAT_8:r=this.format_8(i);break;case this.TIME_FORMAT_9:r=this.format_9(i);break;case this.TIME_FORMAT_10:r=this.format_10(i);break;case this.TIME_FORMAT_11:r=this.format_11(i);break;case this.TIME_FORMAT_12:r=this.format_12(i);break;case this.TIME_FORMAT_13:r=this.format_13(i);break;case this.TIME_FORMAT_14:r=this.format_14(i);break;case this.TIME_FORMAT_15:r=this.format_15(i)}return r},e.getRenainSecond=function(t){var n=t?new Date(t):new Date,r=e.getTodayZeroSecond(n)+86400-n.getTime()/1e3;return r.toFixed(0)},e.getTodayPassedSecond=function(){var e=new Date,t=((Date.now()-new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime())/1e3).toFixed(0);return parseInt(t)},e.getTodayZeroSecond=function(e){var t=e?e:new Date;return parseInt((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()/1e3).toFixed(0))},e.showWeekFirstDay=function(){var e=new Date,t=e.getDay();t=t?t:7;var n=new Date(e-864e5*(t-1));return n},e.showWeekLastDay=function(){var t=(new Date,e.showWeekFirstDay()),n=new Date(1e3*(t/1e3+518400));return n},e.calcWeekFirstDay=function(){var e=new Date,t=e.getDay();t=t>0?t:7;var n=7-t,r=e.getHours(),i=e.getMinutes(),o=e.getSeconds(),s=86400*n*1e3+864e5-(3600*r*1e3+60*i*1e3+1e3*o);return new Date(s)},e.format_1=function(t){var n=0,r="##:##:##";return n=Math.floor(t/e.MS_PER_HOUR),r=r.replace("##",e.formatTimeNum(n)),n&&(t-=n*e.MS_PER_HOUR),n=Math.floor(t/e.MS_PER_MINUTE),r=r.replace("##",e.formatTimeNum(n)),n&&(t-=n*e.MS_PER_MINUTE),n=Math.floor(t/1e3),r=r.replace("##",e.formatTimeNum(n))},e.format_2=function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),o=t.getHours(),s=t.getMinutes(),a=t.getSeconds();return n+"-"+r+"-"+i+" "+o+":"+s+":"+a},e.format_3=function(e){var t=this.format_1(e),n=t.split(":");return n[1]+":"+n[2]},e.format_4=function(e){return e<this.MS_PER_HOUR?Math.floor(e/this.MS_PER_MINUTE)+"分钟前":e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+"小时前":Math.floor(e/this.MS_PER_DAY)+"天前"},e.format_5=function(e,t){void 0===t&&(t=2);var n="",r=["天","时","分","秒"],i=[],o=Math.floor(e/this.MS_PER_DAY);i.push(o),e-=o*this.MS_PER_DAY;var s=Math.floor(e/this.MS_PER_HOUR);i.push(s),e-=s*this.MS_PER_HOUR;var a=Math.floor(e/this.MS_PER_MINUTE);i.push(a),e-=a*this.MS_PER_MINUTE;var h=Math.floor(e/1e3);i.push(h);for(var u in i)if(i[u]>0&&(n+=this.formatTimeNum(i[u],Number(u))+r[u],t--,0>=t))break;return n},e.format_6=function(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes(),i=t.getSeconds();return this.formatTimeNum(n)+":"+this.formatTimeNum(r)+":"+this.formatTimeNum(i)},e.format_7=function(e){return e<this.MS_PER_HOUR?"<1小时":e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+"小时":Math.floor(e/this.MS_PER_DAY)+"天"},e.format_8=function(e){var t=new Date(e),n=t.getFullYear(),r=t.getMonth()+1,i=t.getDate(),o=t.getHours(),s=t.getMinutes();return n+"-"+r+"-"+i+" "+o+":"+s},e.format_9=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var n=Math.floor(e/this.MS_PER_MINUTE);e-=n*this.MS_PER_MINUTE;var r=Math.floor(e/1e3);return t+"小时"+n+"分钟"+r+"秒"},e.format_10=function(e){var t=Math.floor(e/this.MS_PER_MINUTE);e-=t*this.MS_PER_MINUTE;var n=Math.floor(e/1e3);return t+"分"+n+"秒"},e.format_11=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var n=Math.floor(e/this.MS_PER_MINUTE);e-=n*this.MS_PER_MINUTE;var r=Math.floor(e/1e3);return t+"时"+n+"分"+r+"秒"},e.format_12=function(t){var n=Math.floor(t/this.MS_PER_HOUR);t-=n*this.MS_PER_HOUR;var r=Math.floor(t/this.MS_PER_MINUTE);t-=r*this.MS_PER_MINUTE;var i=Math.floor(t/1e3);return e.formatTimeNum(n)+":"+e.formatTimeNum(r)+":"+e.formatTimeNum(i)},e.format_13=function(t){var n=new Date(t),r=(n.getFullYear(),n.getMonth()+1),i=n.getDay(),o=n.getDate(),s=n.getHours(),a=n.getMinutes();return r+"月"+o+"日(周"+this.WEEK_CN[i]+") "+e.formatTimeNum(s)+":"+e.formatTimeNum(a)},e.format_14=function(e){var t=new Date(e),n=t.getHours(),r=t.getMinutes();return n+"时"+r+"分"},e.format_15=function(t){var n=new Date(t),r=n.getMonth()+1,i=n.getDate(),o=n.getHours(),s=n.getMinutes();return e.formatTimeNum(r)+"-"+e.formatTimeNum(i)+" "+e.formatTimeNum(o)+":"+e.formatTimeNum(s)},e.formatTimeNum=function(e,t){return e>=10?e.toString():0==t?e.toString():"0"+e},e.checkTime=function(e,t){var n=(new Date).getTime(),r=e>n+t*this.MS_PER_DAY;return r},e.formatFullTime=function(e){var t,n,r=new Date(e),i=r.getFullYear(),o=r.getMonth()+1,s=r.getDate(),a=r.getDay(),h=r.getHours();n=10>h?"0"+h:h.toString();var u,c=r.getMinutes();u=10>c?"0"+c:c.toString();var l;switch(a){case 1:l="Monday";break;case 2:l="Tuesday";break;case 3:l="Wednesday";break;case 4:l="Thursday";break;case 5:l="Friday";break;case 6:l="Saturday";break;case 0:l="Sunday"}return t=i+"years"+o+"month"+s+"day（"+l+"） "+n+":"+u},e.formatStrTimeToMs=function(e){var t=new Date,n=e.split(".");t.setFullYear(n[0]),t.setMonth(+n[1]-1);var r=n[2].split("-");t.setDate(r[0]);var i=r[1].split(":");return t.setHours(i[0]),t.setMinutes(i[1]),t.setSeconds(0),t.getTime()},e.TIME_FORMAT_1=1,e.TIME_FORMAT_2=2,e.TIME_FORMAT_3=3,e.TIME_FORMAT_4=4,e.TIME_FORMAT_5=5,e.TIME_FORMAT_6=6,e.TIME_FORMAT_7=7,e.TIME_FORMAT_8=8,e.TIME_FORMAT_9=9,e.TIME_FORMAT_10=10,e.TIME_FORMAT_11=11,e.TIME_FORMAT_12=12,e.TIME_FORMAT_13=13,e.TIME_FORMAT_14=14,e.TIME_FORMAT_15=15,e.MS_PER_SECOND=1e3,e.MS_PER_MINUTE=6e4,e.MS_PER_HOUR=36e5,e.MS_PER_DAY=864e5,e.SECOND_PER_HOUR=3600,e.SECOND_PER_DAY=86400,e.SECOND_PER_MONTH=2592e3,e.SECOND_PER_YEAR=31104e3,e.DAYS_PER_WEEK=7,e.YEAR_PER_YEAR=1,e.MONTH_PER_YEAR=12,e.DAYS_PER_MONTH=30,e.HOURS_PER_DAY=24,e.MUNITE_PER_HOUR=60,e.SECOND_PER_MUNITE=60,e.SECOND_PER_SECOND=1,e.SECOND_2010=1262275200,e.mod=[e.SECOND_PER_MUNITE,e.MUNITE_PER_HOUR,e.HOURS_PER_DAY,e.DAYS_PER_MONTH,e.MONTH_PER_YEAR,e.YEAR_PER_YEAR],e.mul=[e.SECOND_PER_SECOND,e.SECOND_PER_MUNITE,e.SECOND_PER_HOUR,e.SECOND_PER_DAY,e.SECOND_PER_MONTH,e.SECOND_PER_YEAR],e.MINI_DATE_TIME_BASE=Date.UTC(2010,0)+(new Date).getTimezoneOffset()*e.MS_PER_MINUTE,e.TIME_ZONE_OFFSET=8*e.MS_PER_HOUR,e.TO_SECOND=0,e.TO_MINUTE=1,e.TO_HOUR=2,e.TO_DAY=3,e.TO_MONTH=4,e.TO_YEAR=5,e.FORMAT_1=["秒","分","时","天","月","年"],e.FORMAT_2=[":",":",":",":",":",":"],e.WEEK_CN=["日","一","二","三","四","五","六"],e.STYLE_1=new DateStyle(e.FORMAT_1,e.TO_SECOND,e.TO_HOUR,!1),e.STYLE_2=new DateStyle(e.FORMAT_1,e.TO_SECOND,e.TO_DAY,!1),e.STYLE_3=new DateStyle(e.FORMAT_2,e.TO_SECOND,e.TO_HOUR,!0),e.STYLE_4=new DateStyle(e.FORMAT_1,e.TO_SECOND,e.TO_MINUTE,!0),e}();__reflect(DateUtils.prototype,"DateUtils");var DebugUtils=function(){function e(){}return Object.defineProperty(e,"isDebug",{get:function(){return!0},enumerable:!0,configurable:!0}),e.log=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.isDebug&&egret.log.apply(egret,[t].concat(n))},e.warn=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e.isDebug&&egret.warn.apply(egret,[t].concat(n))},e.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];egret.error.apply(egret,[e].concat(t))},e}();__reflect(DebugUtils.prototype,"DebugUtils");var debug={log:DebugUtils.log,warn:DebugUtils.warn,error:DebugUtils.error},DeviceUtils=function(){function e(){}return Object.defineProperty(e,"IsHtml5",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.WEB},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsNative",{get:function(){return egret.Capabilities.runtimeType==egret.RuntimeType.NATIVE},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsMobile",{get:function(){return egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsPC",{get:function(){return!egret.Capabilities.isMobile},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsQQBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MQQBrowser")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsIEBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("MSIE")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsFirefoxBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Firefox")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsChromeBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Chrome")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsSafariBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Safari")},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IsOperaBrowser",{get:function(){return this.IsHtml5&&-1!=navigator.userAgent.indexOf("Opera")},enumerable:!0,configurable:!0}),e}();__reflect(DeviceUtils.prototype,"DeviceUtils");var Dictionary=function(){function e(){this._keys=[],this._values=[]}return Object.defineProperty(e.prototype,"values",{get:function(){return this._values},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){return this._keys},enumerable:!0,configurable:!0}),e.prototype.setKeyValue=function(e,t){var n=this._keys.indexOf(e);return n>=0?void(this._values[n]=t):(this._keys.push(e),void this._values.push(t))},e.prototype.getValue=function(e){var t=this._keys.indexOf(e);return 0>t?null:this._values[t]},e.prototype.remove=function(e){var t=this._keys.indexOf(e);return t>=0?(this._keys.splice(t,1),this._values.splice(t,1),!0):!1},e.prototype.clear=function(){this._values.length=0,this._keys.length=0},e}();__reflect(Dictionary.prototype,"Dictionary");var DirUtil=function(){function e(){}return e.get8DirBy2Point=function(e,t){var n=MathUtils.getAngle(MathUtils.getRadian2(e.x,e.y,t.x,t.y));return this.angle2dir(n)},e.get4DirBy2Point=function(e,t){return e.x<t.x?e.y<t.y?3:1:e.y<t.y?5:7},e.dir2angle=function(e){return e*=45,e-=90},e.angle2dir=function(e){return-90>e&&(e+=360),Math.round((e+90)/45)%8},e.dirOpposit=function(e){return 4>e?e+4:e-4},e.get5DirBy8Dir=function(e){return e-this.isScaleX(e)},e.isScaleX=function(e){var t=2*(e-4);return 0>t&&(t=0),t},e}();__reflect(DirUtil.prototype,"DirUtil");var DisplayUtils=function(){function e(){}return e.setShakeOn=function(e){this.openShake=e},e.createBitmap=function(e){var t=new egret.Bitmap,n=RES.getRes(e);return t.texture=n,t},e.createEuiImage=function(e){var t=new eui.Image,n=RES.getRes(e);return t.source=n,t},e.removeFromParent=function(e){e&&null!=e.parent&&e.parent.removeChild(e)},e.shakeIt=function(t,n,r,i,o){if(void 0===i&&(i=1),void 0===o&&(o=function(){return!0}),this.openShake&&t&&!(1>i)&&o()){var s=[{anchorOffsetX:0,anchorOffsetY:-n},{anchorOffsetX:0,anchorOffsetY:+n},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var a=r/s.length;egret.Tween.get(t).to(s[0],a).to(s[1],a).to(s[2],a).call(function(){e.shakeIt(t,n,r,--i)},this)}},e.shakeItHeji=function(t,n,r,i,o){if(void 0===i&&(i=1),void 0===o&&(o=function(){return!0}),this.openShake&&t&&!(1>i)&&o()){var s=[{anchorOffsetX:.1*+n,anchorOffsetY:+n},{anchorOffsetX:.1*-n,anchorOffsetY:-n},{anchorOffsetX:.1*+n,anchorOffsetY:+n},{anchorOffsetX:.1*-n,anchorOffsetY:-n},{anchorOffsetX:.1*(+n>>1),anchorOffsetY:+n>>1},{anchorOffsetX:.1*(-n>>1),anchorOffsetY:-n>>1},{anchorOffsetX:.1*(+n>>2),anchorOffsetY:+n>>2},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(t);var a=r/s.length;egret.Tween.get(t).to(s[0],a).to(s[1],a).to(s[2],a).to(s[3],a).to(s[4],a).to(s[5],a).to(s[6],a).to(s[7],a).call(function(){e.shakeIt(t,n,r,--i)},this)}},e.shakeItEntity=function(e,t,n,r,i){var o=this;if(void 0===r&&(r=1),void 0===i&&(i=function(){return!0}),this.openShake&&e&&!(1>r)&&i()){var s=[{anchorOffsetX:0,anchorOffsetY:-t},{anchorOffsetX:-t,anchorOffsetY:0},{anchorOffsetX:t,anchorOffsetY:0},{anchorOffsetX:0,anchorOffsetY:t},{anchorOffsetX:0,anchorOffsetY:0}];egret.Tween.removeTweens(e);var a=n/5;egret.Tween.get(e).to(s[0],a).to(s[1],a).to(s[2],a).to(s[3],a).to(s[4],a).call(function(){o.shakeIt(e,t,n,--r)},this)}},e.drawCir=function(e,t,n,r){function i(){e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.moveTo(0,0),e.graphics.lineTo(t,0),e.graphics.drawArc(0,0,t,0,n*Math.PI/180,r),e.graphics.lineTo(0,0),e.graphics.endFill()}return null==e&&(e=new egret.Shape),i(),e},e.drawrect=function(e,t,n,r){function i(){e.graphics.clear(),e.graphics.beginFill(65535,1),e.graphics.drawRect(0,0,t,n),e.graphics.endFill()}return null==e&&(e=new egret.Shape),i(),e},e.scrollerToBottom=function(e){e.viewport.validateNow(),e.viewport.contentHeight>e.height&&(e.viewport.scrollV=e.viewport.contentHeight-e.height)},e.openShake=!0,e.shakingList={},e}();__reflect(DisplayUtils.prototype,"DisplayUtils");var FilterUtil=function(){function e(){}return Object.defineProperty(e,"grayFilter",{get:function(){return new egret.ColorMatrixFilter([.3,.6,0,0,0,.3,.6,0,0,0,.3,.6,0,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"grayFilter1",{get:function(){return new egret.ColorMatrixFilter([.3086,.5,.082,0,0,.3086,.5,.082,0,0,.3086,.5,.082,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ARRAY_GRAY_FILTER",{get:function(){return[e.grayFilter1]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"greenFilter",{get:function(){return new egret.ColorMatrixFilter([1,0,0,0,0,0,1,0,0,100,0,0,1,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"greenFilter1",{get:function(){return new egret.ColorMatrixFilter([.1,0,0,0,0,0,.80078125,0,0,20,0,0,-1,0,0,0,0,0,1,0])},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ARRAY_GREEN_FILTER",{get:function(){return[e.greenFilter1]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"blurFilter",{get:function(){return new egret.BlurFilter(10,10,2)},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ARRAY_BLUR_FILTER",{get:function(){return[e.blurFilter]},enumerable:!0,configurable:!0}),e}();__reflect(FilterUtil.prototype,"FilterUtil");var GameLoadingUI=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.visible=!1;var e=this;setTimeout(function(){e.visible=!0},500),this.progressPane=new eui.Group,this.addChild(this.progressPane),this.height=this.progressPane.height=100,this.width=this.progressPane.width=670,this.horizontalCenter=0,this.bottom=100,this.progress=new eui.Image,this.progress.source=RES_RESOURCE+"loading/bar5.png",this.progress.anchorOffsetX=0,this.progress.x=45,this.progress.y=40,this.progressPane.addChild(this.progress),this.progressBg2=new eui.Image,this.progressBg2.source=RES_RESOURCE+"loading/bar2.png",this.progressBg2.scale9Grid=new egret.Rectangle(12,8,5,5),this.progressBg2.x=0,this.progressBg2.y=30,this.progressPane.addChild(this.progressBg2),this.progressMask=new eui.Rect(0,36,16711680),this.progressMask.width=0,this.progressMask.anchorOffsetX=0,this.progressMask.x=this.progress.x,this.progressMask.y=this.progress.y-1,this.progressPane.addChild(this.progressMask),this.progress.mask=this.progressMask,this.progressText=new eui.Label,this.progressText.height=20,this.progressText.textAlign=egret.HorizontalAlign.CENTER,this.progressText.horizontalCenter=0,this.progressText.y=this.progress.y-2,this.progressText.size=20,this.progressPane.addChild(this.progressText)},t.GetInstance=function(){return this.instance||(this.instance=new t),this.instance},t.prototype.show=function(e){e.visible=!0,e.addChild(this)},t.prototype.close=function(){this.visible=!1,this.parent&&this.parent.addChild(this),egret.Tween.removeTweens(this.progressMask)},t.prototype.setProgress=function(e,t,n){var r=560*e/100;egret.Tween.removeTweens(this.progressMask),n&&0>=n?this.progressMask.width=r:egret.Tween.get(this.progressMask).to({width:r},0),this.progressText.text=Math.floor(e)+"%",100==e&&(this.visible=!1)},t}(eui.Group);__reflect(GameLoadingUI.prototype,"GameLoadingUI");var KeyboardUtils=function(e){function t(){var t=e.call(this)||this;
t.key_ups=new Array,t.key_downs=new Array;var n=t;return document.addEventListener("keyup",function(e){for(var t=0,r=n.key_ups.length;r>t;t++){var i=n.key_ups[t][0],o=n.key_ups[t][1];o?i.call(o,e.keyCode):i(e.keyCode)}}),document.addEventListener("keydown",function(e){for(var t=0,r=n.key_downs.length;r>t;t++){var i=n.key_downs[t][0],o=n.key_downs[t][1];o?i.call(o,e.keyCode):i(e.keyCode)}}),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addKeyUp=function(e,t){this.key_ups.push([e,t])},t.prototype.addKeyDown=function(e,t){this.key_downs.push([e,t])},t.prototype.removeKeyUp=function(e,t){for(var n=0;n<this.key_ups.length;n++)this.key_ups[n][0]==e&&this.key_ups[n][1]==t&&(this.key_ups.splice(n,1),n--)},t.prototype.removeKeyDown=function(e,t){for(var n=0;n<this.key_downs.length;n++)this.key_downs[n][0]==e&&this.key_downs[n][1]==t&&(this.key_downs.splice(n,1),n--)},t}(BaseClass);__reflect(KeyboardUtils.prototype,"KeyboardUtils");var KeyCode=function(){function e(){}return e.KC_1=49,e.KC_2=50,e.KC_3=51,e.KC_4=52,e.KC_5=53,e.KC_6=54,e.KC_7=55,e.KC_8=56,e.KC_9=57,e.KC_0=48,e.KC_A=65,e.KC_B=66,e.KC_C=67,e.KC_D=68,e.KC_E=69,e.KC_F=70,e.KC_G=71,e.KC_H=72,e.KC_I=73,e.KC_J=74,e.KC_K=75,e.KC_L=76,e.KC_M=77,e.KC_N=78,e.KC_O=79,e.KC_P=80,e.KC_Q=81,e.KC_R=82,e.KC_S=83,e.KC_T=84,e.KC_U=85,e.KC_V=86,e.KC_W=87,e.KC_X=88,e.KC_Y=89,e.KC_Z=90,e.KC_F1=112,e.KC_F2=113,e.KC_F3=114,e.KC_F4=115,e.KC_F5=116,e.KC_F6=117,e.KC_F7=118,e.KC_F8=119,e.KC_F9=120,e.KC_F10=121,e.KC_F11=122,e.KC_F12=123,e.KC_F13=124,e.KC_F14=125,e.KC_F15=126,e.KC_NUMPAD_0=96,e.KC_NUMPAD_1=97,e.KC_NUMPAD_2=98,e.KC_NUMPAD_3=99,e.KC_NUMPAD_4=100,e.KC_NUMPAD_5=101,e.KC_NUMPAD_6=102,e.KC_NUMPAD_7=103,e.KC_NUMPAD_8=104,e.KC_NUMPAD_9=105,e.KC_NUMPAD_MULTIPLY=106,e.KC_NUMPAD_ADD=107,e.KC_NUMPAD_ENTER=108,e.KC_NUMPAD_SUBTRACT=109,e.KC_NUMPAD_DECIMAL=110,e.KC_NUMPAD_DIVIDE=111,e.KC_BACKSPACE=8,e.KC_TAB=9,e.KC_ENTER=13,e.KC_SHIFT=16,e.KC_CONTROL=17,e.KC_ESCAPE=27,e.KC_SPACE=32,e.KC_WINDOWS=91,e.KC_MENU=93,e.KC_CAPS_LOCK=20,e.KC_NUM_LOCK=144,e.KC_SCROLL_LOCK=145,e.KC_PAUSE=19,e.KC_PAGE_UP=33,e.KC_PAGE_DOWN=34,e.KC_END=35,e.KC_HOME=36,e.KC_INSERT=45,e.KC_DELETE=46,e.KC_LEFT=37,e.KC_UP=38,e.KC_RIGHT=39,e.KC_DOWN=40,e.KC_SEMICOLON_COLON=186,e.KC_EQUAL_PLUS=187,e.KC_MINUS_UNDERLINE=189,e.KC_SLASH_QUESTIONMARK=191,e.KC_SPECIALCOMMA_EARTHWORM=192,e.KC_LEFT_BRACKET_BRACE=219,e.KC_BACKSLASH_VERTICALBAR=220,e.KC_RIGHT_BRACKET_BRACE=221,e.KC_QUOTE=222,e.KC_COMMA=188,e.KC_PERIOD=190,e}();__reflect(KeyCode.prototype,"KeyCode");var MathUtils=function(){function e(){}return e.getAngle=function(e){return 180*e/Math.PI},e.getRadian=function(e){return e/180*Math.PI},e.getRadian2=function(e,t,n,r){var i=n-e,o=r-t;return Math.atan2(o,i)},e.getDistance=function(e,t,n,r){var i=n-e,o=r-t,s=i*i+o*o;return Math.sqrt(s)},e.getDistanceByObject=function(e,t){return this.getDistance(e.x,e.y,t.x,t.y)},e.getDistanceX2ByObject=function(e,t){var n=e.x-t.x,r=e.y-t.y;return n*n+r*r},e.getDirMove=function(e,t,n,r){void 0===n&&(n=0),void 0===r&&(r=0);var i=this.getRadian(e),o={x:0,y:0};return o.x=Math.cos(i)*t+n,o.y=Math.sin(i)*t+r,o},e.limit=function(e,t){e=Math.min(e,t),t=Math.max(e,t);var n=t-e;return e+Math.random()*n},e.limitInteger=function(e,t){return Math.round(this.limit(e,t))},e.randomArray=function(e){var t=Math.floor(Math.random()*e.length);return e[t]},e.toInteger=function(e){return e>>0},e}();__reflect(MathUtils.prototype,"MathUtils");var md5=function(){function e(){}return e.obj_md5=function(e,t,n,r){void 0===n&&(n=[]),void 0===r&&(r=!0);var i=[];for(var o in e)i.push(o);r&&i.sort();for(var s=[],a=0;a<i.length;a++){var o=i[a];-1==n.indexOf(o)&&s.push(o+"="+e[o])}var h=s.join("&");return this.hex_md5(h+(t?"&"+t:""))},e.obj_md5_args=function(e,t,n,r,i){void 0===r&&(r=[]),void 0===i&&(i=!0);var o=[];for(var s in e)o.push(s);i&&o.sort();for(var a=[],h=0;h<o.length;h++){var s=o[h];-1==r.indexOf(s)&&a.push(s+"="+e[s])}var u=a.join("&");n&&(u+="&sign="+this.hex_md5(u+(t?"&"+t:"")));for(var h=0;h<r.length;h++){var c=r[h];u+="&"+c+"="+e[c]}return u},e.hex_md5=function(e){return this.rstr2hex(this.rstr_md5(this.str2rstr_utf8(e)))},e.b64_md5=function(e){return this.rstr2b64(this.rstr_md5(this.str2rstr_utf8(e)))},e.any_md5=function(e,t){return this.rstr2any(this.rstr_md5(this.str2rstr_utf8(e)),t)},e.hex_hmac_md5=function(e,t){return this.rstr2hex(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.b64_hmac_md5=function(e,t){return this.rstr2b64(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)))},e.any_hmac_md5=function(e,t,n){return this.rstr2any(this.rstr_hmac_md5(this.str2rstr_utf8(e),this.str2rstr_utf8(t)),n)},e.md5_vm_test=function(){return"900150983cd24fb0d6963f7d28e17f72"==this.hex_md5("abc").toLowerCase()},e.rstr_md5=function(e){return this.binl2rstr(this.binl_md5(this.rstr2binl(e),8*e.length))},e.rstr_hmac_md5=function(e,t){var n=this.rstr2binl(e);n.length>16&&(n=this.binl_md5(n,8*e.length));for(var r=Array(16),i=Array(16),o=0;16>o;o++)r[o]=909522486^n[o],i[o]=1549556828^n[o];var s=this.binl_md5(r.concat(this.rstr2binl(t)),512+8*t.length);return this.binl2rstr(this.binl_md5(i.concat(s),640))},e.rstr2hex=function(e){try{this.hexcase}catch(t){this.hexcase=0}for(var n,r=this.hexcase?"0123456789ABCDEF":"0123456789abcdef",i="",o=0;o<e.length;o++)n=e.charCodeAt(o),i+=r.charAt(n>>>4&15)+r.charAt(15&n);return i},e.rstr2b64=function(e){try{this.b64pad}catch(t){this.b64pad=""}for(var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r="",i=e.length,o=0;i>o;o+=3)for(var s=e.charCodeAt(o)<<16|(i>o+1?e.charCodeAt(o+1)<<8:0)|(i>o+2?e.charCodeAt(o+2):0),a=0;4>a;a++)r+=8*o+6*a>8*e.length?this.b64pad:n.charAt(s>>>6*(3-a)&63);return r},e.rstr2any=function(e,t){var n,r,i,o,s,a=t.length,h=Array(Math.ceil(e.length/2));for(n=0;n<h.length;n++)h[n]=e.charCodeAt(2*n)<<8|e.charCodeAt(2*n+1);var u=Math.ceil(8*e.length/(Math.log(t.length)/Math.log(2))),c=Array(u);for(r=0;u>r;r++){for(s=Array(),o=0,n=0;n<h.length;n++)o=(o<<16)+h[n],i=Math.floor(o/a),o-=i*a,(s.length>0||i>0)&&(s[s.length]=i);c[r]=o,h=s}var l="";for(n=c.length-1;n>=0;n--)l+=t.charAt(c[n]);return l},e.str2rstr_utf8=function(e){for(var t,n,r="",i=-1;++i<e.length;)t=e.charCodeAt(i),n=i+1<e.length?e.charCodeAt(i+1):0,t>=55296&&56319>=t&&n>=56320&&57343>=n&&(t=65536+((1023&t)<<10)+(1023&n),i++),127>=t?r+=String.fromCharCode(t):2047>=t?r+=String.fromCharCode(192|t>>>6&31,128|63&t):65535>=t?r+=String.fromCharCode(224|t>>>12&15,128|t>>>6&63,128|63&t):2097151>=t&&(r+=String.fromCharCode(240|t>>>18&7,128|t>>>12&63,128|t>>>6&63,128|63&t));return r},e.str2rstr_utf16le=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(255&e.charCodeAt(n),e.charCodeAt(n)>>>8&255);return t},e.str2rstr_utf16be=function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e.charCodeAt(n)>>>8&255,255&e.charCodeAt(n));return t},e.rstr2binl=function(e){for(var t=Array(e.length>>2),n=0;n<t.length;n++)t[n]=0;for(var n=0;n<8*e.length;n+=8)t[n>>5]|=(255&e.charCodeAt(n/8))<<n%32;return t},e.binl2rstr=function(e){for(var t="",n=0;n<32*e.length;n+=8)t+=String.fromCharCode(e[n>>5]>>>n%32&255);return t},e.binl_md5=function(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,s=0;s<e.length;s+=16){var a=n,h=r,u=i,c=o;n=this.md5_ff(n,r,i,o,e[s+0],7,-680876936),o=this.md5_ff(o,n,r,i,e[s+1],12,-389564586),i=this.md5_ff(i,o,n,r,e[s+2],17,606105819),r=this.md5_ff(r,i,o,n,e[s+3],22,-1044525330),n=this.md5_ff(n,r,i,o,e[s+4],7,-176418897),o=this.md5_ff(o,n,r,i,e[s+5],12,1200080426),i=this.md5_ff(i,o,n,r,e[s+6],17,-1473231341),r=this.md5_ff(r,i,o,n,e[s+7],22,-45705983),n=this.md5_ff(n,r,i,o,e[s+8],7,1770035416),o=this.md5_ff(o,n,r,i,e[s+9],12,-1958414417),i=this.md5_ff(i,o,n,r,e[s+10],17,-42063),r=this.md5_ff(r,i,o,n,e[s+11],22,-1990404162),n=this.md5_ff(n,r,i,o,e[s+12],7,1804603682),o=this.md5_ff(o,n,r,i,e[s+13],12,-40341101),i=this.md5_ff(i,o,n,r,e[s+14],17,-1502002290),r=this.md5_ff(r,i,o,n,e[s+15],22,1236535329),n=this.md5_gg(n,r,i,o,e[s+1],5,-165796510),o=this.md5_gg(o,n,r,i,e[s+6],9,-1069501632),i=this.md5_gg(i,o,n,r,e[s+11],14,643717713),r=this.md5_gg(r,i,o,n,e[s+0],20,-373897302),n=this.md5_gg(n,r,i,o,e[s+5],5,-701558691),o=this.md5_gg(o,n,r,i,e[s+10],9,38016083),i=this.md5_gg(i,o,n,r,e[s+15],14,-660478335),r=this.md5_gg(r,i,o,n,e[s+4],20,-405537848),n=this.md5_gg(n,r,i,o,e[s+9],5,568446438),o=this.md5_gg(o,n,r,i,e[s+14],9,-1019803690),i=this.md5_gg(i,o,n,r,e[s+3],14,-187363961),r=this.md5_gg(r,i,o,n,e[s+8],20,1163531501),n=this.md5_gg(n,r,i,o,e[s+13],5,-1444681467),o=this.md5_gg(o,n,r,i,e[s+2],9,-51403784),i=this.md5_gg(i,o,n,r,e[s+7],14,1735328473),r=this.md5_gg(r,i,o,n,e[s+12],20,-1926607734),n=this.md5_hh(n,r,i,o,e[s+5],4,-378558),o=this.md5_hh(o,n,r,i,e[s+8],11,-2022574463),i=this.md5_hh(i,o,n,r,e[s+11],16,1839030562),r=this.md5_hh(r,i,o,n,e[s+14],23,-35309556),n=this.md5_hh(n,r,i,o,e[s+1],4,-1530992060),o=this.md5_hh(o,n,r,i,e[s+4],11,1272893353),i=this.md5_hh(i,o,n,r,e[s+7],16,-155497632),r=this.md5_hh(r,i,o,n,e[s+10],23,-1094730640),n=this.md5_hh(n,r,i,o,e[s+13],4,681279174),o=this.md5_hh(o,n,r,i,e[s+0],11,-358537222),i=this.md5_hh(i,o,n,r,e[s+3],16,-722521979),r=this.md5_hh(r,i,o,n,e[s+6],23,76029189),n=this.md5_hh(n,r,i,o,e[s+9],4,-640364487),o=this.md5_hh(o,n,r,i,e[s+12],11,-421815835),i=this.md5_hh(i,o,n,r,e[s+15],16,530742520),r=this.md5_hh(r,i,o,n,e[s+2],23,-995338651),n=this.md5_ii(n,r,i,o,e[s+0],6,-198630844),o=this.md5_ii(o,n,r,i,e[s+7],10,1126891415),i=this.md5_ii(i,o,n,r,e[s+14],15,-1416354905),r=this.md5_ii(r,i,o,n,e[s+5],21,-57434055),n=this.md5_ii(n,r,i,o,e[s+12],6,1700485571),o=this.md5_ii(o,n,r,i,e[s+3],10,-1894986606),i=this.md5_ii(i,o,n,r,e[s+10],15,-1051523),r=this.md5_ii(r,i,o,n,e[s+1],21,-2054922799),n=this.md5_ii(n,r,i,o,e[s+8],6,1873313359),o=this.md5_ii(o,n,r,i,e[s+15],10,-30611744),i=this.md5_ii(i,o,n,r,e[s+6],15,-1560198380),r=this.md5_ii(r,i,o,n,e[s+13],21,1309151649),n=this.md5_ii(n,r,i,o,e[s+4],6,-145523070),o=this.md5_ii(o,n,r,i,e[s+11],10,-1120210379),i=this.md5_ii(i,o,n,r,e[s+2],15,718787259),r=this.md5_ii(r,i,o,n,e[s+9],21,-343485551),n=this.safe_add(n,a),r=this.safe_add(r,h),i=this.safe_add(i,u),o=this.safe_add(o,c)}return[n,r,i,o]},e.md5_cmn=function(e,t,n,r,i,o){return this.safe_add(this.bit_rol(this.safe_add(this.safe_add(t,e),this.safe_add(r,o)),i),n)},e.md5_ff=function(e,t,n,r,i,o,s){return this.md5_cmn(t&n|~t&r,e,t,i,o,s)},e.md5_gg=function(e,t,n,r,i,o,s){return this.md5_cmn(t&r|n&~r,e,t,i,o,s)},e.md5_hh=function(e,t,n,r,i,o,s){return this.md5_cmn(t^n^r,e,t,i,o,s)},e.md5_ii=function(e,t,n,r,i,o,s){return this.md5_cmn(n^(t|~r),e,t,i,o,s)},e.safe_add=function(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n},e.bit_rol=function(e,t){return e<<t|e>>>32-t},e.hexcase=0,e.b64pad="",e}();__reflect(md5.prototype,"md5");var PageArray=function(){function e(e,t){void 0===t&&(t=20),this.dataSource=e,this.size=t,this.currentPage=0,this.setPageData()}return Object.defineProperty(e.prototype,"length",{get:function(){return this.dataSource.length},enumerable:!0,configurable:!0}),e.prototype.setPageData=function(){this.pageData=[];for(var e=this.currentPage*this.size,t=(this.currentPage+1)*this.size,n=Math.min(this.length,t),r=e;n>r;r++)this.pageData.push(this.dataSource[r])},e.prototype.getDataSource=function(){return this.dataSource},Object.defineProperty(e.prototype,"totalPage",{get:function(){return Math.ceil(this.length/this.size)},enumerable:!0,configurable:!0}),e.prototype.havePre=function(){return 0!=this.currentPage},e.prototype.haveNext=function(){return this.currentPage<this.totalPage-1},e.prototype.prev=function(){this.currentPage--,this.setPageData()},e.prototype.next=function(){this.currentPage++,this.setPageData()},e.prototype.first=function(){this.currentPage=0,this.setPageData()},e.prototype.last=function(){this.currentPage=this.totalPage-1,this.setPageData()},e.prototype.gotoPage=function(e){this.totalPage<e||(this.currentPage=e-1,this.setPageData())},e}();__reflect(PageArray.prototype,"PageArray");var RegExpUtil=function(){function e(){}return e.LINE_BREAK=/\r+/g,e.BLANK_REG=/[\s\\]/g,e.ARGB_COLOR=/[a-fA-F0-9]{8}/,e.HTML=/<[^>]+>/g,e.DELETE_SPACE=/\s/g,e.REPLACE_STRING=/%s/g,e.NumericExp=/^\d+$/,e.NonNumericExp=/\D/,e.ActorNameExp=/^([\u4e00-\u9fa5]?\w?[^>|!@#$%&*\^\?]){1,48}$/,e}();__reflect(RegExpUtil.prototype,"RegExpUtil");var ResourceUtils=function(e){function t(){var t=e.call(this)||this;return t._groupIndex=0,t._configs=new Array,t._groups={},t._urlResorce={},RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE,t.onResourceLoadComplete,t),RES.addEventListener(RES.ResourceEvent.GROUP_PROGRESS,t.onResourceLoadProgress,t),RES.addEventListener(RES.ResourceEvent.GROUP_LOAD_ERROR,t.onResourceLoadError,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addConfig=function(e,t){this._configs.push([e,t])},t.prototype.loadConfig=function(e,t){this._onConfigComplete=e,this._onConfigCompleteTarget=t,this.loadNextConfig()},t.prototype.loadNextConfig=function(){if(0==this._configs.length)return this._onConfigComplete.call(this._onConfigCompleteTarget),this._onConfigComplete=null,void(this._onConfigCompleteTarget=null);var e=this._configs.shift();RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),RES.loadConfig(e[0],e[1])},t.prototype.onConfigCompleteHandle=function(e){RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE,this.onConfigCompleteHandle,this),this.loadNextConfig()},t.prototype.loadGroup=function(e,t,n,r){this._groups[e]=[t,n,r],RES.loadGroup(e)},t.prototype.loadUIGroup=function(e){RES.loadGroup(e)},t.prototype.loadGroups=function(e,t,n,r,i){RES.createGroup(e,t,!0),this.loadGroup(e,n,r,i)},t.prototype.pilfererLoadGroup=function(e,t){void 0===t&&(t=null);var n="pilferer_"+e;t||(t=[e]),RES.createGroup(n,t,!0),RES.loadGroup(n,-1)},t.prototype.onResourceLoadComplete=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][0],r=this._groups[t][2];null!=n&&n.call(r),this._groups[t]=null,delete this._groups[t]}},t.prototype.onResourceLoadProgress=function(e){var t=e.groupName;if(this._groups[t]){var n=this._groups[t][1],r=this._groups[t][2];null!=n&&n.call(r,e.itemsLoaded,e.itemsTotal)}},t.prototype.onResourceLoadError=function(e){return debug.log(e.groupName+"资源组有资源加载失败"),"preload"==e.groupName?(GameApp.ins().preload_load_count+=1,1==GameApp.ins().preload_load_count&&Assert(!1,e.groupName+" 资源加载失败!!失败次数："+GameApp.ins().preload_load_count),void(GameApp.ins().preload_load_count<3?RES.loadGroup(e.groupName):alert("资源加载失败，请检查网络重新登录"))):void this.onResourceLoadComplete(e)},t.prototype.loadResource=function(e,t,n,r,i){void 0===e&&(e=[]),void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),void 0===i&&(i=null);var o=e.concat(t),s="loadGroup"+this._groupIndex++;RES.createGroup(s,o,!0),this._groups[s]=[n,r,i],RES.loadGroup(s)},t.prototype.loadUrlResource=function(e,t,n,r){var i=this;null==this._urlResorce[e]?(this._urlResorce[e]={data:null,compFun:n,thisObj:r},RES.getResByUrl(e,function(t){i._urlResorce[e].data=t,null!=n&&n.apply(i._urlResorce[e].thisObj)},this,t)):null!=n&&n.apply(r)},t.prototype.getUrlResource=function(e){return null==this._urlResorce[e]?(debug.log("资源未加载"),null):this._urlResorce[e].data},t}(BaseClass);__reflect(ResourceUtils.prototype,"ResourceUtils");var StageUtils=function(e){function t(){var n=e.call(this)||this;return null==t._uiStage&&(t._uiStage=new eui.UILayer,t._uiStage.touchEnabled=!1,t._uiStage.percentHeight=100,t._uiStage.percentWidth=100,n.getStage().addChild(t._uiStage)),n}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getHeight=function(){return this.getStage().stageHeight},t.prototype.getWidth=function(){return this.getStage().stageWidth},t.prototype.setTouchChildren=function(e){this.getStage().touchChildren=e},t.prototype.setMaxTouches=function(e){this.getStage().maxTouches=e},t.prototype.setFrameRate=function(e){this.getStage().frameRate=e},t.prototype.setScaleMode=function(e){this.getStage().scaleMode=e},t.prototype.getStage=function(){return egret.MainContext.instance.stage},t.prototype.getUIStage=function(){return t._uiStage},t.getScaleMode=function(){if(t.isIphoneX())return egret.StageScaleMode.FIXED_WIDTH;var e=window.innerHeight/window.innerWidth,n=1.4,r=1.8,i="";return n>=e?i=egret.StageScaleMode.FIXED_HEIGHT:e>n&&r>e&&(i=egret.StageScaleMode.FIXED_WIDTH),i},t.isIphoneX=function(){return 812==window.innerHeight&&375==window.innerWidth},t.init=function(){this.changeStageSize(),window.addEventListener("resize",this.changeStageSize)},t.changeStageSize=function(){var e=this;egret.setTimeout(function(){var n=t.getScaleMode();e.lastOrientation!=window.orientation&&(document.body.style.height="100%",e.lastOrientation=window.orientation),t.ins().getStage().scaleMode=n},this,500)},t}(BaseClass);__reflect(StageUtils.prototype,"StageUtils");var StringUtils=function(){function e(){}return e.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.getStringLength=function(e){for(var t=e.split(""),n=0,r=0;r<t.length;r++){var i=t[r];n+=this.isChinese(i)?2:1}return n},e.isChinese=function(e){var t=/^[\u4E00-\u9FA5]+$/;return t.test(e)?!1:!0},e.strByteLen=function(e){for(var t=0,n=e.length,r=0;n>r;r++)t+=e.charCodeAt(r)>=127?2:1;return t},e.complementByChar=function(t,n,r,i){void 0===r&&(r=" "),void 0===i&&(i=!0);var o=this.strByteLen(i?t.replace(e.HTML,""):t);return t+this.repeatStr(r,n-o)},e.repeatStr=function(e,t){for(var n="",r=0;t>r;r++)n+=e;return n},e.addColor=function(e,t){var n;return"string"==typeof t?n=String(t):"number"==typeof t&&(n=Number(t).toString(10)),'<font color="'+n+'">'+e+"</font>"},e.addColor1=function(e,t){var n=new Object;return n.style=new Object,n.text=e,n.textColor=Number(t).toString(16),n},e.substitute=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=RegExpUtil.REPLACE_STRING,i=e.match(r);if(i&&i.length)for(var o=i.length,s=0;o>s;s++)e=e.replace(i[s],t[s]);return e},e.replaceStr=function(e,t,n){if(-1==e.indexOf(t))return e;var r=e.split(t);return r[0]+n+r[1]},e.replaceStrColor=function(e,t){for(var n=e.indexOf("0x"),r=n,i="",o="";-1!=r;)i=e.substring(n,n+8),e=e.replace(i,t),n+=8,o=e.substring(n),r=o.indexOf("0x"),n+=r;return e},e.replace=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++)e=e.replace("%s",t[r]+"");return e},e.getStrByRegExp=function(e,t){void 0===t&&(t=/\d+/g);var n=[];e.replace(t,function(){return n.push(arguments[0]),"number"==typeof arguments[0]?arguments[0].toString():arguments[0]});return n},e.ChineseToNumber=function(t){for(var n=0,r=0,i=0,o=!1,s=t.split(""),a=0;a<s.length;a++){var h=e.chnNumCharCN[s[a]];if("undefined"!=typeof h)i=h,a===s.length-1&&(r+=i);else{var u=e.chnNameValueCN[s[a]].value;o=e.chnNameValueCN[s[a]].secUnit,o?(r=(r+i)*u,n+=r,r=0):r+=i*u,i=0}}return n+r},e.NumberToChinese=function(t){var n=0,r="",i="",o=!1,s=e.chnNumChar,a=e.chnUnitSection;if(0===t)return s[0];for(;t>0;){var h=t%1e4;o&&(i=s[0]+i),r=e.SectionToChinese(h),r+=0!==h?a[n]:a[0],i=r+i,o=1e3>h&&h>0,t=Math.floor(t/1e4),n++}return i},e.SectionToChinese=function(t){for(var n="",r="",i=0,o=!0,s=e.chnNumChar,a=e.chnUnitChar;t>0;){var h=t%10;0===h?o||(o=!0,r=s[h]+r):(o=!1,n=s[h],n+=a[i],r=n+r),i++,t=Math.floor(t/10)}return r},e.HTML=/<[^>]+>/g,e.chnNumCharCN={"零":0,"一":1,"二":2,"三":3,"四":4,"五":5,"六":6,"七":7,"八":8,"九":9},e.chnNameValueCN={"十":{value:10,secUnit:!1},"百":{value:100,secUnit:!1},"千":{value:1e3,secUnit:!1},"万":{value:1e4,secUnit:!0},"亿":{value:1e8,secUnit:!0}},e.chnNumChar=["零","一","二","三","四","五","六","七","八","九"],e.chnUnitSection=["","万","亿","万亿","亿亿"],e.chnUnitChar=["","十","百","千"],e}();__reflect(StringUtils.prototype,"StringUtils");var TextFlowMaker=function(){function e(){}return e.generateTextFlow=function(t){if(!t)return(new egret.HtmlTextParser).parser("");for(var n,r=t.split("|"),i="",o=0,s=r.length;s>o;o++)i+=e.getSingleTextFlow1(r[o]);try{n=(new egret.HtmlTextParser).parser(i)}catch(a){return debug.log("错误的HTML输入"),(new egret.HtmlTextParser).parser("")}return n},e.generateTextFlow1=function(t){if(!t)return(new egret.HtmlTextParser).parser("");for(var n=t.split("|"),r=[],i=0,o=n.length;o>i;i++){var s=e.getSingleTextFlow(n[i]);s.text&&""!=s.text&&r.push(s)}return r},e.getOnlyName=function(e){if(!e)return"";var t=e.indexOf("<font"),n=e;return-1!=t&&(n=e.slice(0,t)),n},e.getSingleTextFlow1=function(t){var n=t.split("&T:",2);if(2==n.length){for(var r="<font",i=n[0].split("&"),o=void 0,s=!1,a=0,h=i.length;h>a;a++)switch(o=i[a].split(":"),o[0]){case e.STYLE_SIZE:r+=' size="'+Math.floor(+o[1])+'"';break;case e.STYLE_COLOR:r+=' color="'+Math.floor(+o[1])+'"';break;case e.UNDERLINE_TEXT:s=!0}return r+=s?"><u>"+n[1]+"</u></font>":">"+n[1]+"</font>"}return"<font>"+t+"</font>"},e.getSingleTextFlow=function(t){var n=t.split("&T:",2),r={style:{}};if(2==n.length){for(var i=(n[0],t.split("&")),o=void 0,s=0,a=i.length;a>s;s++)switch(o=i[s].split(":"),o[0]){case e.STYLE_SIZE:r.style.size=+o[1];break;case e.STYLE_COLOR:r.style.textColor=+o[1];break;case e.UNDERLINE_TEXT:r.style.underline=!0;break;case e.EVENT:r.style.href="event:"+o[1]}r.text=n[1]}else r.text=t;return r},e.getCStr=function(t){return e.numberList[t]?e.numberList[t]:""},e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e.UNDERLINE_TEXT="U",e.EVENT="E",e.numberList=["Zero","One","Two","Three","Fout","Five","Six","Seven","Eight","Nine","Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen","Twenty"],e}();__reflect(TextFlowMaker.prototype,"TextFlowMaker");var uint64=function(){function e(e){this._lowUint=0,this._highUint=0,this.value=e}return e.prototype.isEqual=function(e){return e?this._lowUint==e._lowUint&&this._highUint==e._highUint:!1},e.prototype.isGreaterThan=function(t){if(t instanceof e)return this._highUint>t._highUint||this._highUint==t._highUint&&this._lowUint>t._lowUint;var n=new e;return"string"==typeof t?(n.value=t,this.isGreaterThanOrEqual(n)):"number"==typeof t?(n.value=t.toString(),this.isGreaterThanOrEqual(n)):void 0},e.prototype.isGreaterThanOrEqual=function(t){if(t instanceof e)return this._highUint>t._highUint||this._highUint==t._highUint&&this._lowUint>=t._lowUint;var n=new e;return"string"==typeof t?(n.value=t,this.isGreaterThanOrEqual(n)):"number"==typeof t?(n.value=t.toString(),this.isGreaterThanOrEqual(n)):void 0},Object.defineProperty(e.prototype,"isZero",{get:function(){return 0==this._lowUint&&0==this._highUint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGreaterThanZero",{get:function(){return this._lowUint>0||this._highUint>0},enumerable:!0,configurable:!0}),e.prototype.writeByte=function(e){e.writeUnsignedInt(this._lowUint),e.writeUnsignedInt(this._highUint)},e.prototype.setValue=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._lowUint=e,this._highUint=t},Object.defineProperty(e.prototype,"value",{set:function(t){t instanceof egret.ByteArray?(this._lowUint=t.readUnsignedInt(),this._highUint=t.readUnsignedInt()):"string"==typeof t&&e.stringToUint64(t,10,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueByString",{set:function(e){},enumerable:!0,configurable:!0}),e.prototype.leftMove=function(t,n){void 0===n&&(n=null),n=n||this;var r=e.LeftMoveMask[t],i=r&this._lowUint;i>>>=32-t,n._lowUint=this._lowUint<<t,n._highUint=this._highUint<<t,n._highUint=n._highUint|i},e.prototype.add=function(t,n){void 0===n&&(n=null),n=n||this;var r=this._lowUint+t._lowUint;n._highUint=this._highUint+t._highUint,r>=e.MaxLowUint?(n._highUint++,n._lowUint=r-e.MaxLowUint):n._lowUint=r},e.prototype.subtraction=function(t,n){void 0===n&&(n=null),n=n||this;var r=this._lowUint-t._lowUint;n._highUint=this._highUint-t._highUint,0>r?(n._highUint--,n._lowUint=r+e.MaxLowUint):n._lowUint=r},e.prototype.scale=function(t,n){void 0===n&&(n=null),n=n||this;var r=this._lowUint*t;n._highUint=this._highUint*t,n._highUint+=Math.floor(Math.abs(r/e.MaxLowUint)),n._lowUint=r%e.MaxLowUint},e.prototype.toString=function(t){void 0===t&&(t=10);for(var n,r,i,o="",s=this._lowUint,a=this._highUint;0!=a||0!=s;)n=a%t,i=n*e.MaxLowUint+s,r=i%t,o=r+o,a=(a-n)/t,s=(i-r)/t;return o.length?o:"0"},e.stringToUint64=function(t,n,r){void 0===n&&(n=10),void 0===r&&(r=null),r=r||new e;for(var i,o,s=0,a=0,h=t.length,u=0;h>u;u++)o=parseInt(t.charAt(u)),i=s*n+o,a=a*n+Math.floor(i/e.MaxLowUint),s=i%e.MaxLowUint;return r.setValue(s,a),r},e.LeftMoveMask=[0,2147483648,1073741824,536870912,268435456,134217728,67108864,33554432,16777216,8388608,4194304,2097152,1048576,524288,262144,131072,65536,32768,16384,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1],e.MaxLowUint=4294967296,e}();__reflect(uint64.prototype,"uint64");var WatcherUtil=function(){function e(){}return e.removeFromArrayCollection=function(t){t&&t.source&&t.source.length&&e.removeFromArray(t.source)},e.removeFromArray=function(t){if(t)for(var n=0,r=t;n<r.length;n++){var i=r[n];e.removeFromObject(i)}},e.removeFromObject=function(e){if(e instanceof egret.EventDispatcher){var t=e.$getEventMap(),n=t[eui.PropertyEvent.PROPERTY_CHANGE];if(n)for(var r=n.length-1;r>=0;r--){var i=n[r];i.thisObject instanceof eui.Watcher&&(i.thisObject.unwatch(),n.splice(r,1))}}else{var o=e.__listeners__;if(o&&o.length)for(var s=0;s<o.length;s+=2){var a=o[s+1];a instanceof eui.Watcher&&(a.unwatch(),s-=2)}}},e}();__reflect(WatcherUtil.prototype,"WatcherUtil");var BaseComponent=function(e){function t(){var t=e.call(this)||this;return t.className="@策划@使用此组件必须填写逻辑类名",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,eui.PropertyEvent.dispatchPropertyEvent(this,eui.PropertyEvent.PROPERTY_CHANGE,"data"),this.dataChanged&&this.dataChanged()},enumerable:!0,configurable:!0}),t.filterKeys=["data"],t.copyKeys=["open","close"],t}(BaseView);__reflect(BaseComponent.prototype,"BaseComponent");var FrameTick=function(){function e(){this.list=[]}return e.prototype.tick=function(e){this.list[e]=TimerManager.ins().getFrameId()},e.prototype.isTick=function(e){return this.list[e]==TimerManager.ins().getFrameId()},e.prototype.checkAndTick=function(e){return this.isTick(e)?!0:(this.tick(e),!1)},e}();__reflect(FrameTick.prototype,"FrameTick");var LoadingUI=function(e){function t(){var t=e.call(this)||this;return t.createView(),t}return __extends(t,e),t.prototype.createView=function(){this.textField=new egret.TextField,this.addChild(this.textField),this.textField.y=300,this.textField.width=480,this.textField.height=100,this.textField.textAlign="center"},t.prototype.onProgress=function(e,t){this.textField.text="Loading..."+e+"/"+t},t}(egret.Sprite);__reflect(LoadingUI.prototype,"LoadingUI",["RES.PromiseTaskReporter"]);var BaseSpriteView=function(e){function t(t){var n=e.call(this)||this;return n._resources=null,n._myParent=t,n._isInit=!1,StageUtils.ins().getStage().addEventListener(egret.Event.RESIZE,n.onResize,n),n}return __extends(t,e),t.prototype.setResources=function(e){this._resources=e},Object.defineProperty(t.prototype,"myParent",{get:function(){return this._myParent},enumerable:!0,configurable:!0}),t.prototype.isInit=function(){return this._isInit},t.prototype.isShow=function(){return null!=this.stage&&this.visible},t.prototype.addToParent=function(){this._myParent.addChild(this)},t.prototype.removeFromParent=function(){DisplayUtils.removeFromParent(this)},t.prototype.initUI=function(){this._isInit=!0},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.destroy=function(){this._myParent=null,this._resources=null},t.prototype.onResize=function(){},t.prototype.loadResource=function(e,t){this._resources&&this._resources.length>0?ResourceUtils.ins().loadResource(this._resources,[],function(){e(),t()},null,this):(e(),t())},t.prototype.setVisible=function(e){this.visible=e},t.openCheck=function(){return!0},t}(egret.DisplayObjectContainer);__reflect(BaseSpriteView.prototype,"BaseSpriteView",["IBaseView"]);var ObjectPool=function(){function e(){this._objs=new Array}return e.prototype.pushObj=function(e){this._objs.push(e)},e.prototype.popObj=function(){return this._objs.length>0?this._objs.pop():null},e.prototype.clear=function(){for(;this._objs.length>0;)this._objs.pop()},e.pop=function(t){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];e._content[t]||(e._content[t]=[]);var i=e._content[t];if(i.length){var o=i.pop();return o}var s=egret.getDefinitionByName(t),a=n.length,h=void 0;return 0==a?h=new s:1==a?h=new s(n[0]):2==a?h=new s(n[0],n[1]):3==a?h=new s(n[0],n[1],n[2]):4==a?h=new s(n[0],n[1],n[2],n[3]):5==a&&(h=new s(n[0],n[1],n[2],n[3],n[4])),h.ObjectPoolKey=t,h},e.popWithExtraKey=function(t,n){e._content[t]||(e._content[t]=[]);var r,i=e._content[t];if(i.length)for(var o=0;o<i.length;o++)if(i[o].extraKey==n){r=i[o],i.splice(o,1);break}if(!r){var s=egret.getDefinitionByName(t);r=new s(n),r.extraKey=n,r.ObjectPoolKey=t}return r},e.push=function(t){if(null==t)return!1;var n=t.ObjectPoolKey;return!e._content[n]||e._content[n].indexOf(t)>-1?!1:(e._content[n].push(t),!0)},e.clear=function(){e._content={}},e.clearClass=function(t,n){void 0===n&&(n=null);for(var r=e._content[t];r&&r.length;){var i=r.pop();n&&i[n](),i=null}e._content[t]=null,delete e._content[t]},e.dealFunc=function(t,n){var r=e._content[t];if(null!=r){var i=0,o=r.length;for(i;o>i;i++)r[i][n]()}},e._content={},e}();__reflect(ObjectPool.prototype,"ObjectPool");var GameApp=function(e){function t(){var t=e.call(this)||this;return t.preload_load_count=0,t.curRoute="",t.curLib="",t.checkResultStr="已检查0个/错误0个/正确率100%",t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.load=function(){GlobalConfig.parserData(),eui.Label.default_fontFamily="微软雅黑",SceneManager.ins().runScene(StartGameScene)},t.prototype.postPerLoadProgress=function(e,t){return[e,t]},t.prototype.postLoginInit=function(){},t.prototype.postZeroInit=function(){},t}(BaseClass);__reflect(GameApp.prototype,"GameApp"),MessageCenter.compile(GameApp);var ErrorLog=function(){function e(){this.stackObj={stack:""}}return e.ins=function(){return this._ins=this._ins||new e,this._ins},e.prototype.show=function(e){var t=function(){DisplayUtils.removeFromParent(this),this.removeTouchEvent(this.notBtn,t)},n=new BaseView;n.skinName="ErrorSkin",n.notBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t,n),n.lab.text=e,StageUtils.ins().getUIStage().addChild(n)},e.Assert=function(t,n){return t?!1:(n+=e.ins().getErrorStackInfo(),debug.log(n),!0)},e.prototype.getErrorStackInfo=function(){var t="";try{Error.captureStackTrace(this.stackObj,e.Assert),t="----"+this.stackObj.stack,this.stackObj.stack=""}catch(n){t=""}return t},e.httpLog=!0,e}();__reflect(ErrorLog.prototype,"ErrorLog");var Assert=ErrorLog.Assert;window.onerror=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="",r="";if(e[4]&&e[4].stack){var i=e[4].stack.split("at ");n=i[1].split(" ")[0];for(var o=2;o<i.length;o++){var s=i[o].split("/");r+=s[s.length-1]}}var a="兼容问题无法获取值",h="错误信息："+e[0]+"\n"+("出错位置："+e[2]+"行"+(e[3]?e[3]+"列":a)+"\n")+("出错函数："+n+"\n")+("函数调用："+r);h.indexOf(a)>=0||(alert(h),window.getClientVersion(function(e){var t=parseInt(e)||0;1===t||0===t||location.reload()}))};var ClickRead=function(e){function t(){var t=e.call(this)||this;return t.selectIndex=-1,t.pageIndex=1,t.pageData={},t.totalPage=0,t.singleItemHeight=100,t.skinName="ClickReadSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.list.itemRenderer=ClickReadItem,this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},t.prototype.dataProvider=function(e){this.splitPage(e),this.dataRecord=new eui.ArrayCollection,this.dataRecord.source=this.pageData[1],this.list.dataProvider=this.dataRecord
},t.prototype.refreshData=function(e){this.pageIndex+=e,this.pageIndex>=this.totalPage&&(this.pageIndex=this.totalPage),this.pageIndex<=1&&(this.pageIndex=1),this.dataRecord.source=this.pageData[this.pageIndex],this.list.dataProviderRefreshed(),this.selectIndex=-1},t.prototype.splitPage=function(e){var t=0,n=window.innerHeight/860,r=Math.ceil(8*n);n>1&&(r=8),this.totalPage=Math.ceil(e.length/r);for(var i=0;i<e.length;i++)if(t+=1,r>=t){var o=0==i?1:Math.ceil((i+1)/r);this.pageData[o]||(this.pageData[o]=[]),this.pageData[o].push(e[i]),t%r||(t=0)}},Object.defineProperty(t.prototype,"m_pageNum",{get:function(){return this.totalPage},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"m_curPage",{get:function(){return this.pageIndex},enumerable:!0,configurable:!0}),t.prototype.onItemTap=function(e){var t=this.list.getChildAt(e.itemIndex);if(-1!=this.selectIndex&&this.selectIndex!=e.itemIndex){var n=this.list.getChildAt(this.selectIndex);n.initialize({bold:!1,size:30})}this.selectIndex=e.itemIndex,t.refreshItem({bold:!0,size:40})},t.prototype.distory=function(){this.selectIndex=-1;var e=this.list.$children.length;this.pageData=null,this.pageIndex=null,this.totalPage=null,this.singleItemHeight=null;for(var t=0;e>t;t++){var n=this.list.getChildAt(t);n.distory()}this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},t}(eui.Component);__reflect(ClickRead.prototype,"ClickRead");var ClickReadItem=function(e){function t(){var t=e.call(this)||this;return t.audio="",t.count=0,t.skinName="ClickReadItemSkin",t.init(),t}return __extends(t,e),t.prototype.init=function(){this.trans.visible=!1,this.addTouchEvent(this.itemGroup,this.onClick,!0)},t.prototype.onClick=function(e){},t.prototype.dataChanged=function(){this.data&&(this.enFont.text=this.data.font,this.trans.text=this.data.trans,this.data.audio&&(this.audio=this.data.audio))},t.prototype.initialize=function(e){this.trans.visible=!1,this.count=0,this.refreshItem(e,"init")},t.prototype.refreshItem=function(e,t){void 0===t&&(t="refresh");for(var n in e)this.enFont[n]&&(this.enFont[n]=e[n]);"refresh"==t&&(this.count+=1,this.trans.visible=this.count%2==0),this.audio&&(SoundManager.ins().stopEffect(),SoundManager.ins().playEffect(""+MP3_DIR+this.audio))},t.prototype.distory=function(){this.removeTouchEvent(this.itemGroup,this.onClick),this.count=0},t}(BaseItemRender);__reflect(ClickReadItem.prototype,"ClickReadItem");var SingleWordSelectItem=function(e){function t(){var t=e.call(this)||this;return t.count=-1,t.trans="",t.audio="",t.fontLab="",t.selectBoo=!1,t.wrongBoo=!1,t.checkBoo=!1,t.skinName="SingleWordSelectItemSkin",t}return __extends(t,e),t.prototype.childrenCreated=function(){this.wrongImg.touchEnabled=!1,this.checkbox.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.font.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t.prototype.onTouchTap=function(e){switch(e.target){case this.checkbox:"check"!=GameApp.ins().curRoute?(this.selectBoo=!this.selectBoo,this.checkbox.selected=this.selectBoo):(this.rect.visible=!0,this.checkBoo=!0,this.wrongBoo=!this.wrongBoo,this.wrongImg.visible=this.wrongBoo);break;case this.font:this.initialize()}},Object.defineProperty(t.prototype,"select",{get:function(){return this.selectBoo},set:function(e){this.selectBoo=e,this.checkbox.selected=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWrong",{get:function(){return this.wrongBoo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isCheck",{get:function(){return this.checkBoo},enumerable:!0,configurable:!0}),t.prototype.dataChanged=function(){this.data&&(this.font.text=this.data.font,this.fontLab=this.data.font,this.trans=this.data.trans,this.data.audio&&(this.audio=this.data.audio))},t.prototype.initialize=function(){"check"==GameApp.ins().curRoute&&(this.rect.visible=!0,this.checkBoo=!0),this.count+=1,this.font.text=this.count%2==0?this.trans:this.fontLab,this.audio&&(SoundManager.ins().stopEffect(),SoundManager.ins().playEffect(""+MP3_DIR+this.audio))},t.prototype.distory=function(){this.checkbox.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.font.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t}(BaseItemRender);__reflect(SingleWordSelectItem.prototype,"SingleWordSelectItem");var TestSceneItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="TestSceneItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&(this.select.text=this.data.select,this.selectIndexLab.text=this.data.label,this.selectLab=this.data.label)},t.prototype.refreshItem=function(e,t){void 0===t&&(t=0),t&&(this.selectIndexLab.visible=!e),1==t?(this.selectImg.source="select_right_jpg",this.select.textColor=2351139):2==t?(this.selectImg.source="select_wrong_jpg",this.select.textColor=15533831):(this.select.bold=e?!0:!1,this.select.size=e?40:30,this.selectImg.source="select_normal_png",this.select.textColor=0)},t}(BaseItemRender);__reflect(TestSceneItem.prototype,"TestSceneItem");var WarnWin=function(e){function t(){var t=e.call(this)||this;return t.skinName="warnFrameSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.maskRect,this.close),this.addTouchEvent(this.sureBtn,this.onSure),this.tips.text=e[0].tips,e[0].callBack&&(this.callBack=e[0].callBack),e[0].thisArg&&(this.thisArg=e[0].thisArg)},t.prototype.onSure=function(){this.callBack&&this.thisArg&&this.callBack.call(this.thisArg),this.close()},t.prototype.close=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.removeTouchEvent(this.maskRect,this.close),this.removeTouchEvent(this.sureBtn,this.onSure),ViewManager.ins().close(t)},t}(BaseEuiView);__reflect(WarnWin.prototype,"WarnWin"),ViewManager.ins().reg(WarnWin,LayerManager.UI_Popup);var WordRecoverItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="WordRecoverItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){this.data&&(this.label.text=this.data.label,this._recorded=this.data.recorded,this.data.recorded?this.itembg.source="item_down_png":this.itembg.source="item_up_png",this.data.level&&(this._level=this.data.level))},Object.defineProperty(t.prototype,"recorded",{get:function(){return this._recorded},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"select",{get:function(){return this.checkBox.selected},set:function(e){this.checkBox.selected=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selectLev",{get:function(){return this._level},enumerable:!0,configurable:!0}),t.prototype.getCheckStatus=function(){return this.checkBox.selected},t.prototype.refresh=function(){this.itembg.source="item_down_png"},t.prototype.distory=function(){},t}(BaseItemRender);__reflect(WordRecoverItem.prototype,"WordRecoverItem");var AnswerConfig=function(){function e(){}return e}();__reflect(AnswerConfig.prototype,"AnswerConfig");var GlobalConfig=function(){function e(){}return e.setData=function(e){this.config=e},e.parserData=function(){if(!this.init&&this.config){var t=function(t){var r=n.config[t],i=egret.getDefinitionByName(t);if(i){var o="_obj"+t;n[o]=new i;var s="_bool"+t;n[s]=!1;var a="_"+t+"_";Object.defineProperty(n,t,{get:function(){var n=this[a];if(this[s])return n;var r=this[o];return this.parseKeys(n,r,e.keys[t]||0),this[s]=!0,n},set:function(e){this[a]=e}})}n[t]=r},n=this;for(var r in this.config)t(r);this.init=!0,this.config=null}},e.parseKeys=function(e,t,n){if(0==n)e.__proto__=t;else for(var r in e)this.parseKeys(e[r],t,n-1)},e.keys={RecordConfig:1,answer:1,LevelConfig:1},e}();__reflect(GlobalConfig.prototype,"GlobalConfig");var LevelConfig=function(){function e(){}return e}();__reflect(LevelConfig.prototype,"LevelConfig");var RecordConfig=function(){function e(){}return e}();__reflect(RecordConfig.prototype,"RecordConfig");var TestResultDesc;!function(e){function t(e){for(var t="词汇量检测评估结果\n",r="您词汇量检测的成绩是"+e+"分。\n",i=[6,12,24,50,74,94],o=0,s=0;s<i.length;s++)e>=i&&(o=s);var a=n[o.toString()];return t+r+a}var n={0:"您的词汇量约100-200，相当于零起点或小学一二年级水平，只能认识生活中少数简单的名词，无法进行交流/阅读/写作，建议背诵小学词汇。",1:"您的词汇量约200-300，相当于小学三四年级水平，只能认识生活中少数简单的名词，无法进行交流/阅读/写作，建议背诵小学词汇和初中词汇。",2:"您的词汇量约300-500，相当于小学五六年级水平，只能认识生活中简单的名词和部分最基本的词汇，能进行简单的听说交流，基本无阅读和写作能力，建议背诵初中词汇和高中初级词汇。",3:"您的词汇量约1000—1500，相当于初三一般水平，能认识生活中的简单词汇，能进行简单的听说交流，写出简单句子，但完型填空和阅读理解稍有难度时感觉吃力，写作中缺少高级词汇，缺少亮点突破，建议背诵高中初级/中级/高级词汇。",4:"您的词汇量约1800—2000，相当于高二一般水平，能认识生活中的简单词汇，能进行简单的听说交流，写出简单句子，但完型填空和阅读理解稍有难度时感觉吃力，写作中缺少高级词汇，缺少亮点突破，建议背诵高中中级/高级词汇和托福初级词汇。",5:"您的词汇量约2600-3000，相当于高三较高或以上水平，能认识生活中的简单词汇，能进行简单的听说交流，写出简单句子和简单复合句，但完型阅读稍有难度时感觉吃力，写作中缺少高级词汇，缺少亮点突破，建议背诵高中以上词汇，如托福或雅思词汇。"};e.resultStr=t}(TestResultDesc||(TestResultDesc={}));var RecordScene=function(e){function t(){var t=e.call(this)||this;return t._route="",t.wordNum=0,t.skinName="RecordSceneSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.exitButton,this.onTouch,!0),this.addTouchEvent(this.btn_left,this.onLeft,!0),this.addTouchEvent(this.btn_right,this.onRight,!0);var n=e[0].dataCfg;e[0].title&&(this.title.text=e[0].title);var r=[];for(var i in n)r.push(n[i]);this.wordNum=r.length,this.clickReadpanel.dataProvider(r),e[0].route&&(this._route=e[0].route),this.pageNum.text=this.clickReadpanel.m_curPage+"/"+this.clickReadpanel.m_pageNum,this.refreshArrow()},t.prototype.onLeft=function(){1!=this.clickReadpanel.m_curPage&&(this.clickReadpanel.refreshData(-1),this.refreshArrow())},t.prototype.onRight=function(){return this.clickReadpanel.m_curPage>=this.clickReadpanel.m_pageNum?void("study"==this._route&&(ViewManager.ins().open(WarnWin,{tips:"恭喜您，顺利通关并获得了金币*"+5*this.wordNum}),MessageCenter.ins().dispatch("passLevel"),this.close(),ViewManager.ins().close(t))):(this.clickReadpanel.refreshData(1),void this.refreshArrow())},t.prototype.refreshArrow=function(){this.pageNum.text=this.clickReadpanel.m_curPage+"/"+this.clickReadpanel.m_pageNum},t.prototype.onTouch=function(e){this.close(),ViewManager.ins().close(t)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.btn_left,this.onLeft),this.removeTouchEvent(this.btn_right,this.onRight),this.removeTouchEvent(this.exitButton,this.onTouch)},t}(BaseEuiView);__reflect(RecordScene.prototype,"RecordScene"),ViewManager.ins().reg(RecordScene,LayerManager.UI_Main);var SingleWordSelect=function(e){function t(){var t=e.call(this)||this;return t.recoverData=[],t.wordData=[],t.titleLab="",t.route="",t.checkNum=0,t.wrongNum=0,t.skinName="SingleWordSelectSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.delBtn.visible=!1,this.recoverData=[],this.arrayCollect=new eui.ArrayCollection,this.wordData=e[0].wordData,e[0].route&&(this.route=e[0].route,"TeachMainScene"==this.route?(this.buttonLabel.text="重新识记",this.title.text="我的生词本",this.titleLab="重新识记",this.delBtn.visible=!0):"check"==this.route&&(this.buttonLabel.text="重新识记",this.title.text="开始检查",this.delBtn.visible=!1,this.selectAll.visible=!1,this.checkRecordLab.visible=!0),GameApp.ins().curRoute=e[0].route),this.list.itemRenderer=SingleWordSelectItem,this.scroller.viewport=this.list,this.arrayCollect.source=this.wordData,this.list.dataProvider=this.arrayCollect,this.exitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.selectAll.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.delBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},t.prototype.onItemTap=function(e){var t=this;if("check"==GameApp.ins().curRoute)var n=egret.setTimeout(function(){egret.clearTimeout(n);for(var e=t.list.$children.length,r=0,i=0,o=0;e>o;o++){var s=t.list.getChildAt(o);s.isWrong&&(i+=1),s.isCheck&&(r+=1)}var a=(e-i)/e*100>>0;t.checkRecordLab.text="已检查"+r+"个/错误"+i+"个/正确率"+a+"%";GameApp.ins().checkResultStr=t.checkRecordLab.text},this,500)},t.prototype.onTouchTap=function(e){var t=this;switch(e.target){case this.exitButton:this.close();break;case this.sureBtn:var n=this.getSelectWordNum();if(7>n)return void ViewManager.ins().open(WarnWin,{tips:"请至少选择7个单词~"});this.route&&"recover"!=this.route?("TeachMainScene"==this.route||"check"==this.route)&&(ViewManager.ins().open(RecordScene,{dataCfg:this.recoverData,title:this.titleLab?this.titleLab:""}),this.close()):(this.writeWordToLocal(),ViewManager.ins().open(WarnWin,{tips:"已为您添加到生词本~请继续努力",callBack:function(){ViewManager.ins().open(RecordScene,{dataCfg:t.recoverData,title:"复习中"}),t.close()},thisArg:this}));break;case this.selectAll:this.selectCheck.selected=!this.selectCheck.selected,this.operAllSelect();break;case this.delBtn:var r=this.getSelectWordNum();if(0>=r)return void ViewManager.ins().open(WarnWin,{tips:"请先选择要删除的生词"});for(var i=[],o=this.recoverData.length-1;o>=0;o--){var s=this.recoverData[o],a=egret.localStorage.getItem(s.id.toString());a&&egret.localStorage.removeItem(s.id.toString()),i.push(s.id)}this.recoverData=[];var h=egret.localStorage.getItem("wordids"),u=h.split("|");i.forEach(function(e){for(var n=0;n<t.wordData.length;n++)if(t.wordData[n].id==e){t.wordData.splice(n,1);break}for(var r=0;r<u.length;r++)if(u[r]==e.toString()){u.splice(r,1);break}}),u.length?egret.localStorage.setItem("wordids",u.join("|")):egret.localStorage.setItem("wordids",""),this.arrayCollect.source=this.wordData,this.list.dataProviderRefreshed()}},t.prototype.writeWordToLocal=function(){for(var e=egret.localStorage.getItem("wordids"),t=0;t<this.recoverData.length;t++){var n=this.recoverData[t],r=egret.localStorage.getItem(n.id.toString());r||(egret.localStorage.setItem(n.id.toString(),JSON.stringify(this.recoverData[t])),""==e?e=n.id.toString():e+="|"+n.id)}egret.localStorage.setItem("wordids",e)},t.prototype.operAllSelect=function(){for(var e=this.selectCheck.selected,t=this.list.$children.length,n=0;t>n;n++){var r=this.list.getChildAt(n);r&&(r.select=e)}},t.prototype.getSelectWordNum=function(){for(var e=this.list.$children.length,t=0,n=0;e>n;n++){var r=this.list.getChildAt(n);r&&r.select&&(t+=1,this.recoverData.push(this.wordData[n]))}return t},t.prototype.close=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.recoverData=[];for(var r=this.list.$children.length,i=0;r>i;i++){var o=this.list.getChildAt(i);o&&o.distory()}ViewManager.ins().close(t),this.exitButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.selectAll.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.delBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.checkNum=0,this.wrongNum=0},t}(BaseEuiView);__reflect(SingleWordSelect.prototype,"SingleWordSelect"),ViewManager.ins().reg(SingleWordSelect,LayerManager.UI_Main);var StartGameScene=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.onEnter=function(){e.prototype.onEnter.call(this),this.addLayer(LayerManager.UI_Main),this.addLayer(LayerManager.UI_Popup),this.addLayer(LayerManager.UI_Tips),ViewManager.ins().open(MainScene)},t.prototype.onExit=function(){e.prototype.onExit.call(this)},t}(BaseScene);__reflect(StartGameScene.prototype,"StartGameScene");var TeachMainScene=function(e){function t(){var t=e.call(this)||this;return t.skinName="TeachMainSceneSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.recordBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.yueduBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bookBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.wordBookBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.exitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){switch(e.target){case this.recordBtn:ViewManager.ins().open(WordLibSelect);break;case this.yueduBtn:ViewManager.ins().open(WarnWin,{tips:"此功能暂未开放，敬请期待～"});break;case this.bookBtn:ViewManager.ins().open(WarnWin,{tips:"此功能暂未开放，敬请期待～"});break;case this.wordBookBtn:var n=egret.localStorage.getItem("wordids"),r=[];if(n){var i=n.split("|");i.forEach(function(e){var t=JSON.parse(egret.localStorage.getItem(e.toString()));t&&r.push(t)})}else egret.localStorage.setItem("wordids","");ViewManager.ins().open(SingleWordSelect,{wordData:r,title:"我的生词本",route:"TeachMainScene"});break;case this.exitButton:this.close(),ViewManager.ins().close(t)}},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.recordBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.yueduBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.bookBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.wordBookBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.exitButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t}(BaseEuiView);__reflect(TeachMainScene.prototype,"TeachMainScene"),ViewManager.ins().reg(TeachMainScene,LayerManager.UI_Main);var TestResult=function(e){function t(){var t=e.call(this)||this;return t.skinName="TestResultSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.exitButton,this.close,!0),this.addTouchEvent(this.sureBtn,this.close,!0),this.desc.text=TestResultDesc.resultStr(e[0].score)},t.prototype.close=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.removeTouchEvent(this.exitButton,this.close),this.removeTouchEvent(this.sureBtn,this.close),ViewManager.ins().close(t)},t}(BaseEuiView);__reflect(TestResult.prototype,"TestResult"),ViewManager.ins().reg(TestResult,LayerManager.UI_Main);var TestScene=function(e){function t(){var t=e.call(this)||this;return t.answerArr=[],t.curSelectIndex=-1,t.answerIndex=-1,t.correctNum=0,t.curProgressIndex=0,t.timeNum=60,t.singleScore=2,t.totalNum=0,t.clicked=!0,t.fontObj={0:"A",1:"B",2:"C",3:"D",4:"F",5:"G",6:"H",7:"I",8:"J"},t.skinName="TestSceneSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.progress.text="0%",this.num.text="00",this.word.text="",this.time.text="60s",this.list.itemRenderer=TestSceneItem,this.itemCollect=new eui.ArrayCollection,this.answerArr=[];var n=GlobalConfig.answer;for(var r in n)this.answerArr.push(n[r]);this.totalNum=this.answerArr.length,this.timer=new egret.Timer(1e3),this.addTouchEvent(this.exitButton,this.onTouch,!0),this.addTouchEvent(this.submitBtn,this.onTouch,!0),this.timer.addEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.refreshPage(this.answerArr.shift())},t.prototype.onItemTap=function(e){if(this.clicked){this.initItem(),this.curSelectIndex=e.itemIndex;var t=this.list.getChildAt(e.itemIndex);t.refreshItem(!0)}},t.prototype.initItem=function(){this.initList(this.curSelectIndex),this.initList(this.answerIndex)},t.prototype.initList=function(e){if(-1!=e){var t=this.list.getChildAt(e);t&&t.refreshItem(!1)}},t.prototype.onTimer=function(e){this.timeNum-=1,this.timeNum<=0&&(this.timeNum=0,this.showAnswer()),this.time.text=this.timeNum+"s"},t.prototype.refreshPage=function(e){var t=this;this.initItem(),this.curSelectIndex=-1,this.timeNum=60,this.timer.start(),this.progress.text=100*Number((this.curProgressIndex/this.totalNum).toFixed(2))+"%",this.num.text=e.id.toString(),this.time.text="60s",this.word.text=e.word;var n=e.selection.split("|"),r=[];n.forEach(function(e,n){r.push({select:e,label:t.fontObj[n]})},this),this.itemCollect.source=r,this.list.dataProvider=this.itemCollect,this.answerIndex=e.answer},t.prototype.onTouch=function(e){switch(e.target){case this.exitButton:this.close(),ViewManager.ins().close(t);break;case this.submitBtn:if(-1==this.curSelectIndex)return void ViewManager.ins().open(WarnWin,{tips:"不要调皮～认真的做题选答案"});this.curProgressIndex+=1,this.showAnswer()}},t.prototype.showAnswer=function(){var e=this;this.submitBtn.touchEnabled=!1,this.list.touchEnabled=!1,this.clicked=!1,this.timer.stop(),this.timer.reset();var t=this.list.getChildAt(this.curSelectIndex),n=this.list.getChildAt(this.answerIndex);this.curSelectIndex==this.answerIndex?(this.correctNum+=1,t&&t.refreshItem(!0,1)):(t&&t.refreshItem(!0,2),n&&n.refreshItem(!0,1));var r=egret.setTimeout(function(){egret.clearTimeout(r),e.answerArr.length?(e.list.touchEnabled=!0,e.submitBtn.touchEnabled=!0,e.clicked=!0,e.refreshPage(e.answerArr.shift())):e.outputResult()},this,3e3)},t.prototype.outputResult=function(){ViewManager.ins().open(TestResult,{score:this.correctNum*this.singleScore}),ViewManager.ins().close(t),this.close()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.num=null,this.progress=null,this.exitButton=null,this.word=null,this.time=null,this.answerArr=null,this.itemCollect=null,this.curSelectIndex=null,this.answerIndex=null,this.curProgressIndex=null,this.correctNum=null,this.singleScore=null,this.totalNum=null,this.clicked=null,this.timer.removeEventListener(egret.TimerEvent.TIMER,this.onTimer,this),this.removeTouchEvent(this.exitButton,this.onTouch),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},t}(BaseEuiView);__reflect(TestScene.prototype,"TestScene"),ViewManager.ins().reg(TestScene,LayerManager.UI_Main);var WordLibLevelSelect=function(e){function t(){var t=e.call(this)||this;return t.levelData={},t.levelCfgs=[],t.openData=[],t.skinName="WordLibLevelSelectSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.viewstack.selectedIndex=0,this.tabbar.dataProvider=this.viewstack,this.tabbar.itemRendererSkinName=MyNavButton,this.arrayCollect=new eui.ArrayCollection,this.arrayCollect1=new eui.ArrayCollection,this.arrayCollect2=new eui.ArrayCollection,this.list.itemRenderer=WordLibSelectItem,this.levelData={},this.scroller.viewport=this.list,this.openData=e[0].data,this.grade=e[0].grade,this.curLib.text=GameApp.ins().curLib;var n=this.openData.length,r=0,i=egret.localStorage.getItem(this.grade+"_passNum".toString());i&&(r=parseInt(i)),this.recordNum.text=r.toString(),this.remainNum.text=(n-r).toString();var o=0,s=egret.localStorage.getItem("goldNum");s&&(o=parseInt(s)),this.winGoldNum.text=o.toString(),this.checkResult.text=GameApp.ins().checkResultStr,this.refreshLevelCfgs(),this.dealLevelData(),this.arrayCollect.source=this.levelCfgs,this.list.dataProvider=this.arrayCollect,this.exitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.list1.itemRenderer=WordRecoverItem,this.scroller1.viewport=this.list1,this.arrayCollect1.source=this.levelCfgs,this.list1.dataProvider=this.arrayCollect1,this.list1.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap1,this),this.sureBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.list2.itemRenderer=WordRecoverItem,this.scroller2.viewport=this.list2,this.arrayCollect2.source=this.levelCfgs,this.list2.dataProvider=this.arrayCollect2,this.list2.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap1,this),this.sureBtn2.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.tabbar.addEventListener(egret.Event.CHANGE,this.onTabChange,this),MessageCenter.ins().addListener("passLevel",this.onLevelPass,this)},t.prototype.onTabChange=function(e){if(3==this.viewstack.selectedIndex){var t=this.openData.length,n=0,r=egret.localStorage.getItem(this.grade+"_passNum".toString());r&&(n=parseInt(r)),this.recordNum.text=n.toString(),this.remainNum.text=(t-n).toString();var i=0,o=egret.localStorage.getItem("goldNum");o&&(i=parseInt(o)),this.winGoldNum.text=i.toString(),this.checkResult.text=GameApp.ins().checkResultStr}},t.prototype.refreshLevelCfgs=function(){var e=[];this.levelCfgs=[];for(var t=this.openData,n=0;n<t.length;n++)if(-1==e.indexOf(t[n].level)){e.push(t[n].level);var r=egret.localStorage.getItem(t[n].grade+"_"+t[n].level),i=r?!0:!1;this.levelCfgs.push({label:"第"+t[n].level+"关",recorded:i,level:t[n].level})}this.arrayCollect.source=this.levelCfgs,this.list.dataProviderRefreshed(),this.arrayCollect1.source=this.levelCfgs,this.list1.dataProviderRefreshed(),this.arrayCollect2.source=this.levelCfgs,this.list2.dataProviderRefreshed()},t.prototype.dealLevelData=function(){for(var e=this.openData,t=0;t<e.length;t++){var n=e[t].level;this.levelData[n]||(this.levelData[n]=[]),this.levelData[n].push(e[t])}},t.prototype.onLevelPass=function(){var e=this.levelData[this._level];if(!egret.localStorage.getItem(this.grade+"_"+this._level)){egret.localStorage.setItem(this.grade+"_"+this._level,"1");var t=egret.localStorage.getItem(this.grade+"_passNum".toString());t?egret.localStorage.setItem(this.grade+"_passNum",parseInt(t)+e.length+""):egret.localStorage.setItem(this.grade+"_passNum",e.length);var n=egret.localStorage.getItem("goldNum");n?egret.localStorage.setItem("goldNum",parseInt(n)+5*e.length+""):egret.localStorage.setItem("goldNum",(5*e.length).toString()),this.refreshLevelCfgs()}},t.prototype.onItemTap=function(e){var t=e.itemIndex+1;this._level=t;var n=this.levelData[t];ViewManager.ins().open(RecordScene,{dataCfg:n,title:"第"+t+"关",route:"study"})},t.prototype.onItemTap1=function(e){var t;if(1==this.viewstack.selectedIndex?t=this.list1.getChildAt(e.itemIndex):2==this.viewstack.selectedIndex&&(t=this.list2.getChildAt(e.itemIndex)),t){if(!t.recorded)return void ViewManager.ins().open(WarnWin,{tips:"请选择已学习过的关卡~"});t.select=!t.select}},t.prototype.onTouchTap=function(e){switch(e.target){case this.exitButton:this.close(),ViewManager.ins().close(t);break;case this.sureBtn:this.recoverStart("recover");break;case this.sureBtn2:this.recoverStart("check")}},t.prototype.recoverStart=function(e){var t;t="recover"==e?this.list1.$children.length:this.list2.$children.length;for(var n=[],r=0;t>r;r++){var i=void 0;i="recover"==e?this.list1.getChildAt(r):this.list2.getChildAt(r),i&&i.select&&(n=n.concat(this.levelData[i.selectLev]))}ViewManager.ins().open(SingleWordSelect,{wordData:n,route:e})},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.levelData={},this.levelCfgs=[],this.openData=[],this.exitButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.list1.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap1,this),this.sureBtn.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.list2.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap1,this),this.sureBtn2.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.tabbar.removeEventListener(egret.Event.CHANGE,this.onTabChange,this)},t}(BaseEuiView);__reflect(WordLibLevelSelect.prototype,"WordLibLevelSelect"),ViewManager.ins().reg(WordLibLevelSelect,LayerManager.UI_Main);var WordLibSelect=function(e){function t(){var t=e.call(this)||this;return t.words=[],t.dataObj={},t.skinName="WordLibSelectSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.words=["小学词汇","初中词汇","高中初级词汇","高中中级词汇","高中高级词汇"],this.arrcollect=new eui.ArrayCollection,this.list.itemRenderer=WordLibSelectItem;GlobalConfig.LevelConfig;this.dealLevelData();var n=[];this.words.forEach(function(e){n.push({label:e})}),this.arrcollect.source=n,this.list.dataProvider=this.arrcollect,this.exitButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this),this.list.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this)},t.prototype.onItemTap=function(e){var t=e.itemIndex+1;GameApp.ins().curLib=this.words[e.itemIndex],this.dataObj[t]&&ViewManager.ins().open(WordLibLevelSelect,{data:this.dataObj[t],grade:t})},t.prototype.dealLevelData=function(){var e=GlobalConfig.LevelConfig;for(var t in e){var n=e[t];this.dataObj[n.grade]||(this.dataObj[n.grade]=[]),this.dataObj[n.grade].push(n)}},t.prototype.onTouchTap=function(e){switch(e.target){case this.exitButton:this.close(),ViewManager.ins().close(t)}},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.words=[],this.dataObj={};for(var n=this.list.$children.length,r=0;n>r;r++){var i=this.list.getChildAt(r);i&&i.distory()}this.list.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.exitButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTouchTap,this)},t}(BaseEuiView);__reflect(WordLibSelect.prototype,"WordLibSelect"),ViewManager.ins().reg(WordLibSelect,LayerManager.UI_Main);var WordLibSelectItem=function(e){function t(){var t=e.call(this)||this;return t.skinName="WordLibSelectItemSkin",t}return __extends(t,e),t.prototype.init=function(){this.addTouchEvent(this.itemGroup,this.onClick,!0)},t.prototype.onClick=function(e){},t.prototype.dataChanged=function(){this.data&&(this.label.text=this.data.label,this.data.recorded?this.itembg.source="item_down_png":this.itembg.source="item_up_png")},t.prototype.refresh=function(){this.itembg.source="item_down_png"},t.prototype.distory=function(){this.removeTouchEvent(this.itemGroup,this.onClick)},t}(BaseItemRender);__reflect(WordLibSelectItem.prototype,"WordLibSelectItem");var MainScene=function(e){function t(){var t=e.call(this)||this;return t.skinName="MainSceneSkin",t}return __extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.recordButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.testButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.listButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.teachButton.addEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t.prototype.onTap=function(e){switch(e.target){case this.recordButton:ViewManager.ins().open(RecordScene,{dataCfg:GlobalConfig.RecordConfig});break;case this.testButton:ViewManager.ins().open(TestScene);break;case this.listButton:ViewManager.ins().open(WarnWin,{tips:"此功能暂未开放，敬请期待～"});break;case this.teachButton:ViewManager.ins().open(TeachMainScene)}},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.testButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.recordButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.listButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this),this.teachButton.removeEventListener(egret.TouchEvent.TOUCH_TAP,this.onTap,this)},t}(BaseEuiView);__reflect(MainScene.prototype,"MainScene"),ViewManager.ins().reg(MainScene,LayerManager.UI_Main);